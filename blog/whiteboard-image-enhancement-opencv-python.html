<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta content="width=device-width, initial-scale=1" name="viewport"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/335076a2a094d685.css" as="style"/><link rel="stylesheet" href="/_next/static/css/335076a2a094d685.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-59c5c889f52620d6.js" defer=""></script><script src="/_next/static/chunks/framework-2c79e2a64abdb08b.js" defer=""></script><script src="/_next/static/chunks/main-83cebdb887f48834.js" defer=""></script><script src="/_next/static/chunks/pages/_app-a7f9d26078513d5b.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bid%5D-5091ad1b39bfe17d.js" defer=""></script><script src="/_next/static/4IOv20hLvQp5DhgHdJz_d/_buildManifest.js" defer=""></script><script src="/_next/static/4IOv20hLvQp5DhgHdJz_d/_ssgManifest.js" defer=""></script></head><body class="bg-white text-black antialiased dark:bg-gray-900 dark:text-white"><div id="__next"><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><div class="flex min-h-screen flex-col justify-between"><nav class="w-full flex items-center border-b justify-between px-4 py-4 backdrop-blur dark:bg-transparent fixed shadow"><div><a aria-label="üë®‚Äçüíª" href="/"><div class="flex items-center justify-between"><div class="font-title fonthidden text-xl md:text-2xl xl:text-3xl font-semibold sm:block">üë®‚Äçüíª</div></div></a></div><div class="flex items-center text-base leading-5"><div class="hidden sm:block"><a class="font-title p-1 text-xl md:text-xl xl:text-2xl font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/blog"> <!-- -->Blog<!-- --> </a><a class="font-title p-1 text-xl md:text-xl xl:text-2xl font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/tags"> <!-- -->Tags<!-- --> </a><a class="font-title p-1 text-xl md:text-xl xl:text-2xl font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/projects"> <!-- -->Projects<!-- --> </a><a class="font-title p-1 text-xl md:text-xl xl:text-2xl font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/about2"> <!-- -->About<!-- --> </a></div><div class="sm:hidden"><button type="button" class="ml-1 mr-1 h-8 w-8 rounded py-1" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed top-0 left-0 z-10 h-full w-full transform bg-gray-200 opacity-95 duration-300 ease-in-out dark:bg-gray-800 translate-x-full"><div class="flex justify-end"><button type="button" class="mr-5 mt-11 h-8 w-8 rounded" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><nav class="fixed mt-8 h-full"><div class="px-12 py-4"><a class="text-2xl font-title tracking-widest text-gray-900 dark:text-gray-100" href="/blog">Blog</a></div><div class="px-12 py-4"><a class="text-2xl font-title tracking-widest text-gray-900 dark:text-gray-100" href="/tags">Tags</a></div><div class="px-12 py-4"><a class="text-2xl font-title tracking-widest text-gray-900 dark:text-gray-100" href="/projects">Projects</a></div><div class="px-12 py-4"><a class="text-2xl font-title tracking-widest text-gray-900 dark:text-gray-100" href="/about2">About</a></div></nav></div></div></div></nav><main class="prose dark:prose-dark mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0 py-20">AppLayout<article><div><header><div class="space-y-1 border-b border-gray-200 pt-15 pt-10 dark:border-gray-700 text-center"><div class="grid grid-rows-2 grid-flow-col gap-4"><div><h1 class="text-4xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14 break-words">Whiteboard Image Enhancement using OpenCV</h1></div><div><a class="mr-4 text-mm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/image-processing">image-processing</a><a class="mr-4 text-mm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/opencv">opencv</a></div></div></div></header><p><img src="whiteboard-enhance/whiteboard-image-enhancement.jpg" alt="Whiteboard image enhancement in Python"/></p>
<h1>Whiteboard image enhancement using OpenCV</h1>
<p>Whiteboard images generally contain less contrast and low brightness as they would be captured in mobile under normal room light conditions. Enhancing whiteboard images makes text readable and gives an image with high contrast and brightness.</p>
<p>We will apply different image-processing techniques to enhance whiteboard images using OpenCV in Python. From this <a target="_blank" rel="noopener noreferrer" href="https://gist.github.com/lelandbatey/8677901">whiteboard-cleaner</a> gist that enhances whiteboard images using <a target="_blank" rel="noopener noreferrer" href="https://imagemagick.org/">ImageMagick</a>, we will implement those ImageMagick methods in Python.</p>
<p>In that script, the following ImageMagick functions were used to enhance whiteboard images</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="shell" data-theme="default"><code data-language="shell" data-theme="default"><span class="line"><span style="color:#ABB2BF">-morphology </span><span style="color:#98C379">Convolve</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">DoG:</span><span style="color:#D19A66">15</span><span style="color:#98C379">,</span><span style="color:#D19A66">100</span><span style="color:#98C379">,</span><span style="color:#D19A66">0</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">-negate</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">-normalize</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">-blur</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">0x</span><span style="color:#D19A66">1</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">-channel</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">RBG</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">-level</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">60</span><span style="color:#98C379">%,</span><span style="color:#D19A66">91</span><span style="color:#98C379">%,</span><span style="color:#D19A66">0.1</span></span></code></pre></div>
<p>Above command applies image enhancing functions in order</p>
<ul>
<li><strong>-morphology Convolve DoG:15, 100, 0</strong>: Difference of Gaussian (DoG) with kernel_radius=15, sigma1=100, and sigma2=0</li>
<li><strong>-negate</strong>: Negative of image</li>
<li><strong>-normalize</strong>: Contrast stretch image with black=0.15% and white=0.05%</li>
<li><strong>-blur 0x1</strong>: Gaussian blur with sigma=1</li>
<li>**-level 60%,91%,0.1: Stretch image with black=60% and white=91%, and Gamma correction by gamma=0.1</li>
</ul>
<p>As I found some difficulty for exactly converting the ImageMagick C code to Python, I have changed the order and parameters that would give close results.</p>
<hr/>
<p>We will apply series of image-processing methods and effects to enhance whiteboard images in the following order</p>
<ul>
<li>Difference of Gaussian (DoG)</li>
<li>Negative effect</li>
<li>Contrast Stretching</li>
<li>Gaussian blur</li>
<li>Gamma correction</li>
<li>Color balance</li>
</ul>
<p>You can find the full code in my Github repository <a target="_blank" rel="noopener noreferrer" href="https://github.com/santhalakshminarayana/whiteboard-image-enhance">whiteboard-image-enhance</a></p>
<h3>Import packages and read image</h3>
<div data-rehype-pretty-code-fragment=""><pre data-language="python" data-theme="default"><code data-language="python" data-theme="default"><span class="line"><span style="color:#C678DD;font-style:italic">import</span><span style="color:#ABB2BF"> cv2</span></span>
<span class="line"><span style="color:#C678DD;font-style:italic">import</span><span style="color:#ABB2BF"> numpy </span><span style="color:#C678DD;font-style:italic">as</span><span style="color:#ABB2BF"> np</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#ABB2BF">img </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> cv2.</span><span style="color:#61AFEF">imread</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&#x27;input.jpg&#x27;</span><span style="color:#ABB2BF">)</span></span></code></pre></div>
<p><img src="whiteboard-enhance/whiteboard-image.jpg" alt="Whiteboard image input:=:70:=:Input Whiteboard image"/></p>
<h3>Difference of Gaussian (DoG)</h3>
<p><a target="_blank" rel="noopener noreferrer" href="https://en.wikipedia.org/wiki/Difference_of_Gaussians">Difference of Gaussians (DoG)</a> is the difference of two Gaussian kernel convoluted images. DoG image is obtained by subtracting two Gaussian blurred images with different kernel radius and variance.</p>
<p>Normally <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>I</mi><mrow><mi>d</mi><mi>o</mi><mi>g</mi></mrow></msub></mrow><annotation encoding="application/x-tex">I_{dog}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight" style="margin-right:0.03588em">g</span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span></span></span></span></span> (DoG of image) is calculated by subtracting <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>I</mi><mrow><mi>g</mi><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">I_{g1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em">g</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span></span></span></span></span> and <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>I</mi><mrow><mi>g</mi><mn>2</mn></mrow></msub></mrow><annotation encoding="application/x-tex">I_{g2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em">g</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span></span></span></span></span> which are convoluted images with two different Gaussian kernels. But ImageMagick applies convolution after subtracting and scaling two gaussian kernels.</p>
<p>So, we will first subtract two different Gaussian kernels, scale and normalize the dog-kernel to the zero-summing kernel (sum of all elements ~ 0.0)  and then apply convolution.</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="python" data-theme="default"><code data-language="python" data-theme="default"><span class="line"><span style="color:#C678DD">def</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">normalize_kernel</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66;font-style:italic">kernel</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66;font-style:italic">k_width</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66;font-style:italic">k_height</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66;font-style:italic">scaling_factor</span><span style="color:#ABB2BF"> = </span><span style="color:#D19A66">1.0</span><span style="color:#ABB2BF">):</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#98C379">&#x27;&#x27;&#x27;Zero-summing normalize kernel&#x27;&#x27;&#x27;</span></span>
<span class="line"><span style="color:#ABB2BF">    </span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#D19A66">K_EPS</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">1.0e-12</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#7F848E;font-style:italic"># positive and negative sum of kernel values</span></span>
<span class="line"><span style="color:#ABB2BF">    pos_range, neg_range </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">0</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#C678DD;font-style:italic">for</span><span style="color:#ABB2BF"> i </span><span style="color:#C678DD;font-style:italic">in</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">range</span><span style="color:#ABB2BF">(k_width </span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF"> k_height):</span></span>
<span class="line"><span style="color:#ABB2BF">        </span><span style="color:#C678DD;font-style:italic">if</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">abs</span><span style="color:#ABB2BF">(kernel[i]) </span><span style="color:#56B6C2">&lt;</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">K_EPS</span><span style="color:#ABB2BF">:</span></span>
<span class="line"><span style="color:#ABB2BF">            kernel[i] </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">0.0</span></span>
<span class="line"><span style="color:#ABB2BF">        </span><span style="color:#C678DD;font-style:italic">if</span><span style="color:#ABB2BF"> kernel[i] </span><span style="color:#56B6C2">&lt;</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">:</span></span>
<span class="line"><span style="color:#ABB2BF">            neg_range </span><span style="color:#56B6C2">+=</span><span style="color:#ABB2BF"> kernel[i]</span></span>
<span class="line"><span style="color:#ABB2BF">        </span><span style="color:#C678DD;font-style:italic">else</span><span style="color:#ABB2BF">:</span></span>
<span class="line"><span style="color:#ABB2BF">            pos_range </span><span style="color:#56B6C2">+=</span><span style="color:#ABB2BF"> kernel[i]</span></span>
<span class="line"><span style="color:#ABB2BF">    </span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#7F848E;font-style:italic"># scaling factor for positive and negative range</span></span>
<span class="line"><span style="color:#ABB2BF">    pos_scale, neg_scale </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> pos_range, </span><span style="color:#56B6C2">-</span><span style="color:#ABB2BF">neg_range</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#C678DD;font-style:italic">if</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">abs</span><span style="color:#ABB2BF">(pos_range) </span><span style="color:#56B6C2">&gt;=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">K_EPS</span><span style="color:#ABB2BF">:</span></span>
<span class="line"><span style="color:#ABB2BF">        pos_scale </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> pos_range</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#C678DD;font-style:italic">else</span><span style="color:#ABB2BF">:</span></span>
<span class="line"><span style="color:#ABB2BF">        pos_sacle </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">1.0</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#C678DD;font-style:italic">if</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">abs</span><span style="color:#ABB2BF">(neg_range) </span><span style="color:#56B6C2">&gt;=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">K_EPS</span><span style="color:#ABB2BF">:</span></span>
<span class="line"><span style="color:#ABB2BF">        neg_scale </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">1.0</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#C678DD;font-style:italic">else</span><span style="color:#ABB2BF">:</span></span>
<span class="line"><span style="color:#ABB2BF">        neg_scale </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">-</span><span style="color:#ABB2BF">neg_range</span></span>
<span class="line"><span style="color:#ABB2BF">        </span></span>
<span class="line"><span style="color:#ABB2BF">    pos_scale </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> scaling_factor </span><span style="color:#56B6C2">/</span><span style="color:#ABB2BF"> pos_scale</span></span>
<span class="line"><span style="color:#ABB2BF">    neg_scale </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> scaling_factor </span><span style="color:#56B6C2">/</span><span style="color:#ABB2BF"> neg_scale</span></span>
<span class="line"><span style="color:#ABB2BF">    </span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#7F848E;font-style:italic"># scale kernel values for zero-summing kernel</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#C678DD;font-style:italic">for</span><span style="color:#ABB2BF"> i </span><span style="color:#C678DD;font-style:italic">in</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">range</span><span style="color:#ABB2BF">(k_width </span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF"> k_height):</span></span>
<span class="line"><span style="color:#ABB2BF">        </span><span style="color:#C678DD;font-style:italic">if</span><span style="color:#ABB2BF"> (</span><span style="color:#C678DD;font-style:italic">not</span><span style="color:#ABB2BF"> np.nan </span><span style="color:#56B6C2">==</span><span style="color:#ABB2BF"> kernel[i]):</span></span>
<span class="line"><span style="color:#ABB2BF">            kernel[i] </span><span style="color:#56B6C2">*=</span><span style="color:#ABB2BF"> pos_scale </span><span style="color:#C678DD;font-style:italic">if</span><span style="color:#ABB2BF"> kernel[i] </span><span style="color:#56B6C2">&gt;=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">0</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD;font-style:italic">else</span><span style="color:#ABB2BF"> neg_scale</span></span>
<span class="line"><span style="color:#ABB2BF">            </span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#C678DD;font-style:italic">return</span><span style="color:#ABB2BF"> kernel</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#C678DD">def</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">dog</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66;font-style:italic">img</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66;font-style:italic">k_size</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66;font-style:italic">sigma_1</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66;font-style:italic">sigma_2</span><span style="color:#ABB2BF">):</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#98C379">&#x27;&#x27;&#x27;Difference of Gaussian by subtracting kernel 1 and kernel 2&#x27;&#x27;&#x27;</span></span>
<span class="line"><span style="color:#ABB2BF">    </span></span>
<span class="line"><span style="color:#ABB2BF">    k_width </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> k_height </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> k_size</span></span>
<span class="line"><span style="color:#ABB2BF">    x </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> y </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> (k_width </span><span style="color:#56B6C2">-</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">1</span><span style="color:#ABB2BF">) </span><span style="color:#56B6C2">//</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">2</span></span>
<span class="line"><span style="color:#ABB2BF">    kernel </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> np.</span><span style="color:#61AFEF">zeros</span><span style="color:#ABB2BF">(k_width </span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF"> k_height)</span></span>
<span class="line"><span style="color:#ABB2BF">    </span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#7F848E;font-style:italic"># first gaussian kernal</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#C678DD;font-style:italic">if</span><span style="color:#ABB2BF"> sigma_1 </span><span style="color:#56B6C2">&gt;</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">:</span></span>
<span class="line"><span style="color:#ABB2BF">        co_1 </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">1</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">/</span><span style="color:#ABB2BF"> (</span><span style="color:#D19A66">2</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF"> sigma_1 </span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF"> sigma_1)</span></span>
<span class="line"><span style="color:#ABB2BF">        co_2 </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">1</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">/</span><span style="color:#ABB2BF"> (</span><span style="color:#D19A66">2</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF"> np.pi </span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF"> sigma_1 </span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF"> sigma_1)</span></span>
<span class="line"><span style="color:#ABB2BF">        i </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">0</span></span>
<span class="line"><span style="color:#ABB2BF">        </span><span style="color:#C678DD;font-style:italic">for</span><span style="color:#ABB2BF"> v </span><span style="color:#C678DD;font-style:italic">in</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">range</span><span style="color:#ABB2BF">(</span><span style="color:#56B6C2">-</span><span style="color:#ABB2BF">y, y </span><span style="color:#56B6C2">+</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">1</span><span style="color:#ABB2BF">):</span></span>
<span class="line"><span style="color:#ABB2BF">            </span><span style="color:#C678DD;font-style:italic">for</span><span style="color:#ABB2BF"> u </span><span style="color:#C678DD;font-style:italic">in</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">range</span><span style="color:#ABB2BF">(</span><span style="color:#56B6C2">-</span><span style="color:#ABB2BF">x, x </span><span style="color:#56B6C2">+</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">1</span><span style="color:#ABB2BF">):</span></span>
<span class="line"><span style="color:#ABB2BF">                kernel[i] </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> np.</span><span style="color:#61AFEF">exp</span><span style="color:#ABB2BF">(</span><span style="color:#56B6C2">-</span><span style="color:#ABB2BF">(u</span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF">u </span><span style="color:#56B6C2">+</span><span style="color:#ABB2BF"> v</span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF">v) </span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF"> co_1) </span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF"> co_2</span></span>
<span class="line"><span style="color:#ABB2BF">                i </span><span style="color:#56B6C2">+=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">1</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#7F848E;font-style:italic"># unity kernel</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#C678DD;font-style:italic">else</span><span style="color:#ABB2BF">:</span></span>
<span class="line"><span style="color:#ABB2BF">        kernel[x </span><span style="color:#56B6C2">+</span><span style="color:#ABB2BF"> y </span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF"> k_width] </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">1.0</span></span>
<span class="line"><span style="color:#ABB2BF">    </span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#7F848E;font-style:italic"># subtract second gaussian from kernel</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#C678DD;font-style:italic">if</span><span style="color:#ABB2BF"> sigma_2 </span><span style="color:#56B6C2">&gt;</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">:</span></span>
<span class="line"><span style="color:#ABB2BF">        co_1 </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">1</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">/</span><span style="color:#ABB2BF"> (</span><span style="color:#D19A66">2</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF"> sigma_2 </span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF"> sigma_2)</span></span>
<span class="line"><span style="color:#ABB2BF">        co_2 </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">1</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">/</span><span style="color:#ABB2BF"> (</span><span style="color:#D19A66">2</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF"> np.pi </span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF"> sigma_2 </span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF"> sigma_2)</span></span>
<span class="line"><span style="color:#ABB2BF">        i </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">0</span></span>
<span class="line"><span style="color:#ABB2BF">        </span><span style="color:#C678DD;font-style:italic">for</span><span style="color:#ABB2BF"> v </span><span style="color:#C678DD;font-style:italic">in</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">range</span><span style="color:#ABB2BF">(</span><span style="color:#56B6C2">-</span><span style="color:#ABB2BF">y, y </span><span style="color:#56B6C2">+</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">1</span><span style="color:#ABB2BF">):</span></span>
<span class="line"><span style="color:#ABB2BF">            </span><span style="color:#C678DD;font-style:italic">for</span><span style="color:#ABB2BF"> u </span><span style="color:#C678DD;font-style:italic">in</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">range</span><span style="color:#ABB2BF">(</span><span style="color:#56B6C2">-</span><span style="color:#ABB2BF">x, x </span><span style="color:#56B6C2">+</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">1</span><span style="color:#ABB2BF">):</span></span>
<span class="line"><span style="color:#ABB2BF">                kernel[i] </span><span style="color:#56B6C2">-=</span><span style="color:#ABB2BF"> np.</span><span style="color:#61AFEF">exp</span><span style="color:#ABB2BF">(</span><span style="color:#56B6C2">-</span><span style="color:#ABB2BF">(u</span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF">u </span><span style="color:#56B6C2">+</span><span style="color:#ABB2BF"> v</span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF">v) </span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF"> co_1) </span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF"> co_2</span></span>
<span class="line"><span style="color:#ABB2BF">                i </span><span style="color:#56B6C2">+=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">1</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#7F848E;font-style:italic"># unity kernel</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#C678DD;font-style:italic">else</span><span style="color:#ABB2BF">:</span></span>
<span class="line"><span style="color:#ABB2BF">        kernel[x </span><span style="color:#56B6C2">+</span><span style="color:#ABB2BF"> y </span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF"> k_width] </span><span style="color:#56B6C2">-=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">1.0</span></span>
<span class="line"><span style="color:#ABB2BF">    </span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#7F848E;font-style:italic"># zero-normalize scling kernel with scaling factor 1.0</span></span>
<span class="line"><span style="color:#ABB2BF">    norm_kernel </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">normalize_kernel</span><span style="color:#ABB2BF">(kernel, k_width, k_height, </span><span style="color:#E06C75;font-style:italic">scaling_factor</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">1.0</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">    </span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#7F848E;font-style:italic"># apply filter with norm_kernel</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#C678DD;font-style:italic">return</span><span style="color:#ABB2BF"> cv2.</span><span style="color:#61AFEF">filter2D</span><span style="color:#ABB2BF">(img, </span><span style="color:#56B6C2">-</span><span style="color:#D19A66">1</span><span style="color:#ABB2BF">, norm_kernel.</span><span style="color:#61AFEF">reshape</span><span style="color:#ABB2BF">(k_width, k_height))</span></span></code></pre></div>
<p>Get Difference of Gaussian (DoG) for image by calling <em>dog()</em> function with <strong>radius = 15, sigma_1 = 100, sigma_2 = 0</strong>. Here <strong>radius = 15</strong> for both kernels, for first kernel, <strong>sigma = 100</strong>, and for second kernel, <strong>sigma = 0</strong>. Kernel with <strong>sigma = 0</strong> creates unity kernel means convolution with this kernel gives same image.</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="python" data-theme="default"><code data-language="python" data-theme="default"><span class="line"><span style="color:#ABB2BF">dog_img </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">dog</span><span style="color:#ABB2BF">(img, </span><span style="color:#D19A66">15</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">100</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">)</span></span></code></pre></div>
<p>After applying DoG, the resultant image looks like</p>
<p><img src="whiteboard-enhance/difference-of-gaussian.jpg" alt="Difference of Gaussian (DoG) Image:=:70:=:Difference of Gaussian (DoG) image"/></p>
<hr/>
<h3>Negative Image</h3>
<p>For <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>I</mi><mrow><mi>d</mi><mi>o</mi><mi>g</mi></mrow></msub></mrow><annotation encoding="application/x-tex">I_{dog}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight" style="margin-right:0.03588em">g</span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span></span></span></span></span>, get a negative image which is just an inversion of colors (255 - image).</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="python" data-theme="default"><code data-language="python" data-theme="default"><span class="line"><span style="color:#C678DD">def</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">negate</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66;font-style:italic">img</span><span style="color:#ABB2BF">):</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#98C379">&#x27;&#x27;&#x27;Negative of image&#x27;&#x27;&#x27;</span></span>
<span class="line"><span style="color:#ABB2BF">    </span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#C678DD;font-style:italic">return</span><span style="color:#ABB2BF"> cv2.</span><span style="color:#61AFEF">bitwise_not</span><span style="color:#ABB2BF">(img)</span></span></code></pre></div>
<div data-rehype-pretty-code-fragment=""><pre data-language="python" data-theme="default"><code data-language="python" data-theme="default"><span class="line"><span style="color:#ABB2BF">negative_img </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">negate</span><span style="color:#ABB2BF">(dog_img)</span></span></code></pre></div>
<p>The result of the inversion image is
<img src="whiteboard-enhance/negative.jpg" alt="Negative image:=:70:=:Negative image"/></p>
<p>Image content is not much visible as we inverted an image whose most of the pixels are black. So, to improve the contrast, we apply contrast-stretch enhancement for the negative image.</p>
<hr/>
<h3>Contrast Stretching</h3>
<p>Contrast stretching of an image is the same as histogram equalization but we cap some percentage of pixel values to black (0) and white (255).</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="python" data-theme="default"><code data-language="python" data-theme="default"><span class="line"><span style="color:#C678DD">def</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">get_black_white_indices</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66;font-style:italic">hist</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66;font-style:italic">tot_count</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66;font-style:italic">black_count</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66;font-style:italic">white_count</span><span style="color:#ABB2BF">):</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#98C379">&#x27;&#x27;&#x27;Blacking and Whiting out indices same as color balance&#x27;&#x27;&#x27;</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#ABB2BF">    black_ind </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">0</span></span>
<span class="line"><span style="color:#ABB2BF">    white_ind </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">255</span></span>
<span class="line"><span style="color:#ABB2BF">    co </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">0</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#C678DD;font-style:italic">for</span><span style="color:#ABB2BF"> i </span><span style="color:#C678DD;font-style:italic">in</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">range</span><span style="color:#ABB2BF">(</span><span style="color:#56B6C2">len</span><span style="color:#ABB2BF">(hist)):</span></span>
<span class="line"><span style="color:#ABB2BF">        co </span><span style="color:#56B6C2">+=</span><span style="color:#ABB2BF"> hist[i]</span></span>
<span class="line"><span style="color:#ABB2BF">        </span><span style="color:#C678DD;font-style:italic">if</span><span style="color:#ABB2BF"> co </span><span style="color:#56B6C2">&gt;</span><span style="color:#ABB2BF"> black_count:</span></span>
<span class="line"><span style="color:#ABB2BF">            black_ind </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> i</span></span>
<span class="line"><span style="color:#ABB2BF">            </span><span style="color:#C678DD;font-style:italic">break</span></span>
<span class="line"><span style="color:#ABB2BF">            </span></span>
<span class="line"><span style="color:#ABB2BF">    co </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">0</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#C678DD;font-style:italic">for</span><span style="color:#ABB2BF"> i </span><span style="color:#C678DD;font-style:italic">in</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">range</span><span style="color:#ABB2BF">(</span><span style="color:#56B6C2">len</span><span style="color:#ABB2BF">(hist) </span><span style="color:#56B6C2">-</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">1</span><span style="color:#ABB2BF">, </span><span style="color:#56B6C2">-</span><span style="color:#D19A66">1</span><span style="color:#ABB2BF">, </span><span style="color:#56B6C2">-</span><span style="color:#D19A66">1</span><span style="color:#ABB2BF">):</span></span>
<span class="line"><span style="color:#ABB2BF">        co </span><span style="color:#56B6C2">+=</span><span style="color:#ABB2BF"> hist[i]</span></span>
<span class="line"><span style="color:#ABB2BF">        </span><span style="color:#C678DD;font-style:italic">if</span><span style="color:#ABB2BF"> co </span><span style="color:#56B6C2">&gt;</span><span style="color:#ABB2BF"> (tot_count </span><span style="color:#56B6C2">-</span><span style="color:#ABB2BF"> white_count):</span></span>
<span class="line"><span style="color:#ABB2BF">            white_ind </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> i</span></span>
<span class="line"><span style="color:#ABB2BF">            </span><span style="color:#C678DD;font-style:italic">break</span></span>
<span class="line"><span style="color:#ABB2BF">    </span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#C678DD;font-style:italic">return</span><span style="color:#ABB2BF"> [black_ind, white_ind]</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#C678DD">def</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">contrast_stretch</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66;font-style:italic">img</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66;font-style:italic">black_point</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66;font-style:italic">white_point</span><span style="color:#ABB2BF">):</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#98C379">&#x27;&#x27;&#x27;Contrast stretch image with black and white cap&#x27;&#x27;&#x27;</span></span>
<span class="line"><span style="color:#ABB2BF">    </span></span>
<span class="line"><span style="color:#ABB2BF">    tot_count </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> img.shape[</span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">] </span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF"> img.shape[</span><span style="color:#D19A66">1</span><span style="color:#ABB2BF">]</span></span>
<span class="line"><span style="color:#ABB2BF">    black_count </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> tot_count </span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF"> black_point </span><span style="color:#56B6C2">/</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">100</span></span>
<span class="line"><span style="color:#ABB2BF">    white_count</span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> tot_count </span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF"> white_point </span><span style="color:#56B6C2">/</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">100</span></span>
<span class="line"><span style="color:#ABB2BF">    ch_hists </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> []</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#7F848E;font-style:italic"># calculate histogram for each channel</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#C678DD;font-style:italic">for</span><span style="color:#ABB2BF"> ch </span><span style="color:#C678DD;font-style:italic">in</span><span style="color:#ABB2BF"> cv2.</span><span style="color:#61AFEF">split</span><span style="color:#ABB2BF">(img):</span></span>
<span class="line"><span style="color:#ABB2BF">        ch_hists.</span><span style="color:#61AFEF">append</span><span style="color:#ABB2BF">(cv2.</span><span style="color:#61AFEF">calcHist</span><span style="color:#ABB2BF">([ch], [</span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">], </span><span style="color:#D19A66">None</span><span style="color:#ABB2BF">, [</span><span style="color:#D19A66">256</span><span style="color:#ABB2BF">], (</span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">256</span><span style="color:#ABB2BF">)).</span><span style="color:#61AFEF">flatten</span><span style="color:#ABB2BF">().</span><span style="color:#61AFEF">tolist</span><span style="color:#ABB2BF">())</span></span>
<span class="line"><span style="color:#ABB2BF">    </span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#7F848E;font-style:italic"># get black and white percentage indices</span></span>
<span class="line"><span style="color:#ABB2BF">    black_white_indices </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> []</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#C678DD;font-style:italic">for</span><span style="color:#ABB2BF"> hist </span><span style="color:#C678DD;font-style:italic">in</span><span style="color:#ABB2BF"> ch_hists:</span></span>
<span class="line"><span style="color:#ABB2BF">        black_white_indices.</span><span style="color:#61AFEF">append</span><span style="color:#ABB2BF">(</span><span style="color:#61AFEF">get_black_white_indices</span><span style="color:#ABB2BF">(hist, tot_count, black_count, white_count))</span></span>
<span class="line"><span style="color:#ABB2BF">        </span></span>
<span class="line"><span style="color:#ABB2BF">    stretch_map </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> np.</span><span style="color:#61AFEF">zeros</span><span style="color:#ABB2BF">((</span><span style="color:#D19A66">3</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">256</span><span style="color:#ABB2BF">), </span><span style="color:#E06C75;font-style:italic">dtype</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&#x27;uint8&#x27;</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">    </span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#7F848E;font-style:italic"># stretch histogram </span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#C678DD;font-style:italic">for</span><span style="color:#ABB2BF"> curr_ch </span><span style="color:#C678DD;font-style:italic">in</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">range</span><span style="color:#ABB2BF">(</span><span style="color:#56B6C2">len</span><span style="color:#ABB2BF">(black_white_indices)):</span></span>
<span class="line"><span style="color:#ABB2BF">        black_ind, white_ind </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> black_white_indices[curr_ch]</span></span>
<span class="line"><span style="color:#ABB2BF">        </span><span style="color:#C678DD;font-style:italic">for</span><span style="color:#ABB2BF"> i </span><span style="color:#C678DD;font-style:italic">in</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">range</span><span style="color:#ABB2BF">(stretch_map.shape[</span><span style="color:#D19A66">1</span><span style="color:#ABB2BF">]):</span></span>
<span class="line"><span style="color:#ABB2BF">            </span><span style="color:#C678DD;font-style:italic">if</span><span style="color:#ABB2BF"> i </span><span style="color:#56B6C2">&lt;</span><span style="color:#ABB2BF"> black_ind:</span></span>
<span class="line"><span style="color:#ABB2BF">                stretch_map[curr_ch][i] </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">0</span></span>
<span class="line"><span style="color:#ABB2BF">            </span><span style="color:#C678DD;font-style:italic">else</span><span style="color:#ABB2BF">:</span></span>
<span class="line"><span style="color:#ABB2BF">                </span><span style="color:#C678DD;font-style:italic">if</span><span style="color:#ABB2BF"> i </span><span style="color:#56B6C2">&gt;</span><span style="color:#ABB2BF"> white_ind:</span></span>
<span class="line"><span style="color:#ABB2BF">                    stretch_map[curr_ch][i] </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">255</span></span>
<span class="line"><span style="color:#ABB2BF">                </span><span style="color:#C678DD;font-style:italic">else</span><span style="color:#ABB2BF">:</span></span>
<span class="line"><span style="color:#ABB2BF">                    </span><span style="color:#C678DD;font-style:italic">if</span><span style="color:#ABB2BF"> (white_ind </span><span style="color:#56B6C2">-</span><span style="color:#ABB2BF"> black_ind) </span><span style="color:#56B6C2">&gt;</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">:</span></span>
<span class="line"><span style="color:#ABB2BF">                        stretch_map[curr_ch][i] </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">round</span><span style="color:#ABB2BF">((i </span><span style="color:#56B6C2">-</span><span style="color:#ABB2BF"> black_ind) </span><span style="color:#56B6C2">/</span><span style="color:#ABB2BF"> (white_ind </span><span style="color:#56B6C2">-</span><span style="color:#ABB2BF"> black_ind)) </span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">255</span></span>
<span class="line"><span style="color:#ABB2BF">                    </span><span style="color:#C678DD;font-style:italic">else</span><span style="color:#ABB2BF">:</span></span>
<span class="line"><span style="color:#ABB2BF">                        stretch_map[curr_ch][i] </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">0</span></span>
<span class="line"><span style="color:#ABB2BF">    </span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#7F848E;font-style:italic"># stretch image</span></span>
<span class="line"><span style="color:#ABB2BF">    ch_stretch </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> []</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#C678DD;font-style:italic">for</span><span style="color:#ABB2BF"> i, ch </span><span style="color:#C678DD;font-style:italic">in</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">enumerate</span><span style="color:#ABB2BF">(cv2.</span><span style="color:#61AFEF">split</span><span style="color:#ABB2BF">(img)):</span></span>
<span class="line"><span style="color:#ABB2BF">        ch_stretch.</span><span style="color:#61AFEF">append</span><span style="color:#ABB2BF">(cv2.</span><span style="color:#61AFEF">LUT</span><span style="color:#ABB2BF">(ch, stretch_map[i]))</span></span>
<span class="line"><span style="color:#ABB2BF">        </span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#C678DD;font-style:italic">return</span><span style="color:#ABB2BF"> cv2.</span><span style="color:#61AFEF">merge</span><span style="color:#ABB2BF">(ch_stretch)</span></span></code></pre></div>
<p>For each image channel, calculate cummulative histogram sum, and then cap pixels based on <strong>black_point = 2</strong> and <strong>white_point = 99.5</strong> percentage.</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="python" data-theme="default"><code data-language="python" data-theme="default"><span class="line"><span style="color:#ABB2BF">contrast_stretch_img </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">contrast_stretch</span><span style="color:#ABB2BF">(negative_img, </span><span style="color:#D19A66">2</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">99.5</span><span style="color:#ABB2BF">)</span></span></code></pre></div>
<p>Negative image after contrast stretching is</p>
<p><img src="whiteboard-enhance/contrast-stretch.jpg" alt="Contrast stretch image:=:70:=:Contrast strech image"/></p>
<hr/>
<h3>Gaussin Blur &amp; Gamma Correction</h3>
<p>Contrast stretching image contains noise, so blur the image with Gaussian kernel. As Gaussian distribution kernel can be linearly separable, we apply convolution with the same 1D-kernel along the x-axis and y-axis for performance (negligible for small kernels and low-res images).</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="python" data-theme="default"><code data-language="python" data-theme="default"><span class="line"><span style="color:#C678DD">def</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">fast_gaussian_blur</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66;font-style:italic">img</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66;font-style:italic">ksize</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66;font-style:italic">sigma</span><span style="color:#ABB2BF">):</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#98C379">&#x27;&#x27;&#x27;Gussian blur using linear separable property of Gaussian distribution&#x27;&#x27;&#x27;</span></span>
<span class="line"><span style="color:#ABB2BF">    </span></span>
<span class="line"><span style="color:#ABB2BF">    kernel_1d </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> cv2.</span><span style="color:#61AFEF">getGaussianKernel</span><span style="color:#ABB2BF">(ksize, sigma)</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#C678DD;font-style:italic">return</span><span style="color:#ABB2BF"> cv2.</span><span style="color:#61AFEF">sepFilter2D</span><span style="color:#ABB2BF">(img, </span><span style="color:#56B6C2">-</span><span style="color:#D19A66">1</span><span style="color:#ABB2BF">, kernel_1d, kernel_1d)</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#C678DD">def</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">gamma</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66;font-style:italic">img</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66;font-style:italic">gamma_value</span><span style="color:#ABB2BF">):</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#98C379">&#x27;&#x27;&#x27;Gamma correction of image&#x27;&#x27;&#x27;</span></span>
<span class="line"><span style="color:#ABB2BF">    </span></span>
<span class="line"><span style="color:#ABB2BF">    i_gamma </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">1</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">/</span><span style="color:#ABB2BF"> gamma_value</span></span>
<span class="line"><span style="color:#ABB2BF">    lut </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> np.</span><span style="color:#61AFEF">array</span><span style="color:#ABB2BF">([((i </span><span style="color:#56B6C2">/</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">255</span><span style="color:#ABB2BF">) </span><span style="color:#56B6C2">**</span><span style="color:#ABB2BF"> i_gamma) </span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">255</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD;font-style:italic">for</span><span style="color:#ABB2BF"> i </span><span style="color:#C678DD;font-style:italic">in</span><span style="color:#ABB2BF"> np.</span><span style="color:#61AFEF">arange</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">256</span><span style="color:#ABB2BF">)], </span><span style="color:#E06C75;font-style:italic">dtype</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&#x27;uint8&#x27;</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#C678DD;font-style:italic">return</span><span style="color:#ABB2BF"> cv2.</span><span style="color:#61AFEF">LUT</span><span style="color:#ABB2BF">(img, lut)</span></span></code></pre></div>
<p>Apply Gaussian blur with <strong>kernel_size = 3</strong> and <strong>sigma = 1</strong>.</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="python" data-theme="default"><code data-language="python" data-theme="default"><span class="line"><span style="color:#ABB2BF">blur_img </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">fast_gaussian_blur</span><span style="color:#ABB2BF">(contrast_stretch_img, </span><span style="color:#D19A66">3</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">1</span><span style="color:#ABB2BF">)</span></span></code></pre></div>
<p>Blurred image after noise suppression is</p>
<p><img src="whiteboard-enhance/gaussian-blur.jpg" alt="Gaussian blur image:=:70:=:Blurred image"/></p>
<p>Now apply Gamma correction to enhance the blurred image with <strong>gamma_value = 1.1</strong>.</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="python" data-theme="default"><code data-language="python" data-theme="default"><span class="line"><span style="color:#ABB2BF">gamma_img </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">gamma</span><span style="color:#ABB2BF">(blur_img, </span><span style="color:#D19A66">1.1</span><span style="color:#ABB2BF">)</span></span></code></pre></div>
<p>Blurred image Gamma corrected looks like</p>
<p><img src="whiteboard-enhance/gamma-correction.jpg" alt="Gamma correction:=:70:=:Gamma corrected image"/></p>
<hr/>
<h3>Color Balance</h3>
<p>Color balance of an image is same as contrast-stretching method above but they are different in implementation. Above contrast-stretching is an implementation based on <a target="_blank" rel="noopener noreferrer" href="https://imagemagick.org/api/MagickCore/enhance_8c.html">ImageMagick-ContrastStretchImage()</a>, and <a target="_blank" rel="noopener noreferrer" href="https://gist.github.com/DavidYKay/9dad6c4ab0d8d7dbf3dc">color balance</a> is based on <a target="_blank" rel="noopener noreferrer" href="https://www.ipol.im/pub/art/2011/llmps-scb/article.pdf">Simplest Color Balance</a>.</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="python" data-theme="default"><code data-language="python" data-theme="default"><span class="line"><span style="color:#C678DD">def</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">color_balance</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66;font-style:italic">img</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66;font-style:italic">low_per</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66;font-style:italic">high_per</span><span style="color:#ABB2BF">):</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#98C379">&#x27;&#x27;&#x27;Contrast stretch image by histogram equilization with black and white cap&#x27;&#x27;&#x27;</span></span>
<span class="line"><span style="color:#ABB2BF">    </span></span>
<span class="line"><span style="color:#ABB2BF">    tot_pix </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> img.shape[</span><span style="color:#D19A66">1</span><span style="color:#ABB2BF">] </span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF"> img.shape[</span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">]</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#7F848E;font-style:italic"># no.of pixels to black-out and white-out</span></span>
<span class="line"><span style="color:#ABB2BF">    low_count </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> tot_pix </span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF"> low_per </span><span style="color:#56B6C2">/</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">100</span></span>
<span class="line"><span style="color:#ABB2BF">    high_count </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> tot_pix </span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF"> (</span><span style="color:#D19A66">100</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">-</span><span style="color:#ABB2BF"> high_per) </span><span style="color:#56B6C2">/</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">100</span></span>
<span class="line"><span style="color:#ABB2BF">    </span></span>
<span class="line"><span style="color:#ABB2BF">    cs_img </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> []</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#7F848E;font-style:italic"># for each channel, apply contrast-stretch</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#C678DD;font-style:italic">for</span><span style="color:#ABB2BF"> ch </span><span style="color:#C678DD;font-style:italic">in</span><span style="color:#ABB2BF"> cv2.</span><span style="color:#61AFEF">split</span><span style="color:#ABB2BF">(img):</span></span>
<span class="line"><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># cummulative histogram sum of channel</span></span>
<span class="line"><span style="color:#ABB2BF">        cum_hist_sum </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> np.</span><span style="color:#61AFEF">cumsum</span><span style="color:#ABB2BF">(cv2.</span><span style="color:#61AFEF">calcHist</span><span style="color:#ABB2BF">([ch], [</span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">], </span><span style="color:#D19A66">None</span><span style="color:#ABB2BF">, [</span><span style="color:#D19A66">256</span><span style="color:#ABB2BF">], (</span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">256</span><span style="color:#ABB2BF">)))</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># find indices for blacking and whiting out pixels</span></span>
<span class="line"><span style="color:#ABB2BF">        li, hi </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> np.</span><span style="color:#61AFEF">searchsorted</span><span style="color:#ABB2BF">(cum_hist_sum, (low_count, high_count))</span></span>
<span class="line"><span style="color:#ABB2BF">        </span><span style="color:#C678DD;font-style:italic">if</span><span style="color:#ABB2BF"> (li </span><span style="color:#56B6C2">==</span><span style="color:#ABB2BF"> hi):</span></span>
<span class="line"><span style="color:#ABB2BF">            cs_img.</span><span style="color:#61AFEF">append</span><span style="color:#ABB2BF">(ch)</span></span>
<span class="line"><span style="color:#ABB2BF">            </span><span style="color:#C678DD;font-style:italic">continue</span></span>
<span class="line"><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># lut with min-max normalization for [0-255] bins</span></span>
<span class="line"><span style="color:#ABB2BF">        lut </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> np.</span><span style="color:#61AFEF">array</span><span style="color:#ABB2BF">([</span><span style="color:#D19A66">0</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD;font-style:italic">if</span><span style="color:#ABB2BF"> i </span><span style="color:#56B6C2">&lt;</span><span style="color:#ABB2BF"> li </span></span>
<span class="line"><span style="color:#ABB2BF">                        </span><span style="color:#C678DD;font-style:italic">else</span><span style="color:#ABB2BF"> (</span><span style="color:#D19A66">255</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD;font-style:italic">if</span><span style="color:#ABB2BF"> i </span><span style="color:#56B6C2">&gt;</span><span style="color:#ABB2BF"> hi </span><span style="color:#C678DD;font-style:italic">else</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">round</span><span style="color:#ABB2BF">((i </span><span style="color:#56B6C2">-</span><span style="color:#ABB2BF"> li) </span><span style="color:#56B6C2">/</span><span style="color:#ABB2BF"> (hi </span><span style="color:#56B6C2">-</span><span style="color:#ABB2BF"> li) </span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">255</span><span style="color:#ABB2BF">)) </span></span>
<span class="line"><span style="color:#ABB2BF">                        </span><span style="color:#C678DD;font-style:italic">for</span><span style="color:#ABB2BF"> i </span><span style="color:#C678DD;font-style:italic">in</span><span style="color:#ABB2BF"> np.</span><span style="color:#61AFEF">arange</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">256</span><span style="color:#ABB2BF">)], </span><span style="color:#E06C75;font-style:italic">dtype</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&#x27;uint8&#x27;</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># constrast-stretch channel</span></span>
<span class="line"><span style="color:#ABB2BF">        cs_ch </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> cv2.</span><span style="color:#61AFEF">LUT</span><span style="color:#ABB2BF">(ch, lut)</span></span>
<span class="line"><span style="color:#ABB2BF">        cs_img.</span><span style="color:#61AFEF">append</span><span style="color:#ABB2BF">(cs_ch)</span></span>
<span class="line"><span style="color:#ABB2BF">        </span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#C678DD;font-style:italic">return</span><span style="color:#ABB2BF"> cv2.</span><span style="color:#61AFEF">merge</span><span style="color:#ABB2BF">(cs_img)</span></span></code></pre></div>
<p>Enhance image by passing Gamma corrected image to <strong>color_balance()</strong> with parameters <strong>low_per = 2</strong> and <strong>high_per = 1</strong>.</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="python" data-theme="default"><code data-language="python" data-theme="default"><span class="line"><span style="color:#ABB2BF">color_balanced_img </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">color_balance</span><span style="color:#ABB2BF">(gamma_img, </span><span style="color:#D19A66">2</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">1</span><span style="color:#ABB2BF">)</span></span></code></pre></div>
<p>The final enhanced whiteboard image is
<img src="whiteboard-enhance/whiteboard-image-enhanced.jpg" alt="Whiteboard image enhance:=:70:=:Whiteboard image enhanced"/></p>
<p>You can find out full code at my Github repository file <a target="_blank" rel="noopener noreferrer" href="https://github.com/santhalakshminarayana/whiteboard-image-enhance/blob/main/whiteboard_image_enhance.py">whiteboard_image_enhance.py</a></p>
<hr/>
<h2>Results</h2>
<p><img src="whiteboard-enhance/img_2.jpg" alt="img_2:=:100"/></p>
<p><img src="whiteboard-enhance/img_3.jpg" alt="img_3:=:100"/></p>
<p><img src="whiteboard-enhance/img_4.jpg" alt="img_4:=:100"/></p></div></article></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postMetadata":{"title":"Whiteboard Image Enhancement using OpenCV","description":"Enhance whiteboard images taken from mobile using OpenCV.","imgName":"whiteboard-enhance/whiteboard-image-enhancement.jpg","date":"Oct 19, 2021","tags":["image-processing","opencv"],"keywords":["whiteboard","whiteboard-enhance","image-enhance","image-processing","opencv","python","difference-of-guassian","dog","contrast-stretch","color-balance"],"id":"whiteboard-image-enhancement-opencv-python"},"postContent":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    img: \"img\",\n    h1: \"h1\",\n    a: \"a\",\n    div: \"div\",\n    pre: \"pre\",\n    code: \"code\",\n    span: \"span\",\n    ul: \"ul\",\n    li: \"li\",\n    strong: \"strong\",\n    hr: \"hr\",\n    h3: \"h3\",\n    math: \"math\",\n    semantics: \"semantics\",\n    mrow: \"mrow\",\n    msub: \"msub\",\n    mi: \"mi\",\n    annotation: \"annotation\",\n    mn: \"mn\",\n    em: \"em\",\n    h2: \"h2\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"whiteboard-enhance/whiteboard-image-enhancement.jpg\",\n        alt: \"Whiteboard image enhancement in Python\"\n      })\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"Whiteboard image enhancement using OpenCV\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Whiteboard images generally contain less contrast and low brightness as they would be captured in mobile under normal room light conditions. Enhancing whiteboard images makes text readable and gives an image with high contrast and brightness.\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"We will apply different image-processing techniques to enhance whiteboard images using OpenCV in Python. From this \", _jsx(_components.a, {\n        href: \"https://gist.github.com/lelandbatey/8677901\",\n        children: \"whiteboard-cleaner\"\n      }), \" gist that enhances whiteboard images using \", _jsx(_components.a, {\n        href: \"https://imagemagick.org/\",\n        children: \"ImageMagick\"\n      }), \", we will implement those ImageMagick methods in Python.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"In that script, the following ImageMagick functions were used to enhance whiteboard images\"\n    }), \"\\n\", _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"shell\",\n        \"data-theme\": \"default\",\n        children: _jsx(_components.code, {\n          \"data-language\": \"shell\",\n          \"data-theme\": \"default\",\n          children: _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"-morphology \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98C379\"\n              },\n              children: \"Convolve\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98C379\"\n              },\n              children: \"DoG:\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"15\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98C379\"\n              },\n              children: \",\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"100\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98C379\"\n              },\n              children: \",\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"-negate\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"-normalize\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"-blur\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\"\n              },\n              children: \"0x\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"-channel\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98C379\"\n              },\n              children: \"RBG\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"-level\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"60\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98C379\"\n              },\n              children: \"%,\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"91\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98C379\"\n              },\n              children: \"%,\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"0.1\"\n            })]\n          })\n        })\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Above command applies image enhancing functions in order\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"-morphology Convolve DoG:15, 100, 0\"\n        }), \": Difference of Gaussian (DoG) with kernel_radius=15, sigma1=100, and sigma2=0\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"-negate\"\n        }), \": Negative of image\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"-normalize\"\n        }), \": Contrast stretch image with black=0.15% and white=0.05%\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"-blur 0x1\"\n        }), \": Gaussian blur with sigma=1\"]\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"**-level 60%,91%,0.1: Stretch image with black=60% and white=91%, and Gamma correction by gamma=0.1\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"As I found some difficulty for exactly converting the ImageMagick C code to Python, I have changed the order and parameters that would give close results.\"\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.p, {\n      children: \"We will apply series of image-processing methods and effects to enhance whiteboard images in the following order\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"Difference of Gaussian (DoG)\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Negative effect\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Contrast Stretching\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Gaussian blur\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Gamma correction\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Color balance\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"You can find the full code in my Github repository \", _jsx(_components.a, {\n        href: \"https://github.com/santhalakshminarayana/whiteboard-image-enhance\",\n        children: \"whiteboard-image-enhance\"\n      })]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Import packages and read image\"\n    }), \"\\n\", _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"python\",\n        \"data-theme\": \"default\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"python\",\n          \"data-theme\": \"default\",\n          children: [_jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"import\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" cv2\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"import\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" numpy \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"as\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" np\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"img \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" cv2.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"imread\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98C379\"\n              },\n              children: \"'input.jpg'\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \")\"\n            })]\n          })]\n        })\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"whiteboard-enhance/whiteboard-image.jpg\",\n        alt: \"Whiteboard image input:=:70:=:Input Whiteboard image\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Difference of Gaussian (DoG)\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.a, {\n        href: \"https://en.wikipedia.org/wiki/Difference_of_Gaussians\",\n        children: \"Difference of Gaussians (DoG)\"\n      }), \" is the difference of two Gaussian kernel convoluted images. DoG image is obtained by subtracting two Gaussian blurred images with different kernel radius and variance.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Normally \", _jsx(_components.span, {\n        className: \"math math-inline\",\n        children: _jsxs(_components.span, {\n          className: \"katex\",\n          children: [_jsx(_components.span, {\n            className: \"katex-mathml\",\n            children: _jsx(_components.math, {\n              xmlns: \"http://www.w3.org/1998/Math/MathML\",\n              children: _jsxs(_components.semantics, {\n                children: [_jsx(_components.mrow, {\n                  children: _jsxs(_components.msub, {\n                    children: [_jsx(_components.mi, {\n                      children: \"I\"\n                    }), _jsxs(_components.mrow, {\n                      children: [_jsx(_components.mi, {\n                        children: \"d\"\n                      }), _jsx(_components.mi, {\n                        children: \"o\"\n                      }), _jsx(_components.mi, {\n                        children: \"g\"\n                      })]\n                    })]\n                  })\n                }), _jsx(_components.annotation, {\n                  encoding: \"application/x-tex\",\n                  children: \"I_{dog}\"\n                })]\n              })\n            })\n          }), _jsx(_components.span, {\n            className: \"katex-html\",\n            \"aria-hidden\": \"true\",\n            children: _jsxs(_components.span, {\n              className: \"base\",\n              children: [_jsx(_components.span, {\n                className: \"strut\",\n                style: {\n                  height: \"0.9694em\",\n                  verticalAlign: \"-0.2861em\"\n                }\n              }), _jsxs(_components.span, {\n                className: \"mord\",\n                children: [_jsx(_components.span, {\n                  className: \"mord mathnormal\",\n                  style: {\n                    marginRight: \"0.07847em\"\n                  },\n                  children: \"I\"\n                }), _jsx(_components.span, {\n                  className: \"msupsub\",\n                  children: _jsxs(_components.span, {\n                    className: \"vlist-t vlist-t2\",\n                    children: [_jsxs(_components.span, {\n                      className: \"vlist-r\",\n                      children: [_jsx(_components.span, {\n                        className: \"vlist\",\n                        style: {\n                          height: \"0.3361em\"\n                        },\n                        children: _jsxs(_components.span, {\n                          style: {\n                            top: \"-2.55em\",\n                            marginLeft: \"-0.0785em\",\n                            marginRight: \"0.05em\"\n                          },\n                          children: [_jsx(_components.span, {\n                            className: \"pstrut\",\n                            style: {\n                              height: \"2.7em\"\n                            }\n                          }), _jsx(_components.span, {\n                            className: \"sizing reset-size6 size3 mtight\",\n                            children: _jsxs(_components.span, {\n                              className: \"mord mtight\",\n                              children: [_jsx(_components.span, {\n                                className: \"mord mathnormal mtight\",\n                                children: \"d\"\n                              }), _jsx(_components.span, {\n                                className: \"mord mathnormal mtight\",\n                                children: \"o\"\n                              }), _jsx(_components.span, {\n                                className: \"mord mathnormal mtight\",\n                                style: {\n                                  marginRight: \"0.03588em\"\n                                },\n                                children: \"g\"\n                              })]\n                            })\n                          })]\n                        })\n                      }), _jsx(_components.span, {\n                        className: \"vlist-s\",\n                        children: \"‚Äã\"\n                      })]\n                    }), _jsx(_components.span, {\n                      className: \"vlist-r\",\n                      children: _jsx(_components.span, {\n                        className: \"vlist\",\n                        style: {\n                          height: \"0.2861em\"\n                        },\n                        children: _jsx(_components.span, {})\n                      })\n                    })]\n                  })\n                })]\n              })]\n            })\n          })]\n        })\n      }), \" (DoG of image) is calculated by subtracting \", _jsx(_components.span, {\n        className: \"math math-inline\",\n        children: _jsxs(_components.span, {\n          className: \"katex\",\n          children: [_jsx(_components.span, {\n            className: \"katex-mathml\",\n            children: _jsx(_components.math, {\n              xmlns: \"http://www.w3.org/1998/Math/MathML\",\n              children: _jsxs(_components.semantics, {\n                children: [_jsx(_components.mrow, {\n                  children: _jsxs(_components.msub, {\n                    children: [_jsx(_components.mi, {\n                      children: \"I\"\n                    }), _jsxs(_components.mrow, {\n                      children: [_jsx(_components.mi, {\n                        children: \"g\"\n                      }), _jsx(_components.mn, {\n                        children: \"1\"\n                      })]\n                    })]\n                  })\n                }), _jsx(_components.annotation, {\n                  encoding: \"application/x-tex\",\n                  children: \"I_{g1}\"\n                })]\n              })\n            })\n          }), _jsx(_components.span, {\n            className: \"katex-html\",\n            \"aria-hidden\": \"true\",\n            children: _jsxs(_components.span, {\n              className: \"base\",\n              children: [_jsx(_components.span, {\n                className: \"strut\",\n                style: {\n                  height: \"0.9694em\",\n                  verticalAlign: \"-0.2861em\"\n                }\n              }), _jsxs(_components.span, {\n                className: \"mord\",\n                children: [_jsx(_components.span, {\n                  className: \"mord mathnormal\",\n                  style: {\n                    marginRight: \"0.07847em\"\n                  },\n                  children: \"I\"\n                }), _jsx(_components.span, {\n                  className: \"msupsub\",\n                  children: _jsxs(_components.span, {\n                    className: \"vlist-t vlist-t2\",\n                    children: [_jsxs(_components.span, {\n                      className: \"vlist-r\",\n                      children: [_jsx(_components.span, {\n                        className: \"vlist\",\n                        style: {\n                          height: \"0.3011em\"\n                        },\n                        children: _jsxs(_components.span, {\n                          style: {\n                            top: \"-2.55em\",\n                            marginLeft: \"-0.0785em\",\n                            marginRight: \"0.05em\"\n                          },\n                          children: [_jsx(_components.span, {\n                            className: \"pstrut\",\n                            style: {\n                              height: \"2.7em\"\n                            }\n                          }), _jsx(_components.span, {\n                            className: \"sizing reset-size6 size3 mtight\",\n                            children: _jsxs(_components.span, {\n                              className: \"mord mtight\",\n                              children: [_jsx(_components.span, {\n                                className: \"mord mathnormal mtight\",\n                                style: {\n                                  marginRight: \"0.03588em\"\n                                },\n                                children: \"g\"\n                              }), _jsx(_components.span, {\n                                className: \"mord mtight\",\n                                children: \"1\"\n                              })]\n                            })\n                          })]\n                        })\n                      }), _jsx(_components.span, {\n                        className: \"vlist-s\",\n                        children: \"‚Äã\"\n                      })]\n                    }), _jsx(_components.span, {\n                      className: \"vlist-r\",\n                      children: _jsx(_components.span, {\n                        className: \"vlist\",\n                        style: {\n                          height: \"0.2861em\"\n                        },\n                        children: _jsx(_components.span, {})\n                      })\n                    })]\n                  })\n                })]\n              })]\n            })\n          })]\n        })\n      }), \" and \", _jsx(_components.span, {\n        className: \"math math-inline\",\n        children: _jsxs(_components.span, {\n          className: \"katex\",\n          children: [_jsx(_components.span, {\n            className: \"katex-mathml\",\n            children: _jsx(_components.math, {\n              xmlns: \"http://www.w3.org/1998/Math/MathML\",\n              children: _jsxs(_components.semantics, {\n                children: [_jsx(_components.mrow, {\n                  children: _jsxs(_components.msub, {\n                    children: [_jsx(_components.mi, {\n                      children: \"I\"\n                    }), _jsxs(_components.mrow, {\n                      children: [_jsx(_components.mi, {\n                        children: \"g\"\n                      }), _jsx(_components.mn, {\n                        children: \"2\"\n                      })]\n                    })]\n                  })\n                }), _jsx(_components.annotation, {\n                  encoding: \"application/x-tex\",\n                  children: \"I_{g2}\"\n                })]\n              })\n            })\n          }), _jsx(_components.span, {\n            className: \"katex-html\",\n            \"aria-hidden\": \"true\",\n            children: _jsxs(_components.span, {\n              className: \"base\",\n              children: [_jsx(_components.span, {\n                className: \"strut\",\n                style: {\n                  height: \"0.9694em\",\n                  verticalAlign: \"-0.2861em\"\n                }\n              }), _jsxs(_components.span, {\n                className: \"mord\",\n                children: [_jsx(_components.span, {\n                  className: \"mord mathnormal\",\n                  style: {\n                    marginRight: \"0.07847em\"\n                  },\n                  children: \"I\"\n                }), _jsx(_components.span, {\n                  className: \"msupsub\",\n                  children: _jsxs(_components.span, {\n                    className: \"vlist-t vlist-t2\",\n                    children: [_jsxs(_components.span, {\n                      className: \"vlist-r\",\n                      children: [_jsx(_components.span, {\n                        className: \"vlist\",\n                        style: {\n                          height: \"0.3011em\"\n                        },\n                        children: _jsxs(_components.span, {\n                          style: {\n                            top: \"-2.55em\",\n                            marginLeft: \"-0.0785em\",\n                            marginRight: \"0.05em\"\n                          },\n                          children: [_jsx(_components.span, {\n                            className: \"pstrut\",\n                            style: {\n                              height: \"2.7em\"\n                            }\n                          }), _jsx(_components.span, {\n                            className: \"sizing reset-size6 size3 mtight\",\n                            children: _jsxs(_components.span, {\n                              className: \"mord mtight\",\n                              children: [_jsx(_components.span, {\n                                className: \"mord mathnormal mtight\",\n                                style: {\n                                  marginRight: \"0.03588em\"\n                                },\n                                children: \"g\"\n                              }), _jsx(_components.span, {\n                                className: \"mord mtight\",\n                                children: \"2\"\n                              })]\n                            })\n                          })]\n                        })\n                      }), _jsx(_components.span, {\n                        className: \"vlist-s\",\n                        children: \"‚Äã\"\n                      })]\n                    }), _jsx(_components.span, {\n                      className: \"vlist-r\",\n                      children: _jsx(_components.span, {\n                        className: \"vlist\",\n                        style: {\n                          height: \"0.2861em\"\n                        },\n                        children: _jsx(_components.span, {})\n                      })\n                    })]\n                  })\n                })]\n              })]\n            })\n          })]\n        })\n      }), \" which are convoluted images with two different Gaussian kernels. But ImageMagick applies convolution after subtracting and scaling two gaussian kernels.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"So, we will first subtract two different Gaussian kernels, scale and normalize the dog-kernel to the zero-summing kernel (sum of all elements ~ 0.0)  and then apply convolution.\"\n    }), \"\\n\", _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"python\",\n        \"data-theme\": \"default\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"python\",\n          \"data-theme\": \"default\",\n          children: [_jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"def\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"normalize_kernel\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\",\n                fontStyle: \"italic\"\n              },\n              children: \"kernel\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\",\n                fontStyle: \"italic\"\n              },\n              children: \"k_width\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\",\n                fontStyle: \"italic\"\n              },\n              children: \"k_height\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\",\n                fontStyle: \"italic\"\n              },\n              children: \"scaling_factor\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" = \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1.0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98C379\"\n              },\n              children: \"'''Zero-summing normalize kernel'''\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"K_EPS\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1.0e-12\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#7F848E\",\n                fontStyle: \"italic\"\n              },\n              children: \"# positive and negative sum of kernel values\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    pos_range, neg_range \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"0\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"for\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" i \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"in\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"range\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(k_width \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" k_height):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"abs\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(kernel[i]) \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"K_EPS\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \":\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"            kernel[i] \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"0.0\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" kernel[i] \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \":\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"            neg_range \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"+=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" kernel[i]\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"else\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \":\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"            pos_range \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"+=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" kernel[i]\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#7F848E\",\n                fontStyle: \"italic\"\n              },\n              children: \"# scaling factor for positive and negative range\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    pos_scale, neg_scale \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" pos_range, \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"neg_range\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"abs\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(pos_range) \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"\u003e=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"K_EPS\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \":\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        pos_scale \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" pos_range\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"else\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \":\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        pos_sacle \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1.0\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"abs\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(neg_range) \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"\u003e=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"K_EPS\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \":\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        neg_scale \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1.0\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"else\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \":\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        neg_scale \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"neg_range\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    pos_scale \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" scaling_factor \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"/\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" pos_scale\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    neg_scale \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" scaling_factor \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"/\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" neg_scale\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#7F848E\",\n                fontStyle: \"italic\"\n              },\n              children: \"# scale kernel values for zero-summing kernel\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"for\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" i \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"in\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"range\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(k_width \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" k_height):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" (\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"not\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" np.nan \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"==\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" kernel[i]):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"            kernel[i] \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"*=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" pos_scale \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" kernel[i] \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"\u003e=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"else\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" neg_scale\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"            \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"return\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" kernel\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"def\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"dog\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\",\n                fontStyle: \"italic\"\n              },\n              children: \"img\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\",\n                fontStyle: \"italic\"\n              },\n              children: \"k_size\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\",\n                fontStyle: \"italic\"\n              },\n              children: \"sigma_1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\",\n                fontStyle: \"italic\"\n              },\n              children: \"sigma_2\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98C379\"\n              },\n              children: \"'''Difference of Gaussian by subtracting kernel 1 and kernel 2'''\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    k_width \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" k_height \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" k_size\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    x \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" y \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" (k_width \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \") \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"//\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"2\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    kernel \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" np.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"zeros\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(k_width \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" k_height)\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#7F848E\",\n                fontStyle: \"italic\"\n              },\n              children: \"# first gaussian kernal\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" sigma_1 \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \":\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        co_1 \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"/\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" (\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"2\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" sigma_1 \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" sigma_1)\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        co_2 \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"/\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" (\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"2\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" np.pi \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" sigma_1 \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" sigma_1)\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        i \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"0\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"for\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" v \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"in\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"range\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"y, y \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"+\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"            \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"for\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" u \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"in\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"range\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"x, x \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"+\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"                kernel[i] \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" np.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"exp\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(u\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"u \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"+\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" v\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"v) \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" co_1) \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" co_2\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"                i \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"+=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#7F848E\",\n                fontStyle: \"italic\"\n              },\n              children: \"# unity kernel\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"else\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \":\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        kernel[x \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"+\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" y \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" k_width] \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1.0\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#7F848E\",\n                fontStyle: \"italic\"\n              },\n              children: \"# subtract second gaussian from kernel\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" sigma_2 \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \":\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        co_1 \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"/\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" (\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"2\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" sigma_2 \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" sigma_2)\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        co_2 \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"/\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" (\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"2\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" np.pi \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" sigma_2 \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" sigma_2)\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        i \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"0\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"for\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" v \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"in\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"range\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"y, y \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"+\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"            \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"for\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" u \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"in\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"range\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"x, x \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"+\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"                kernel[i] \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"-=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" np.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"exp\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(u\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"u \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"+\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" v\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"v) \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" co_1) \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" co_2\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"                i \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"+=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#7F848E\",\n                fontStyle: \"italic\"\n              },\n              children: \"# unity kernel\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"else\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \":\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        kernel[x \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"+\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" y \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" k_width] \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"-=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1.0\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#7F848E\",\n                fontStyle: \"italic\"\n              },\n              children: \"# zero-normalize scling kernel with scaling factor 1.0\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    norm_kernel \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"normalize_kernel\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(kernel, k_width, k_height, \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\",\n                fontStyle: \"italic\"\n              },\n              children: \"scaling_factor\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1.0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \")\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#7F848E\",\n                fontStyle: \"italic\"\n              },\n              children: \"# apply filter with norm_kernel\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"return\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" cv2.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"filter2D\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(img, \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", norm_kernel.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"reshape\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(k_width, k_height))\"\n            })]\n          })]\n        })\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Get Difference of Gaussian (DoG) for image by calling \", _jsx(_components.em, {\n        children: \"dog()\"\n      }), \" function with \", _jsx(_components.strong, {\n        children: \"radius = 15, sigma_1 = 100, sigma_2 = 0\"\n      }), \". Here \", _jsx(_components.strong, {\n        children: \"radius = 15\"\n      }), \" for both kernels, for first kernel, \", _jsx(_components.strong, {\n        children: \"sigma = 100\"\n      }), \", and for second kernel, \", _jsx(_components.strong, {\n        children: \"sigma = 0\"\n      }), \". Kernel with \", _jsx(_components.strong, {\n        children: \"sigma = 0\"\n      }), \" creates unity kernel means convolution with this kernel gives same image.\"]\n    }), \"\\n\", _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"python\",\n        \"data-theme\": \"default\",\n        children: _jsx(_components.code, {\n          \"data-language\": \"python\",\n          \"data-theme\": \"default\",\n          children: _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"dog_img \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"dog\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(img, \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"15\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"100\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \")\"\n            })]\n          })\n        })\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"After applying DoG, the resultant image looks like\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"whiteboard-enhance/difference-of-gaussian.jpg\",\n        alt: \"Difference of Gaussian (DoG) Image:=:70:=:Difference of Gaussian (DoG) image\"\n      })\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h3, {\n      children: \"Negative Image\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"For \", _jsx(_components.span, {\n        className: \"math math-inline\",\n        children: _jsxs(_components.span, {\n          className: \"katex\",\n          children: [_jsx(_components.span, {\n            className: \"katex-mathml\",\n            children: _jsx(_components.math, {\n              xmlns: \"http://www.w3.org/1998/Math/MathML\",\n              children: _jsxs(_components.semantics, {\n                children: [_jsx(_components.mrow, {\n                  children: _jsxs(_components.msub, {\n                    children: [_jsx(_components.mi, {\n                      children: \"I\"\n                    }), _jsxs(_components.mrow, {\n                      children: [_jsx(_components.mi, {\n                        children: \"d\"\n                      }), _jsx(_components.mi, {\n                        children: \"o\"\n                      }), _jsx(_components.mi, {\n                        children: \"g\"\n                      })]\n                    })]\n                  })\n                }), _jsx(_components.annotation, {\n                  encoding: \"application/x-tex\",\n                  children: \"I_{dog}\"\n                })]\n              })\n            })\n          }), _jsx(_components.span, {\n            className: \"katex-html\",\n            \"aria-hidden\": \"true\",\n            children: _jsxs(_components.span, {\n              className: \"base\",\n              children: [_jsx(_components.span, {\n                className: \"strut\",\n                style: {\n                  height: \"0.9694em\",\n                  verticalAlign: \"-0.2861em\"\n                }\n              }), _jsxs(_components.span, {\n                className: \"mord\",\n                children: [_jsx(_components.span, {\n                  className: \"mord mathnormal\",\n                  style: {\n                    marginRight: \"0.07847em\"\n                  },\n                  children: \"I\"\n                }), _jsx(_components.span, {\n                  className: \"msupsub\",\n                  children: _jsxs(_components.span, {\n                    className: \"vlist-t vlist-t2\",\n                    children: [_jsxs(_components.span, {\n                      className: \"vlist-r\",\n                      children: [_jsx(_components.span, {\n                        className: \"vlist\",\n                        style: {\n                          height: \"0.3361em\"\n                        },\n                        children: _jsxs(_components.span, {\n                          style: {\n                            top: \"-2.55em\",\n                            marginLeft: \"-0.0785em\",\n                            marginRight: \"0.05em\"\n                          },\n                          children: [_jsx(_components.span, {\n                            className: \"pstrut\",\n                            style: {\n                              height: \"2.7em\"\n                            }\n                          }), _jsx(_components.span, {\n                            className: \"sizing reset-size6 size3 mtight\",\n                            children: _jsxs(_components.span, {\n                              className: \"mord mtight\",\n                              children: [_jsx(_components.span, {\n                                className: \"mord mathnormal mtight\",\n                                children: \"d\"\n                              }), _jsx(_components.span, {\n                                className: \"mord mathnormal mtight\",\n                                children: \"o\"\n                              }), _jsx(_components.span, {\n                                className: \"mord mathnormal mtight\",\n                                style: {\n                                  marginRight: \"0.03588em\"\n                                },\n                                children: \"g\"\n                              })]\n                            })\n                          })]\n                        })\n                      }), _jsx(_components.span, {\n                        className: \"vlist-s\",\n                        children: \"‚Äã\"\n                      })]\n                    }), _jsx(_components.span, {\n                      className: \"vlist-r\",\n                      children: _jsx(_components.span, {\n                        className: \"vlist\",\n                        style: {\n                          height: \"0.2861em\"\n                        },\n                        children: _jsx(_components.span, {})\n                      })\n                    })]\n                  })\n                })]\n              })]\n            })\n          })]\n        })\n      }), \", get a negative image which is just an inversion of colors (255 - image).\"]\n    }), \"\\n\", _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"python\",\n        \"data-theme\": \"default\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"python\",\n          \"data-theme\": \"default\",\n          children: [_jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"def\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"negate\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\",\n                fontStyle: \"italic\"\n              },\n              children: \"img\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98C379\"\n              },\n              children: \"'''Negative of image'''\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"return\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" cv2.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"bitwise_not\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(img)\"\n            })]\n          })]\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"python\",\n        \"data-theme\": \"default\",\n        children: _jsx(_components.code, {\n          \"data-language\": \"python\",\n          \"data-theme\": \"default\",\n          children: _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"negative_img \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"negate\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(dog_img)\"\n            })]\n          })\n        })\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The result of the inversion image is\\n\", _jsx(_components.img, {\n        src: \"whiteboard-enhance/negative.jpg\",\n        alt: \"Negative image:=:70:=:Negative image\"\n      })]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Image content is not much visible as we inverted an image whose most of the pixels are black. So, to improve the contrast, we apply contrast-stretch enhancement for the negative image.\"\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h3, {\n      children: \"Contrast Stretching\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Contrast stretching of an image is the same as histogram equalization but we cap some percentage of pixel values to black (0) and white (255).\"\n    }), \"\\n\", _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"python\",\n        \"data-theme\": \"default\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"python\",\n          \"data-theme\": \"default\",\n          children: [_jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"def\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"get_black_white_indices\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\",\n                fontStyle: \"italic\"\n              },\n              children: \"hist\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\",\n                fontStyle: \"italic\"\n              },\n              children: \"tot_count\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\",\n                fontStyle: \"italic\"\n              },\n              children: \"black_count\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\",\n                fontStyle: \"italic\"\n              },\n              children: \"white_count\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98C379\"\n              },\n              children: \"'''Blacking and Whiting out indices same as color balance'''\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    black_ind \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"0\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    white_ind \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"255\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    co \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"0\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"for\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" i \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"in\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"range\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"len\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(hist)):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        co \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"+=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" hist[i]\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" co \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" black_count:\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"            black_ind \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" i\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"            \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"break\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"            \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    co \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"0\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"for\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" i \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"in\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"range\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"len\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(hist) \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        co \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"+=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" hist[i]\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" co \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" (tot_count \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" white_count):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"            white_ind \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" i\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"            \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"break\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"return\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" [black_ind, white_ind]\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"def\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"contrast_stretch\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\",\n                fontStyle: \"italic\"\n              },\n              children: \"img\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\",\n                fontStyle: \"italic\"\n              },\n              children: \"black_point\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\",\n                fontStyle: \"italic\"\n              },\n              children: \"white_point\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98C379\"\n              },\n              children: \"'''Contrast stretch image with black and white cap'''\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    tot_count \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" img.shape[\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"] \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" img.shape[\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"]\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    black_count \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" tot_count \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" black_point \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"/\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"100\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    white_count\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" tot_count \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" white_point \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"/\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"100\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    ch_hists \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" []\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#7F848E\",\n                fontStyle: \"italic\"\n              },\n              children: \"# calculate histogram for each channel\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"for\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" ch \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"in\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" cv2.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"split\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(img):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        ch_hists.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"append\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(cv2.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"calcHist\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"([ch], [\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"], \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"None\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", [\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"256\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"], (\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"256\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \")).\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"flatten\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"().\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"tolist\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"())\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#7F848E\",\n                fontStyle: \"italic\"\n              },\n              children: \"# get black and white percentage indices\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    black_white_indices \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" []\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"for\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" hist \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"in\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" ch_hists:\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        black_white_indices.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"append\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"get_black_white_indices\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(hist, tot_count, black_count, white_count))\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    stretch_map \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" np.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"zeros\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"((\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"3\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"256\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"), \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\",\n                fontStyle: \"italic\"\n              },\n              children: \"dtype\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98C379\"\n              },\n              children: \"'uint8'\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \")\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#7F848E\",\n                fontStyle: \"italic\"\n              },\n              children: \"# stretch histogram \"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"for\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" curr_ch \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"in\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"range\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"len\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(black_white_indices)):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        black_ind, white_ind \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" black_white_indices[curr_ch]\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"for\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" i \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"in\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"range\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(stretch_map.shape[\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"]):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"            \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" i \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" black_ind:\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"                stretch_map[curr_ch][i] \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"0\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"            \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"else\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \":\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"                \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" i \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" white_ind:\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"                    stretch_map[curr_ch][i] \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"255\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"                \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"else\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \":\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"                    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" (white_ind \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" black_ind) \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \":\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"                        stretch_map[curr_ch][i] \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"round\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"((i \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" black_ind) \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"/\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" (white_ind \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" black_ind)) \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"255\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"                    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"else\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \":\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"                        stretch_map[curr_ch][i] \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"0\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#7F848E\",\n                fontStyle: \"italic\"\n              },\n              children: \"# stretch image\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    ch_stretch \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" []\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"for\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" i, ch \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"in\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"enumerate\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(cv2.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"split\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(img)):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        ch_stretch.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"append\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(cv2.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"LUT\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(ch, stretch_map[i]))\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"return\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" cv2.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"merge\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(ch_stretch)\"\n            })]\n          })]\n        })\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"For each image channel, calculate cummulative histogram sum, and then cap pixels based on \", _jsx(_components.strong, {\n        children: \"black_point = 2\"\n      }), \" and \", _jsx(_components.strong, {\n        children: \"white_point = 99.5\"\n      }), \" percentage.\"]\n    }), \"\\n\", _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"python\",\n        \"data-theme\": \"default\",\n        children: _jsx(_components.code, {\n          \"data-language\": \"python\",\n          \"data-theme\": \"default\",\n          children: _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"contrast_stretch_img \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"contrast_stretch\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(negative_img, \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"2\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"99.5\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \")\"\n            })]\n          })\n        })\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Negative image after contrast stretching is\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"whiteboard-enhance/contrast-stretch.jpg\",\n        alt: \"Contrast stretch image:=:70:=:Contrast strech image\"\n      })\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h3, {\n      children: \"Gaussin Blur \u0026 Gamma Correction\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Contrast stretching image contains noise, so blur the image with Gaussian kernel. As Gaussian distribution kernel can be linearly separable, we apply convolution with the same 1D-kernel along the x-axis and y-axis for performance (negligible for small kernels and low-res images).\"\n    }), \"\\n\", _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"python\",\n        \"data-theme\": \"default\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"python\",\n          \"data-theme\": \"default\",\n          children: [_jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"def\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"fast_gaussian_blur\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\",\n                fontStyle: \"italic\"\n              },\n              children: \"img\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\",\n                fontStyle: \"italic\"\n              },\n              children: \"ksize\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\",\n                fontStyle: \"italic\"\n              },\n              children: \"sigma\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98C379\"\n              },\n              children: \"'''Gussian blur using linear separable property of Gaussian distribution'''\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    kernel_1d \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" cv2.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"getGaussianKernel\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(ksize, sigma)\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"return\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" cv2.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"sepFilter2D\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(img, \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", kernel_1d, kernel_1d)\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"def\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"gamma\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\",\n                fontStyle: \"italic\"\n              },\n              children: \"img\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\",\n                fontStyle: \"italic\"\n              },\n              children: \"gamma_value\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98C379\"\n              },\n              children: \"'''Gamma correction of image'''\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    i_gamma \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"/\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" gamma_value\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    lut \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" np.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"array\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"([((i \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"/\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"255\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \") \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"**\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" i_gamma) \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"255\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"for\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" i \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"in\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" np.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"arange\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"256\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \")], \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\",\n                fontStyle: \"italic\"\n              },\n              children: \"dtype\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98C379\"\n              },\n              children: \"'uint8'\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \")\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"return\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" cv2.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"LUT\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(img, lut)\"\n            })]\n          })]\n        })\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Apply Gaussian blur with \", _jsx(_components.strong, {\n        children: \"kernel_size = 3\"\n      }), \" and \", _jsx(_components.strong, {\n        children: \"sigma = 1\"\n      }), \".\"]\n    }), \"\\n\", _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"python\",\n        \"data-theme\": \"default\",\n        children: _jsx(_components.code, {\n          \"data-language\": \"python\",\n          \"data-theme\": \"default\",\n          children: _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"blur_img \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"fast_gaussian_blur\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(contrast_stretch_img, \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"3\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \")\"\n            })]\n          })\n        })\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Blurred image after noise suppression is\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"whiteboard-enhance/gaussian-blur.jpg\",\n        alt: \"Gaussian blur image:=:70:=:Blurred image\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Now apply Gamma correction to enhance the blurred image with \", _jsx(_components.strong, {\n        children: \"gamma_value = 1.1\"\n      }), \".\"]\n    }), \"\\n\", _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"python\",\n        \"data-theme\": \"default\",\n        children: _jsx(_components.code, {\n          \"data-language\": \"python\",\n          \"data-theme\": \"default\",\n          children: _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"gamma_img \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"gamma\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(blur_img, \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1.1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \")\"\n            })]\n          })\n        })\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Blurred image Gamma corrected looks like\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"whiteboard-enhance/gamma-correction.jpg\",\n        alt: \"Gamma correction:=:70:=:Gamma corrected image\"\n      })\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h3, {\n      children: \"Color Balance\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Color balance of an image is same as contrast-stretching method above but they are different in implementation. Above contrast-stretching is an implementation based on \", _jsx(_components.a, {\n        href: \"https://imagemagick.org/api/MagickCore/enhance_8c.html\",\n        children: \"ImageMagick-ContrastStretchImage()\"\n      }), \", and \", _jsx(_components.a, {\n        href: \"https://gist.github.com/DavidYKay/9dad6c4ab0d8d7dbf3dc\",\n        children: \"color balance\"\n      }), \" is based on \", _jsx(_components.a, {\n        href: \"https://www.ipol.im/pub/art/2011/llmps-scb/article.pdf\",\n        children: \"Simplest Color Balance\"\n      }), \".\"]\n    }), \"\\n\", _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"python\",\n        \"data-theme\": \"default\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"python\",\n          \"data-theme\": \"default\",\n          children: [_jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"def\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"color_balance\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\",\n                fontStyle: \"italic\"\n              },\n              children: \"img\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\",\n                fontStyle: \"italic\"\n              },\n              children: \"low_per\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\",\n                fontStyle: \"italic\"\n              },\n              children: \"high_per\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98C379\"\n              },\n              children: \"'''Contrast stretch image by histogram equilization with black and white cap'''\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    tot_pix \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" img.shape[\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"] \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" img.shape[\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"]\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#7F848E\",\n                fontStyle: \"italic\"\n              },\n              children: \"# no.of pixels to black-out and white-out\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    low_count \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" tot_pix \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" low_per \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"/\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"100\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    high_count \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" tot_pix \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" (\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"100\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" high_per) \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"/\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"100\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    cs_img \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" []\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#7F848E\",\n                fontStyle: \"italic\"\n              },\n              children: \"# for each channel, apply contrast-stretch\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"for\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" ch \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"in\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" cv2.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"split\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(img):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#7F848E\",\n                fontStyle: \"italic\"\n              },\n              children: \"# cummulative histogram sum of channel\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        cum_hist_sum \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" np.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"cumsum\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(cv2.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"calcHist\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"([ch], [\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"], \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"None\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", [\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"256\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"], (\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"256\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \")))\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#7F848E\",\n                fontStyle: \"italic\"\n              },\n              children: \"# find indices for blacking and whiting out pixels\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        li, hi \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" np.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"searchsorted\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(cum_hist_sum, (low_count, high_count))\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" (li \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"==\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" hi):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"            cs_img.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"append\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(ch)\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"            \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"continue\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#7F848E\",\n                fontStyle: \"italic\"\n              },\n              children: \"# lut with min-max normalization for [0-255] bins\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        lut \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" np.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"array\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"([\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" i \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" li \"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"                        \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"else\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" (\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"255\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" i \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" hi \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"else\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"round\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"((i \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" li) \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"/\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" (hi \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" li) \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"255\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \")) \"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"                        \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"for\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" i \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"in\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" np.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"arange\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"256\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \")], \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\",\n                fontStyle: \"italic\"\n              },\n              children: \"dtype\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98C379\"\n              },\n              children: \"'uint8'\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \")\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#7F848E\",\n                fontStyle: \"italic\"\n              },\n              children: \"# constrast-stretch channel\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        cs_ch \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" cv2.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"LUT\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(ch, lut)\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        cs_img.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"append\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(cs_ch)\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"return\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" cv2.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"merge\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(cs_img)\"\n            })]\n          })]\n        })\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Enhance image by passing Gamma corrected image to \", _jsx(_components.strong, {\n        children: \"color_balance()\"\n      }), \" with parameters \", _jsx(_components.strong, {\n        children: \"low_per = 2\"\n      }), \" and \", _jsx(_components.strong, {\n        children: \"high_per = 1\"\n      }), \".\"]\n    }), \"\\n\", _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"python\",\n        \"data-theme\": \"default\",\n        children: _jsx(_components.code, {\n          \"data-language\": \"python\",\n          \"data-theme\": \"default\",\n          children: _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"color_balanced_img \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"color_balance\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(gamma_img, \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"2\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \")\"\n            })]\n          })\n        })\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The final enhanced whiteboard image is\\n\", _jsx(_components.img, {\n        src: \"whiteboard-enhance/whiteboard-image-enhanced.jpg\",\n        alt: \"Whiteboard image enhance:=:70:=:Whiteboard image enhanced\"\n      })]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"You can find out full code at my Github repository file \", _jsx(_components.a, {\n        href: \"https://github.com/santhalakshminarayana/whiteboard-image-enhance/blob/main/whiteboard_image_enhance.py\",\n        children: \"whiteboard_image_enhance.py\"\n      })]\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h2, {\n      children: \"Results\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"whiteboard-enhance/img_2.jpg\",\n        alt: \"img_2:=:100\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"whiteboard-enhance/img_3.jpg\",\n        alt: \"img_3:=:100\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"whiteboard-enhance/img_4.jpg\",\n        alt: \"img_4:=:100\"\n      })\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}},"id":"whiteboard-image-enhancement-opencv-python"},"__N_SSG":true},"page":"/blog/[id]","query":{"id":"whiteboard-image-enhancement-opencv-python"},"buildId":"4IOv20hLvQp5DhgHdJz_d","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>