<!DOCTYPE html><html lang="en" class="scroll-smooth"><head><meta charSet="utf-8"/><meta content="width=device-width, initial-scale=1" name="viewport"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/8440f4cde464d2b6.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8440f4cde464d2b6.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ae5ce4db48f014b6.js" defer=""></script><script src="/_next/static/chunks/framework-2c79e2a64abdb08b.js" defer=""></script><script src="/_next/static/chunks/main-83cebdb887f48834.js" defer=""></script><script src="/_next/static/chunks/pages/_app-e9e19bc0a702f74c.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5B...id%5D-127074eefd89098f.js" defer=""></script><script src="/_next/static/wLbKHDjsTq4ptH3Qik8ah/_buildManifest.js" defer=""></script><script src="/_next/static/wLbKHDjsTq4ptH3Qik8ah/_ssgManifest.js" defer=""></script></head><body class="bg-white text-black antialiased dark:bg-gray-900 dark:text-white"><div id="__next"><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><div class="flex min-h-screen flex-col justify-between"><nav class="w-full flex items-center border-b justify-between px-4 py-4 backdrop-blur dark:bg-transparent fixed shadow"><div><a aria-label="üë®‚Äçüíª" href="/"><div class="flex items-center justify-between"><div class="font-title fonthidden text-xl md:text-2xl xl:text-3xl font-semibold sm:block">üë®‚Äçüíª</div></div></a></div><div class="flex items-center text-base leading-5"><div class="hidden sm:block"><a class="font-title p-1 text-xl md:text-xl xl:text-2xl font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/blog"> <!-- -->Blog<!-- --> </a><a class="font-title p-1 text-xl md:text-xl xl:text-2xl font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/tags"> <!-- -->Tags<!-- --> </a><a class="font-title p-1 text-xl md:text-xl xl:text-2xl font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/projects"> <!-- -->Projects<!-- --> </a><a class="font-title p-1 text-xl md:text-xl xl:text-2xl font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/about2"> <!-- -->About<!-- --> </a></div><div class="sm:hidden"><button type="button" class="ml-1 mr-1 h-8 w-8 rounded py-1" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed top-0 left-0 z-10 h-full w-full transform bg-gray-200 opacity-95 duration-300 ease-in-out dark:bg-gray-800 translate-x-full"><div class="flex justify-end"><button type="button" class="mr-5 mt-11 h-8 w-8 rounded" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><nav class="fixed mt-8 h-full"><div class="px-12 py-4"><a class="text-2xl font-title tracking-widest text-gray-900 dark:text-gray-100" href="/blog">Blog</a></div><div class="px-12 py-4"><a class="text-2xl font-title tracking-widest text-gray-900 dark:text-gray-100" href="/tags">Tags</a></div><div class="px-12 py-4"><a class="text-2xl font-title tracking-widest text-gray-900 dark:text-gray-100" href="/projects">Projects</a></div><div class="px-12 py-4"><a class="text-2xl font-title tracking-widest text-gray-900 dark:text-gray-100" href="/about2">About</a></div></nav></div></div></div></nav><main class="prose dark:prose-dark mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0 py-20"><!--$--><div><div class="fixed right-8 bottom-8 hidden flex-col gap-3 md:hidden"><button aria-label="Scroll To Top" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><div class="border-b border-gray-200 dark:border-gray-700 text-center"><div><h1 class="text-4xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14 break-words">Whiteboard Image Enhancement using OpenCV</h1></div><div><a class="mr-4 text-mm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/image-processing">image-processing</a><a class="mr-4 text-mm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/opencv">opencv</a></div></div><p><img alt="Whiteboard image enhancement in Python" src="whiteboard-enhance/whiteboard-image-enhancement.jpg"/></p><h1 id="whiteboard-image-enhancement-using-opencv"><a href="#whiteboard-image-enhancement-using-opencv" class="anchor no-underline flex items-center before:-translate-x-[8px] before:-ml-[20px] before:bg-no-repeat before:bg-contain before:w-[20px] before:h-[20px] before:content-[&#x27;&#x27;] hover:before:bg-[url(&#x27;/link.svg&#x27;)]">Whiteboard image enhancement using OpenCV</a></h1><p>Whiteboard images generally contain less contrast and low brightness as they would be captured in mobile under normal room light conditions. Enhancing whiteboard images makes text readable and gives an image with high contrast and brightness.</p><p>We will apply different image-processing techniques to enhance whiteboard images using OpenCV in Python. From this <a target="_blank" rel="noopener noreferrer" href="https://gist.github.com/lelandbatey/8677901">whiteboard-cleaner</a> gist that enhances whiteboard images using <a target="_blank" rel="noopener noreferrer" href="https://imagemagick.org/">ImageMagick</a>, we will implement those ImageMagick methods in Python.</p><p>In that script, the following ImageMagick functions were used to enhance whiteboard images</p><div data-rehype-pretty-code-fragment=""><div class="relative"><pre><code data-language="shell" data-theme="default"><span class="line"><span style="color:#abb2bf">-morphology </span><span style="color:#98c379">Convolve</span><span style="color:#abb2bf"> </span><span style="color:#98c379">DoG:</span><span style="color:#d19a66">15</span><span style="color:#98c379">,</span><span style="color:#d19a66">100</span><span style="color:#98c379">,</span><span style="color:#d19a66">0</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">-negate</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">-normalize</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">-blur</span><span style="color:#abb2bf"> </span><span style="color:#e06c75">0x</span><span style="color:#d19a66">1</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">-channel</span><span style="color:#abb2bf"> </span><span style="color:#98c379">RBG</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">-level</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">60</span><span style="color:#98c379">%,</span><span style="color:#d19a66">91</span><span style="color:#98c379">%,</span><span style="color:#d19a66">0.1</span></span></code></pre></div></div><p>Above command applies image enhancing functions in order</p><ul><li><strong>-morphology Convolve DoG:15, 100, 0</strong>: Difference of Gaussian (DoG) with kernel_radius=15, sigma1=100, and sigma2=0</li><li><strong>-negate</strong>: Negative of image</li><li><strong>-normalize</strong>: Contrast stretch image with black=0.15% and white=0.05%</li><li><strong>-blur 0x1</strong>: Gaussian blur with sigma=1</li><li>**-level 60%,91%,0.1: Stretch image with black=60% and white=91%, and Gamma correction by gamma=0.1</li></ul><p>As I found some difficulty for exactly converting the ImageMagick C code to Python, I have changed the order and parameters that would give close results.</p><hr/><p>We will apply series of image-processing methods and effects to enhance whiteboard images in the following order</p><ul><li>Difference of Gaussian (DoG)</li><li>Negative effect</li><li>Contrast Stretching</li><li>Gaussian blur</li><li>Gamma correction</li><li>Color balance</li></ul><p>You can find the full code in my Github repository <a target="_blank" rel="noopener noreferrer" href="https://github.com/santhalakshminarayana/whiteboard-image-enhance">whiteboard-image-enhance</a></p><h3 id="import-packages-and-read-image"><a href="#import-packages-and-read-image" class="anchor no-underline flex items-center before:-translate-x-[8px] before:-ml-[20px] before:bg-no-repeat before:bg-contain before:w-[20px] before:h-[20px] before:content-[&#x27;&#x27;] hover:before:bg-[url(&#x27;/link.svg&#x27;)]">Import packages and read image</a></h3><div data-rehype-pretty-code-fragment=""><div class="relative"><pre><code data-language="python" data-theme="default"><span class="line"><span style="color:#c678dd;font-style:italic">import</span><span style="color:#abb2bf"> cv2</span></span>
<span class="line"><span style="color:#c678dd;font-style:italic">import</span><span style="color:#abb2bf"> numpy </span><span style="color:#c678dd;font-style:italic">as</span><span style="color:#abb2bf"> np</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#abb2bf">img </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> cv2.</span><span style="color:#61afef">imread</span><span style="color:#abb2bf">(</span><span style="color:#98c379">&#x27;input.jpg&#x27;</span><span style="color:#abb2bf">)</span></span></code></pre></div></div><p><img alt="Whiteboard image input:=:70:=:Input Whiteboard image" src="whiteboard-enhance/whiteboard-image.jpg"/></p><h3 id="difference-of-gaussian-dog"><a href="#difference-of-gaussian-dog" class="anchor no-underline flex items-center before:-translate-x-[8px] before:-ml-[20px] before:bg-no-repeat before:bg-contain before:w-[20px] before:h-[20px] before:content-[&#x27;&#x27;] hover:before:bg-[url(&#x27;/link.svg&#x27;)]">Difference of Gaussian (DoG)</a></h3><p><a target="_blank" rel="noopener noreferrer" href="https://en.wikipedia.org/wiki/Difference_of_Gaussians">Difference of Gaussians (DoG)</a> is the difference of two Gaussian kernel convoluted images. DoG image is obtained by subtracting two Gaussian blurred images with different kernel radius and variance.</p><p>Normally <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>I</mi><mrow><mi>d</mi><mi>o</mi><mi>g</mi></mrow></msub></mrow><annotation encoding="application/x-tex">I_{dog}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span style="height:.9694em;vertical-align:-.2861em" class="strut"></span><span class="mord"><span style="margin-right:.07847em" class="mord mathnormal">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:.3361em" class="vlist"><span style="top:-2.55em;margin-left:-.0785em;margin-right:.05em"><span style="height:2.7em" class="pstrut"></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight"><span class="mord mtight mathnormal">d</span><span class="mord mtight mathnormal">o</span><span style="margin-right:.03588em" class="mord mtight mathnormal">g</span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span style="height:.2861em" class="vlist"><span></span></span></span></span></span></span></span></span></span></span> (DoG of image) is calculated by subtracting <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>I</mi><mrow><mi>g</mi><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">I_{g1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span style="height:.9694em;vertical-align:-.2861em" class="strut"></span><span class="mord"><span style="margin-right:.07847em" class="mord mathnormal">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:.3011em" class="vlist"><span style="top:-2.55em;margin-left:-.0785em;margin-right:.05em"><span style="height:2.7em" class="pstrut"></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight"><span style="margin-right:.03588em" class="mord mtight mathnormal">g</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span style="height:.2861em" class="vlist"><span></span></span></span></span></span></span></span></span></span></span> and <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>I</mi><mrow><mi>g</mi><mn>2</mn></mrow></msub></mrow><annotation encoding="application/x-tex">I_{g2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span style="height:.9694em;vertical-align:-.2861em" class="strut"></span><span class="mord"><span style="margin-right:.07847em" class="mord mathnormal">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:.3011em" class="vlist"><span style="top:-2.55em;margin-left:-.0785em;margin-right:.05em"><span style="height:2.7em" class="pstrut"></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight"><span style="margin-right:.03588em" class="mord mtight mathnormal">g</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span style="height:.2861em" class="vlist"><span></span></span></span></span></span></span></span></span></span></span> which are convoluted images with two different Gaussian kernels. But ImageMagick applies convolution after subtracting and scaling two gaussian kernels.</p><p>So, we will first subtract two different Gaussian kernels, scale and normalize the dog-kernel to the zero-summing kernel (sum of all elements ~ 0.0) and then apply convolution.</p><div data-rehype-pretty-code-fragment=""><div class="relative"><pre><code data-language="python" data-theme="default"><span class="line"><span style="color:#c678dd">def</span><span style="color:#abb2bf"> </span><span style="color:#61afef">normalize_kernel</span><span style="color:#abb2bf">(</span><span style="color:#d19a66;font-style:italic">kernel</span><span style="color:#abb2bf">, </span><span style="color:#d19a66;font-style:italic">k_width</span><span style="color:#abb2bf">, </span><span style="color:#d19a66;font-style:italic">k_height</span><span style="color:#abb2bf">, </span><span style="color:#d19a66;font-style:italic">scaling_factor</span><span style="color:#abb2bf"> = </span><span style="color:#d19a66">1.0</span><span style="color:#abb2bf">):</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#98c379">&#x27;&#x27;&#x27;Zero-summing normalize kernel&#x27;&#x27;&#x27;</span></span>
<span class="line"><span style="color:#abb2bf">    </span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#d19a66">K_EPS</span><span style="color:#abb2bf"> </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">1.0e-12</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#7f848e;font-style:italic"># positive and negative sum of kernel values</span></span>
<span class="line"><span style="color:#abb2bf">    pos_range, neg_range </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">0</span><span style="color:#abb2bf">, </span><span style="color:#d19a66">0</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#c678dd;font-style:italic">for</span><span style="color:#abb2bf"> i </span><span style="color:#c678dd;font-style:italic">in</span><span style="color:#abb2bf"> </span><span style="color:#56b6c2">range</span><span style="color:#abb2bf">(k_width </span><span style="color:#56b6c2">*</span><span style="color:#abb2bf"> k_height):</span></span>
<span class="line"><span style="color:#abb2bf">        </span><span style="color:#c678dd;font-style:italic">if</span><span style="color:#abb2bf"> </span><span style="color:#56b6c2">abs</span><span style="color:#abb2bf">(kernel[i]) </span><span style="color:#56b6c2">&lt;</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">K_EPS</span><span style="color:#abb2bf">:</span></span>
<span class="line"><span style="color:#abb2bf">            kernel[i] </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">0.0</span></span>
<span class="line"><span style="color:#abb2bf">        </span><span style="color:#c678dd;font-style:italic">if</span><span style="color:#abb2bf"> kernel[i] </span><span style="color:#56b6c2">&lt;</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">0</span><span style="color:#abb2bf">:</span></span>
<span class="line"><span style="color:#abb2bf">            neg_range </span><span style="color:#56b6c2">+=</span><span style="color:#abb2bf"> kernel[i]</span></span>
<span class="line"><span style="color:#abb2bf">        </span><span style="color:#c678dd;font-style:italic">else</span><span style="color:#abb2bf">:</span></span>
<span class="line"><span style="color:#abb2bf">            pos_range </span><span style="color:#56b6c2">+=</span><span style="color:#abb2bf"> kernel[i]</span></span>
<span class="line"><span style="color:#abb2bf">    </span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#7f848e;font-style:italic"># scaling factor for positive and negative range</span></span>
<span class="line"><span style="color:#abb2bf">    pos_scale, neg_scale </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> pos_range, </span><span style="color:#56b6c2">-</span><span style="color:#abb2bf">neg_range</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#c678dd;font-style:italic">if</span><span style="color:#abb2bf"> </span><span style="color:#56b6c2">abs</span><span style="color:#abb2bf">(pos_range) </span><span style="color:#56b6c2">&gt;=</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">K_EPS</span><span style="color:#abb2bf">:</span></span>
<span class="line"><span style="color:#abb2bf">        pos_scale </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> pos_range</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#c678dd;font-style:italic">else</span><span style="color:#abb2bf">:</span></span>
<span class="line"><span style="color:#abb2bf">        pos_sacle </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">1.0</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#c678dd;font-style:italic">if</span><span style="color:#abb2bf"> </span><span style="color:#56b6c2">abs</span><span style="color:#abb2bf">(neg_range) </span><span style="color:#56b6c2">&gt;=</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">K_EPS</span><span style="color:#abb2bf">:</span></span>
<span class="line"><span style="color:#abb2bf">        neg_scale </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">1.0</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#c678dd;font-style:italic">else</span><span style="color:#abb2bf">:</span></span>
<span class="line"><span style="color:#abb2bf">        neg_scale </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> </span><span style="color:#56b6c2">-</span><span style="color:#abb2bf">neg_range</span></span>
<span class="line"><span style="color:#abb2bf">        </span></span>
<span class="line"><span style="color:#abb2bf">    pos_scale </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> scaling_factor </span><span style="color:#56b6c2">/</span><span style="color:#abb2bf"> pos_scale</span></span>
<span class="line"><span style="color:#abb2bf">    neg_scale </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> scaling_factor </span><span style="color:#56b6c2">/</span><span style="color:#abb2bf"> neg_scale</span></span>
<span class="line"><span style="color:#abb2bf">    </span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#7f848e;font-style:italic"># scale kernel values for zero-summing kernel</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#c678dd;font-style:italic">for</span><span style="color:#abb2bf"> i </span><span style="color:#c678dd;font-style:italic">in</span><span style="color:#abb2bf"> </span><span style="color:#56b6c2">range</span><span style="color:#abb2bf">(k_width </span><span style="color:#56b6c2">*</span><span style="color:#abb2bf"> k_height):</span></span>
<span class="line"><span style="color:#abb2bf">        </span><span style="color:#c678dd;font-style:italic">if</span><span style="color:#abb2bf"> (</span><span style="color:#c678dd;font-style:italic">not</span><span style="color:#abb2bf"> np.nan </span><span style="color:#56b6c2">==</span><span style="color:#abb2bf"> kernel[i]):</span></span>
<span class="line"><span style="color:#abb2bf">            kernel[i] </span><span style="color:#56b6c2">*=</span><span style="color:#abb2bf"> pos_scale </span><span style="color:#c678dd;font-style:italic">if</span><span style="color:#abb2bf"> kernel[i] </span><span style="color:#56b6c2">&gt;=</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">0</span><span style="color:#abb2bf"> </span><span style="color:#c678dd;font-style:italic">else</span><span style="color:#abb2bf"> neg_scale</span></span>
<span class="line"><span style="color:#abb2bf">            </span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#c678dd;font-style:italic">return</span><span style="color:#abb2bf"> kernel</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#c678dd">def</span><span style="color:#abb2bf"> </span><span style="color:#61afef">dog</span><span style="color:#abb2bf">(</span><span style="color:#d19a66;font-style:italic">img</span><span style="color:#abb2bf">, </span><span style="color:#d19a66;font-style:italic">k_size</span><span style="color:#abb2bf">, </span><span style="color:#d19a66;font-style:italic">sigma_1</span><span style="color:#abb2bf">, </span><span style="color:#d19a66;font-style:italic">sigma_2</span><span style="color:#abb2bf">):</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#98c379">&#x27;&#x27;&#x27;Difference of Gaussian by subtracting kernel 1 and kernel 2&#x27;&#x27;&#x27;</span></span>
<span class="line"><span style="color:#abb2bf">    </span></span>
<span class="line"><span style="color:#abb2bf">    k_width </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> k_height </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> k_size</span></span>
<span class="line"><span style="color:#abb2bf">    x </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> y </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> (k_width </span><span style="color:#56b6c2">-</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">1</span><span style="color:#abb2bf">) </span><span style="color:#56b6c2">//</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">2</span></span>
<span class="line"><span style="color:#abb2bf">    kernel </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> np.</span><span style="color:#61afef">zeros</span><span style="color:#abb2bf">(k_width </span><span style="color:#56b6c2">*</span><span style="color:#abb2bf"> k_height)</span></span>
<span class="line"><span style="color:#abb2bf">    </span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#7f848e;font-style:italic"># first gaussian kernal</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#c678dd;font-style:italic">if</span><span style="color:#abb2bf"> sigma_1 </span><span style="color:#56b6c2">&gt;</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">0</span><span style="color:#abb2bf">:</span></span>
<span class="line"><span style="color:#abb2bf">        co_1 </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">1</span><span style="color:#abb2bf"> </span><span style="color:#56b6c2">/</span><span style="color:#abb2bf"> (</span><span style="color:#d19a66">2</span><span style="color:#abb2bf"> </span><span style="color:#56b6c2">*</span><span style="color:#abb2bf"> sigma_1 </span><span style="color:#56b6c2">*</span><span style="color:#abb2bf"> sigma_1)</span></span>
<span class="line"><span style="color:#abb2bf">        co_2 </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">1</span><span style="color:#abb2bf"> </span><span style="color:#56b6c2">/</span><span style="color:#abb2bf"> (</span><span style="color:#d19a66">2</span><span style="color:#abb2bf"> </span><span style="color:#56b6c2">*</span><span style="color:#abb2bf"> np.pi </span><span style="color:#56b6c2">*</span><span style="color:#abb2bf"> sigma_1 </span><span style="color:#56b6c2">*</span><span style="color:#abb2bf"> sigma_1)</span></span>
<span class="line"><span style="color:#abb2bf">        i </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">0</span></span>
<span class="line"><span style="color:#abb2bf">        </span><span style="color:#c678dd;font-style:italic">for</span><span style="color:#abb2bf"> v </span><span style="color:#c678dd;font-style:italic">in</span><span style="color:#abb2bf"> </span><span style="color:#56b6c2">range</span><span style="color:#abb2bf">(</span><span style="color:#56b6c2">-</span><span style="color:#abb2bf">y, y </span><span style="color:#56b6c2">+</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">1</span><span style="color:#abb2bf">):</span></span>
<span class="line"><span style="color:#abb2bf">            </span><span style="color:#c678dd;font-style:italic">for</span><span style="color:#abb2bf"> u </span><span style="color:#c678dd;font-style:italic">in</span><span style="color:#abb2bf"> </span><span style="color:#56b6c2">range</span><span style="color:#abb2bf">(</span><span style="color:#56b6c2">-</span><span style="color:#abb2bf">x, x </span><span style="color:#56b6c2">+</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">1</span><span style="color:#abb2bf">):</span></span>
<span class="line"><span style="color:#abb2bf">                kernel[i] </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> np.</span><span style="color:#61afef">exp</span><span style="color:#abb2bf">(</span><span style="color:#56b6c2">-</span><span style="color:#abb2bf">(u</span><span style="color:#56b6c2">*</span><span style="color:#abb2bf">u </span><span style="color:#56b6c2">+</span><span style="color:#abb2bf"> v</span><span style="color:#56b6c2">*</span><span style="color:#abb2bf">v) </span><span style="color:#56b6c2">*</span><span style="color:#abb2bf"> co_1) </span><span style="color:#56b6c2">*</span><span style="color:#abb2bf"> co_2</span></span>
<span class="line"><span style="color:#abb2bf">                i </span><span style="color:#56b6c2">+=</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">1</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#7f848e;font-style:italic"># unity kernel</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#c678dd;font-style:italic">else</span><span style="color:#abb2bf">:</span></span>
<span class="line"><span style="color:#abb2bf">        kernel[x </span><span style="color:#56b6c2">+</span><span style="color:#abb2bf"> y </span><span style="color:#56b6c2">*</span><span style="color:#abb2bf"> k_width] </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">1.0</span></span>
<span class="line"><span style="color:#abb2bf">    </span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#7f848e;font-style:italic"># subtract second gaussian from kernel</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#c678dd;font-style:italic">if</span><span style="color:#abb2bf"> sigma_2 </span><span style="color:#56b6c2">&gt;</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">0</span><span style="color:#abb2bf">:</span></span>
<span class="line"><span style="color:#abb2bf">        co_1 </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">1</span><span style="color:#abb2bf"> </span><span style="color:#56b6c2">/</span><span style="color:#abb2bf"> (</span><span style="color:#d19a66">2</span><span style="color:#abb2bf"> </span><span style="color:#56b6c2">*</span><span style="color:#abb2bf"> sigma_2 </span><span style="color:#56b6c2">*</span><span style="color:#abb2bf"> sigma_2)</span></span>
<span class="line"><span style="color:#abb2bf">        co_2 </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">1</span><span style="color:#abb2bf"> </span><span style="color:#56b6c2">/</span><span style="color:#abb2bf"> (</span><span style="color:#d19a66">2</span><span style="color:#abb2bf"> </span><span style="color:#56b6c2">*</span><span style="color:#abb2bf"> np.pi </span><span style="color:#56b6c2">*</span><span style="color:#abb2bf"> sigma_2 </span><span style="color:#56b6c2">*</span><span style="color:#abb2bf"> sigma_2)</span></span>
<span class="line"><span style="color:#abb2bf">        i </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">0</span></span>
<span class="line"><span style="color:#abb2bf">        </span><span style="color:#c678dd;font-style:italic">for</span><span style="color:#abb2bf"> v </span><span style="color:#c678dd;font-style:italic">in</span><span style="color:#abb2bf"> </span><span style="color:#56b6c2">range</span><span style="color:#abb2bf">(</span><span style="color:#56b6c2">-</span><span style="color:#abb2bf">y, y </span><span style="color:#56b6c2">+</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">1</span><span style="color:#abb2bf">):</span></span>
<span class="line"><span style="color:#abb2bf">            </span><span style="color:#c678dd;font-style:italic">for</span><span style="color:#abb2bf"> u </span><span style="color:#c678dd;font-style:italic">in</span><span style="color:#abb2bf"> </span><span style="color:#56b6c2">range</span><span style="color:#abb2bf">(</span><span style="color:#56b6c2">-</span><span style="color:#abb2bf">x, x </span><span style="color:#56b6c2">+</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">1</span><span style="color:#abb2bf">):</span></span>
<span class="line"><span style="color:#abb2bf">                kernel[i] </span><span style="color:#56b6c2">-=</span><span style="color:#abb2bf"> np.</span><span style="color:#61afef">exp</span><span style="color:#abb2bf">(</span><span style="color:#56b6c2">-</span><span style="color:#abb2bf">(u</span><span style="color:#56b6c2">*</span><span style="color:#abb2bf">u </span><span style="color:#56b6c2">+</span><span style="color:#abb2bf"> v</span><span style="color:#56b6c2">*</span><span style="color:#abb2bf">v) </span><span style="color:#56b6c2">*</span><span style="color:#abb2bf"> co_1) </span><span style="color:#56b6c2">*</span><span style="color:#abb2bf"> co_2</span></span>
<span class="line"><span style="color:#abb2bf">                i </span><span style="color:#56b6c2">+=</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">1</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#7f848e;font-style:italic"># unity kernel</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#c678dd;font-style:italic">else</span><span style="color:#abb2bf">:</span></span>
<span class="line"><span style="color:#abb2bf">        kernel[x </span><span style="color:#56b6c2">+</span><span style="color:#abb2bf"> y </span><span style="color:#56b6c2">*</span><span style="color:#abb2bf"> k_width] </span><span style="color:#56b6c2">-=</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">1.0</span></span>
<span class="line"><span style="color:#abb2bf">    </span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#7f848e;font-style:italic"># zero-normalize scling kernel with scaling factor 1.0</span></span>
<span class="line"><span style="color:#abb2bf">    norm_kernel </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> </span><span style="color:#61afef">normalize_kernel</span><span style="color:#abb2bf">(kernel, k_width, k_height, </span><span style="color:#e06c75;font-style:italic">scaling_factor</span><span style="color:#abb2bf"> </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">1.0</span><span style="color:#abb2bf">)</span></span>
<span class="line"><span style="color:#abb2bf">    </span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#7f848e;font-style:italic"># apply filter with norm_kernel</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#c678dd;font-style:italic">return</span><span style="color:#abb2bf"> cv2.</span><span style="color:#61afef">filter2D</span><span style="color:#abb2bf">(img, </span><span style="color:#56b6c2">-</span><span style="color:#d19a66">1</span><span style="color:#abb2bf">, norm_kernel.</span><span style="color:#61afef">reshape</span><span style="color:#abb2bf">(k_width, k_height))</span></span></code></pre></div></div><p>Get Difference of Gaussian (DoG) for image by calling <em>dog()</em> function with <strong>radius = 15, sigma_1 = 100, sigma_2 = 0</strong>. Here <strong>radius = 15</strong> for both kernels, for first kernel, <strong>sigma = 100</strong>, and for second kernel, <strong>sigma = 0</strong>. Kernel with <strong>sigma = 0</strong> creates unity kernel means convolution with this kernel gives same image.</p><div data-rehype-pretty-code-fragment=""><div class="relative"><pre><code data-language="python" data-theme="default"><span class="line"><span style="color:#abb2bf">dog_img </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> </span><span style="color:#61afef">dog</span><span style="color:#abb2bf">(img, </span><span style="color:#d19a66">15</span><span style="color:#abb2bf">, </span><span style="color:#d19a66">100</span><span style="color:#abb2bf">, </span><span style="color:#d19a66">0</span><span style="color:#abb2bf">)</span></span></code></pre></div></div><p>After applying DoG, the resultant image looks like</p><p><img alt="Difference of Gaussian (DoG) Image:=:70:=:Difference of Gaussian (DoG) image" src="whiteboard-enhance/difference-of-gaussian.jpg"/></p><hr/><h3 id="negative-image"><a href="#negative-image" class="anchor no-underline flex items-center before:-translate-x-[8px] before:-ml-[20px] before:bg-no-repeat before:bg-contain before:w-[20px] before:h-[20px] before:content-[&#x27;&#x27;] hover:before:bg-[url(&#x27;/link.svg&#x27;)]">Negative Image</a></h3><p>For <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>I</mi><mrow><mi>d</mi><mi>o</mi><mi>g</mi></mrow></msub></mrow><annotation encoding="application/x-tex">I_{dog}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span style="height:.9694em;vertical-align:-.2861em" class="strut"></span><span class="mord"><span style="margin-right:.07847em" class="mord mathnormal">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:.3361em" class="vlist"><span style="top:-2.55em;margin-left:-.0785em;margin-right:.05em"><span style="height:2.7em" class="pstrut"></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight"><span class="mord mtight mathnormal">d</span><span class="mord mtight mathnormal">o</span><span style="margin-right:.03588em" class="mord mtight mathnormal">g</span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span style="height:.2861em" class="vlist"><span></span></span></span></span></span></span></span></span></span></span>, get a negative image which is just an inversion of colors (255 - image).</p><div data-rehype-pretty-code-fragment=""><div class="relative"><pre><code data-language="python" data-theme="default"><span class="line"><span style="color:#c678dd">def</span><span style="color:#abb2bf"> </span><span style="color:#61afef">negate</span><span style="color:#abb2bf">(</span><span style="color:#d19a66;font-style:italic">img</span><span style="color:#abb2bf">):</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#98c379">&#x27;&#x27;&#x27;Negative of image&#x27;&#x27;&#x27;</span></span>
<span class="line"><span style="color:#abb2bf">    </span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#c678dd;font-style:italic">return</span><span style="color:#abb2bf"> cv2.</span><span style="color:#61afef">bitwise_not</span><span style="color:#abb2bf">(img)</span></span></code></pre></div></div><div data-rehype-pretty-code-fragment=""><div class="relative"><pre><code data-language="python" data-theme="default"><span class="line"><span style="color:#abb2bf">negative_img </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> </span><span style="color:#61afef">negate</span><span style="color:#abb2bf">(dog_img)</span></span></code></pre></div></div><p>The result of the inversion image is <img alt="Negative image:=:70:=:Negative image" src="whiteboard-enhance/negative.jpg"/></p><p>Image content is not much visible as we inverted an image whose most of the pixels are black. So, to improve the contrast, we apply contrast-stretch enhancement for the negative image.</p><hr/><h3 id="contrast-stretching"><a href="#contrast-stretching" class="anchor no-underline flex items-center before:-translate-x-[8px] before:-ml-[20px] before:bg-no-repeat before:bg-contain before:w-[20px] before:h-[20px] before:content-[&#x27;&#x27;] hover:before:bg-[url(&#x27;/link.svg&#x27;)]">Contrast Stretching</a></h3><p>Contrast stretching of an image is the same as histogram equalization but we cap some percentage of pixel values to black (0) and white (255).</p><div data-rehype-pretty-code-fragment=""><div class="relative"><pre><code data-language="python" data-theme="default"><span class="line"><span style="color:#c678dd">def</span><span style="color:#abb2bf"> </span><span style="color:#61afef">get_black_white_indices</span><span style="color:#abb2bf">(</span><span style="color:#d19a66;font-style:italic">hist</span><span style="color:#abb2bf">, </span><span style="color:#d19a66;font-style:italic">tot_count</span><span style="color:#abb2bf">, </span><span style="color:#d19a66;font-style:italic">black_count</span><span style="color:#abb2bf">, </span><span style="color:#d19a66;font-style:italic">white_count</span><span style="color:#abb2bf">):</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#98c379">&#x27;&#x27;&#x27;Blacking and Whiting out indices same as color balance&#x27;&#x27;&#x27;</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#abb2bf">    black_ind </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">0</span></span>
<span class="line"><span style="color:#abb2bf">    white_ind </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">255</span></span>
<span class="line"><span style="color:#abb2bf">    co </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">0</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#c678dd;font-style:italic">for</span><span style="color:#abb2bf"> i </span><span style="color:#c678dd;font-style:italic">in</span><span style="color:#abb2bf"> </span><span style="color:#56b6c2">range</span><span style="color:#abb2bf">(</span><span style="color:#56b6c2">len</span><span style="color:#abb2bf">(hist)):</span></span>
<span class="line"><span style="color:#abb2bf">        co </span><span style="color:#56b6c2">+=</span><span style="color:#abb2bf"> hist[i]</span></span>
<span class="line"><span style="color:#abb2bf">        </span><span style="color:#c678dd;font-style:italic">if</span><span style="color:#abb2bf"> co </span><span style="color:#56b6c2">&gt;</span><span style="color:#abb2bf"> black_count:</span></span>
<span class="line"><span style="color:#abb2bf">            black_ind </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> i</span></span>
<span class="line"><span style="color:#abb2bf">            </span><span style="color:#c678dd;font-style:italic">break</span></span>
<span class="line"><span style="color:#abb2bf">            </span></span>
<span class="line"><span style="color:#abb2bf">    co </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">0</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#c678dd;font-style:italic">for</span><span style="color:#abb2bf"> i </span><span style="color:#c678dd;font-style:italic">in</span><span style="color:#abb2bf"> </span><span style="color:#56b6c2">range</span><span style="color:#abb2bf">(</span><span style="color:#56b6c2">len</span><span style="color:#abb2bf">(hist) </span><span style="color:#56b6c2">-</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">1</span><span style="color:#abb2bf">, </span><span style="color:#56b6c2">-</span><span style="color:#d19a66">1</span><span style="color:#abb2bf">, </span><span style="color:#56b6c2">-</span><span style="color:#d19a66">1</span><span style="color:#abb2bf">):</span></span>
<span class="line"><span style="color:#abb2bf">        co </span><span style="color:#56b6c2">+=</span><span style="color:#abb2bf"> hist[i]</span></span>
<span class="line"><span style="color:#abb2bf">        </span><span style="color:#c678dd;font-style:italic">if</span><span style="color:#abb2bf"> co </span><span style="color:#56b6c2">&gt;</span><span style="color:#abb2bf"> (tot_count </span><span style="color:#56b6c2">-</span><span style="color:#abb2bf"> white_count):</span></span>
<span class="line"><span style="color:#abb2bf">            white_ind </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> i</span></span>
<span class="line"><span style="color:#abb2bf">            </span><span style="color:#c678dd;font-style:italic">break</span></span>
<span class="line"><span style="color:#abb2bf">    </span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#c678dd;font-style:italic">return</span><span style="color:#abb2bf"> [black_ind, white_ind]</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#c678dd">def</span><span style="color:#abb2bf"> </span><span style="color:#61afef">contrast_stretch</span><span style="color:#abb2bf">(</span><span style="color:#d19a66;font-style:italic">img</span><span style="color:#abb2bf">, </span><span style="color:#d19a66;font-style:italic">black_point</span><span style="color:#abb2bf">, </span><span style="color:#d19a66;font-style:italic">white_point</span><span style="color:#abb2bf">):</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#98c379">&#x27;&#x27;&#x27;Contrast stretch image with black and white cap&#x27;&#x27;&#x27;</span></span>
<span class="line"><span style="color:#abb2bf">    </span></span>
<span class="line"><span style="color:#abb2bf">    tot_count </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> img.shape[</span><span style="color:#d19a66">0</span><span style="color:#abb2bf">] </span><span style="color:#56b6c2">*</span><span style="color:#abb2bf"> img.shape[</span><span style="color:#d19a66">1</span><span style="color:#abb2bf">]</span></span>
<span class="line"><span style="color:#abb2bf">    black_count </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> tot_count </span><span style="color:#56b6c2">*</span><span style="color:#abb2bf"> black_point </span><span style="color:#56b6c2">/</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">100</span></span>
<span class="line"><span style="color:#abb2bf">    white_count</span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> tot_count </span><span style="color:#56b6c2">*</span><span style="color:#abb2bf"> white_point </span><span style="color:#56b6c2">/</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">100</span></span>
<span class="line"><span style="color:#abb2bf">    ch_hists </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> []</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#7f848e;font-style:italic"># calculate histogram for each channel</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#c678dd;font-style:italic">for</span><span style="color:#abb2bf"> ch </span><span style="color:#c678dd;font-style:italic">in</span><span style="color:#abb2bf"> cv2.</span><span style="color:#61afef">split</span><span style="color:#abb2bf">(img):</span></span>
<span class="line"><span style="color:#abb2bf">        ch_hists.</span><span style="color:#61afef">append</span><span style="color:#abb2bf">(cv2.</span><span style="color:#61afef">calcHist</span><span style="color:#abb2bf">([ch], [</span><span style="color:#d19a66">0</span><span style="color:#abb2bf">], </span><span style="color:#d19a66">None</span><span style="color:#abb2bf">, [</span><span style="color:#d19a66">256</span><span style="color:#abb2bf">], (</span><span style="color:#d19a66">0</span><span style="color:#abb2bf">, </span><span style="color:#d19a66">256</span><span style="color:#abb2bf">)).</span><span style="color:#61afef">flatten</span><span style="color:#abb2bf">().</span><span style="color:#61afef">tolist</span><span style="color:#abb2bf">())</span></span>
<span class="line"><span style="color:#abb2bf">    </span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#7f848e;font-style:italic"># get black and white percentage indices</span></span>
<span class="line"><span style="color:#abb2bf">    black_white_indices </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> []</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#c678dd;font-style:italic">for</span><span style="color:#abb2bf"> hist </span><span style="color:#c678dd;font-style:italic">in</span><span style="color:#abb2bf"> ch_hists:</span></span>
<span class="line"><span style="color:#abb2bf">        black_white_indices.</span><span style="color:#61afef">append</span><span style="color:#abb2bf">(</span><span style="color:#61afef">get_black_white_indices</span><span style="color:#abb2bf">(hist, tot_count, black_count, white_count))</span></span>
<span class="line"><span style="color:#abb2bf">        </span></span>
<span class="line"><span style="color:#abb2bf">    stretch_map </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> np.</span><span style="color:#61afef">zeros</span><span style="color:#abb2bf">((</span><span style="color:#d19a66">3</span><span style="color:#abb2bf">, </span><span style="color:#d19a66">256</span><span style="color:#abb2bf">), </span><span style="color:#e06c75;font-style:italic">dtype</span><span style="color:#abb2bf"> </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> </span><span style="color:#98c379">&#x27;uint8&#x27;</span><span style="color:#abb2bf">)</span></span>
<span class="line"><span style="color:#abb2bf">    </span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#7f848e;font-style:italic"># stretch histogram </span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#c678dd;font-style:italic">for</span><span style="color:#abb2bf"> curr_ch </span><span style="color:#c678dd;font-style:italic">in</span><span style="color:#abb2bf"> </span><span style="color:#56b6c2">range</span><span style="color:#abb2bf">(</span><span style="color:#56b6c2">len</span><span style="color:#abb2bf">(black_white_indices)):</span></span>
<span class="line"><span style="color:#abb2bf">        black_ind, white_ind </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> black_white_indices[curr_ch]</span></span>
<span class="line"><span style="color:#abb2bf">        </span><span style="color:#c678dd;font-style:italic">for</span><span style="color:#abb2bf"> i </span><span style="color:#c678dd;font-style:italic">in</span><span style="color:#abb2bf"> </span><span style="color:#56b6c2">range</span><span style="color:#abb2bf">(stretch_map.shape[</span><span style="color:#d19a66">1</span><span style="color:#abb2bf">]):</span></span>
<span class="line"><span style="color:#abb2bf">            </span><span style="color:#c678dd;font-style:italic">if</span><span style="color:#abb2bf"> i </span><span style="color:#56b6c2">&lt;</span><span style="color:#abb2bf"> black_ind:</span></span>
<span class="line"><span style="color:#abb2bf">                stretch_map[curr_ch][i] </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">0</span></span>
<span class="line"><span style="color:#abb2bf">            </span><span style="color:#c678dd;font-style:italic">else</span><span style="color:#abb2bf">:</span></span>
<span class="line"><span style="color:#abb2bf">                </span><span style="color:#c678dd;font-style:italic">if</span><span style="color:#abb2bf"> i </span><span style="color:#56b6c2">&gt;</span><span style="color:#abb2bf"> white_ind:</span></span>
<span class="line"><span style="color:#abb2bf">                    stretch_map[curr_ch][i] </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">255</span></span>
<span class="line"><span style="color:#abb2bf">                </span><span style="color:#c678dd;font-style:italic">else</span><span style="color:#abb2bf">:</span></span>
<span class="line"><span style="color:#abb2bf">                    </span><span style="color:#c678dd;font-style:italic">if</span><span style="color:#abb2bf"> (white_ind </span><span style="color:#56b6c2">-</span><span style="color:#abb2bf"> black_ind) </span><span style="color:#56b6c2">&gt;</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">0</span><span style="color:#abb2bf">:</span></span>
<span class="line"><span style="color:#abb2bf">                        stretch_map[curr_ch][i] </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> </span><span style="color:#56b6c2">round</span><span style="color:#abb2bf">((i </span><span style="color:#56b6c2">-</span><span style="color:#abb2bf"> black_ind) </span><span style="color:#56b6c2">/</span><span style="color:#abb2bf"> (white_ind </span><span style="color:#56b6c2">-</span><span style="color:#abb2bf"> black_ind)) </span><span style="color:#56b6c2">*</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">255</span></span>
<span class="line"><span style="color:#abb2bf">                    </span><span style="color:#c678dd;font-style:italic">else</span><span style="color:#abb2bf">:</span></span>
<span class="line"><span style="color:#abb2bf">                        stretch_map[curr_ch][i] </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">0</span></span>
<span class="line"><span style="color:#abb2bf">    </span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#7f848e;font-style:italic"># stretch image</span></span>
<span class="line"><span style="color:#abb2bf">    ch_stretch </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> []</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#c678dd;font-style:italic">for</span><span style="color:#abb2bf"> i, ch </span><span style="color:#c678dd;font-style:italic">in</span><span style="color:#abb2bf"> </span><span style="color:#56b6c2">enumerate</span><span style="color:#abb2bf">(cv2.</span><span style="color:#61afef">split</span><span style="color:#abb2bf">(img)):</span></span>
<span class="line"><span style="color:#abb2bf">        ch_stretch.</span><span style="color:#61afef">append</span><span style="color:#abb2bf">(cv2.</span><span style="color:#61afef">LUT</span><span style="color:#abb2bf">(ch, stretch_map[i]))</span></span>
<span class="line"><span style="color:#abb2bf">        </span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#c678dd;font-style:italic">return</span><span style="color:#abb2bf"> cv2.</span><span style="color:#61afef">merge</span><span style="color:#abb2bf">(ch_stretch)</span></span></code></pre></div></div><p>For each image channel, calculate cummulative histogram sum, and then cap pixels based on <strong>black_point = 2</strong> and <strong>white_point = 99.5</strong> percentage.</p><div data-rehype-pretty-code-fragment=""><div class="relative"><pre><code data-language="python" data-theme="default"><span class="line"><span style="color:#abb2bf">contrast_stretch_img </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> </span><span style="color:#61afef">contrast_stretch</span><span style="color:#abb2bf">(negative_img, </span><span style="color:#d19a66">2</span><span style="color:#abb2bf">, </span><span style="color:#d19a66">99.5</span><span style="color:#abb2bf">)</span></span></code></pre></div></div><p>Negative image after contrast stretching is</p><p><img alt="Contrast stretch image:=:70:=:Contrast strech image" src="whiteboard-enhance/contrast-stretch.jpg"/></p><hr/><h3 id="gaussin-blur--gamma-correction"><a href="#gaussin-blur--gamma-correction" class="anchor no-underline flex items-center before:-translate-x-[8px] before:-ml-[20px] before:bg-no-repeat before:bg-contain before:w-[20px] before:h-[20px] before:content-[&#x27;&#x27;] hover:before:bg-[url(&#x27;/link.svg&#x27;)]">Gaussin Blur &amp; Gamma Correction</a></h3><p>Contrast stretching image contains noise, so blur the image with Gaussian kernel. As Gaussian distribution kernel can be linearly separable, we apply convolution with the same 1D-kernel along the x-axis and y-axis for performance (negligible for small kernels and low-res images).</p><div data-rehype-pretty-code-fragment=""><div class="relative"><pre><code data-language="python" data-theme="default"><span class="line"><span style="color:#c678dd">def</span><span style="color:#abb2bf"> </span><span style="color:#61afef">fast_gaussian_blur</span><span style="color:#abb2bf">(</span><span style="color:#d19a66;font-style:italic">img</span><span style="color:#abb2bf">, </span><span style="color:#d19a66;font-style:italic">ksize</span><span style="color:#abb2bf">, </span><span style="color:#d19a66;font-style:italic">sigma</span><span style="color:#abb2bf">):</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#98c379">&#x27;&#x27;&#x27;Gussian blur using linear separable property of Gaussian distribution&#x27;&#x27;&#x27;</span></span>
<span class="line"><span style="color:#abb2bf">    </span></span>
<span class="line"><span style="color:#abb2bf">    kernel_1d </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> cv2.</span><span style="color:#61afef">getGaussianKernel</span><span style="color:#abb2bf">(ksize, sigma)</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#c678dd;font-style:italic">return</span><span style="color:#abb2bf"> cv2.</span><span style="color:#61afef">sepFilter2D</span><span style="color:#abb2bf">(img, </span><span style="color:#56b6c2">-</span><span style="color:#d19a66">1</span><span style="color:#abb2bf">, kernel_1d, kernel_1d)</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#c678dd">def</span><span style="color:#abb2bf"> </span><span style="color:#61afef">gamma</span><span style="color:#abb2bf">(</span><span style="color:#d19a66;font-style:italic">img</span><span style="color:#abb2bf">, </span><span style="color:#d19a66;font-style:italic">gamma_value</span><span style="color:#abb2bf">):</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#98c379">&#x27;&#x27;&#x27;Gamma correction of image&#x27;&#x27;&#x27;</span></span>
<span class="line"><span style="color:#abb2bf">    </span></span>
<span class="line"><span style="color:#abb2bf">    i_gamma </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">1</span><span style="color:#abb2bf"> </span><span style="color:#56b6c2">/</span><span style="color:#abb2bf"> gamma_value</span></span>
<span class="line"><span style="color:#abb2bf">    lut </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> np.</span><span style="color:#61afef">array</span><span style="color:#abb2bf">([((i </span><span style="color:#56b6c2">/</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">255</span><span style="color:#abb2bf">) </span><span style="color:#56b6c2">**</span><span style="color:#abb2bf"> i_gamma) </span><span style="color:#56b6c2">*</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">255</span><span style="color:#abb2bf"> </span><span style="color:#c678dd;font-style:italic">for</span><span style="color:#abb2bf"> i </span><span style="color:#c678dd;font-style:italic">in</span><span style="color:#abb2bf"> np.</span><span style="color:#61afef">arange</span><span style="color:#abb2bf">(</span><span style="color:#d19a66">0</span><span style="color:#abb2bf">, </span><span style="color:#d19a66">256</span><span style="color:#abb2bf">)], </span><span style="color:#e06c75;font-style:italic">dtype</span><span style="color:#abb2bf"> </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> </span><span style="color:#98c379">&#x27;uint8&#x27;</span><span style="color:#abb2bf">)</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#c678dd;font-style:italic">return</span><span style="color:#abb2bf"> cv2.</span><span style="color:#61afef">LUT</span><span style="color:#abb2bf">(img, lut)</span></span></code></pre></div></div><p>Apply Gaussian blur with <strong>kernel_size = 3</strong> and <strong>sigma = 1</strong>.</p><div data-rehype-pretty-code-fragment=""><div class="relative"><pre><code data-language="python" data-theme="default"><span class="line"><span style="color:#abb2bf">blur_img </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> </span><span style="color:#61afef">fast_gaussian_blur</span><span style="color:#abb2bf">(contrast_stretch_img, </span><span style="color:#d19a66">3</span><span style="color:#abb2bf">, </span><span style="color:#d19a66">1</span><span style="color:#abb2bf">)</span></span></code></pre></div></div><p>Blurred image after noise suppression is</p><p><img alt="Gaussian blur image:=:70:=:Blurred image" src="whiteboard-enhance/gaussian-blur.jpg"/></p><p>Now apply Gamma correction to enhance the blurred image with <strong>gamma_value = 1.1</strong>.</p><div data-rehype-pretty-code-fragment=""><div class="relative"><pre><code data-language="python" data-theme="default"><span class="line"><span style="color:#abb2bf">gamma_img </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> </span><span style="color:#61afef">gamma</span><span style="color:#abb2bf">(blur_img, </span><span style="color:#d19a66">1.1</span><span style="color:#abb2bf">)</span></span></code></pre></div></div><p>Blurred image Gamma corrected looks like</p><p><img alt="Gamma correction:=:70:=:Gamma corrected image" src="whiteboard-enhance/gamma-correction.jpg"/></p><hr/><h3 id="color-balance"><a href="#color-balance" class="anchor no-underline flex items-center before:-translate-x-[8px] before:-ml-[20px] before:bg-no-repeat before:bg-contain before:w-[20px] before:h-[20px] before:content-[&#x27;&#x27;] hover:before:bg-[url(&#x27;/link.svg&#x27;)]">Color Balance</a></h3><p>Color balance of an image is same as contrast-stretching method above but they are different in implementation. Above contrast-stretching is an implementation based on <a target="_blank" rel="noopener noreferrer" href="https://imagemagick.org/api/MagickCore/enhance_8c.html">ImageMagick-ContrastStretchImage()</a>, and <a target="_blank" rel="noopener noreferrer" href="https://gist.github.com/DavidYKay/9dad6c4ab0d8d7dbf3dc">color balance</a> is based on <a target="_blank" rel="noopener noreferrer" href="https://www.ipol.im/pub/art/2011/llmps-scb/article.pdf">Simplest Color Balance</a>.</p><div data-rehype-pretty-code-fragment=""><div class="relative"><pre><code data-language="python" data-theme="default"><span class="line"><span style="color:#c678dd">def</span><span style="color:#abb2bf"> </span><span style="color:#61afef">color_balance</span><span style="color:#abb2bf">(</span><span style="color:#d19a66;font-style:italic">img</span><span style="color:#abb2bf">, </span><span style="color:#d19a66;font-style:italic">low_per</span><span style="color:#abb2bf">, </span><span style="color:#d19a66;font-style:italic">high_per</span><span style="color:#abb2bf">):</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#98c379">&#x27;&#x27;&#x27;Contrast stretch image by histogram equilization with black and white cap&#x27;&#x27;&#x27;</span></span>
<span class="line"><span style="color:#abb2bf">    </span></span>
<span class="line"><span style="color:#abb2bf">    tot_pix </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> img.shape[</span><span style="color:#d19a66">1</span><span style="color:#abb2bf">] </span><span style="color:#56b6c2">*</span><span style="color:#abb2bf"> img.shape[</span><span style="color:#d19a66">0</span><span style="color:#abb2bf">]</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#7f848e;font-style:italic"># no.of pixels to black-out and white-out</span></span>
<span class="line"><span style="color:#abb2bf">    low_count </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> tot_pix </span><span style="color:#56b6c2">*</span><span style="color:#abb2bf"> low_per </span><span style="color:#56b6c2">/</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">100</span></span>
<span class="line"><span style="color:#abb2bf">    high_count </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> tot_pix </span><span style="color:#56b6c2">*</span><span style="color:#abb2bf"> (</span><span style="color:#d19a66">100</span><span style="color:#abb2bf"> </span><span style="color:#56b6c2">-</span><span style="color:#abb2bf"> high_per) </span><span style="color:#56b6c2">/</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">100</span></span>
<span class="line"><span style="color:#abb2bf">    </span></span>
<span class="line"><span style="color:#abb2bf">    cs_img </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> []</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#7f848e;font-style:italic"># for each channel, apply contrast-stretch</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#c678dd;font-style:italic">for</span><span style="color:#abb2bf"> ch </span><span style="color:#c678dd;font-style:italic">in</span><span style="color:#abb2bf"> cv2.</span><span style="color:#61afef">split</span><span style="color:#abb2bf">(img):</span></span>
<span class="line"><span style="color:#abb2bf">        </span><span style="color:#7f848e;font-style:italic"># cummulative histogram sum of channel</span></span>
<span class="line"><span style="color:#abb2bf">        cum_hist_sum </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> np.</span><span style="color:#61afef">cumsum</span><span style="color:#abb2bf">(cv2.</span><span style="color:#61afef">calcHist</span><span style="color:#abb2bf">([ch], [</span><span style="color:#d19a66">0</span><span style="color:#abb2bf">], </span><span style="color:#d19a66">None</span><span style="color:#abb2bf">, [</span><span style="color:#d19a66">256</span><span style="color:#abb2bf">], (</span><span style="color:#d19a66">0</span><span style="color:#abb2bf">, </span><span style="color:#d19a66">256</span><span style="color:#abb2bf">)))</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#abb2bf">        </span><span style="color:#7f848e;font-style:italic"># find indices for blacking and whiting out pixels</span></span>
<span class="line"><span style="color:#abb2bf">        li, hi </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> np.</span><span style="color:#61afef">searchsorted</span><span style="color:#abb2bf">(cum_hist_sum, (low_count, high_count))</span></span>
<span class="line"><span style="color:#abb2bf">        </span><span style="color:#c678dd;font-style:italic">if</span><span style="color:#abb2bf"> (li </span><span style="color:#56b6c2">==</span><span style="color:#abb2bf"> hi):</span></span>
<span class="line"><span style="color:#abb2bf">            cs_img.</span><span style="color:#61afef">append</span><span style="color:#abb2bf">(ch)</span></span>
<span class="line"><span style="color:#abb2bf">            </span><span style="color:#c678dd;font-style:italic">continue</span></span>
<span class="line"><span style="color:#abb2bf">        </span><span style="color:#7f848e;font-style:italic"># lut with min-max normalization for [0-255] bins</span></span>
<span class="line"><span style="color:#abb2bf">        lut </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> np.</span><span style="color:#61afef">array</span><span style="color:#abb2bf">([</span><span style="color:#d19a66">0</span><span style="color:#abb2bf"> </span><span style="color:#c678dd;font-style:italic">if</span><span style="color:#abb2bf"> i </span><span style="color:#56b6c2">&lt;</span><span style="color:#abb2bf"> li </span></span>
<span class="line"><span style="color:#abb2bf">                        </span><span style="color:#c678dd;font-style:italic">else</span><span style="color:#abb2bf"> (</span><span style="color:#d19a66">255</span><span style="color:#abb2bf"> </span><span style="color:#c678dd;font-style:italic">if</span><span style="color:#abb2bf"> i </span><span style="color:#56b6c2">&gt;</span><span style="color:#abb2bf"> hi </span><span style="color:#c678dd;font-style:italic">else</span><span style="color:#abb2bf"> </span><span style="color:#56b6c2">round</span><span style="color:#abb2bf">((i </span><span style="color:#56b6c2">-</span><span style="color:#abb2bf"> li) </span><span style="color:#56b6c2">/</span><span style="color:#abb2bf"> (hi </span><span style="color:#56b6c2">-</span><span style="color:#abb2bf"> li) </span><span style="color:#56b6c2">*</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">255</span><span style="color:#abb2bf">)) </span></span>
<span class="line"><span style="color:#abb2bf">                        </span><span style="color:#c678dd;font-style:italic">for</span><span style="color:#abb2bf"> i </span><span style="color:#c678dd;font-style:italic">in</span><span style="color:#abb2bf"> np.</span><span style="color:#61afef">arange</span><span style="color:#abb2bf">(</span><span style="color:#d19a66">0</span><span style="color:#abb2bf">, </span><span style="color:#d19a66">256</span><span style="color:#abb2bf">)], </span><span style="color:#e06c75;font-style:italic">dtype</span><span style="color:#abb2bf"> </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> </span><span style="color:#98c379">&#x27;uint8&#x27;</span><span style="color:#abb2bf">)</span></span>
<span class="line"><span style="color:#abb2bf">        </span><span style="color:#7f848e;font-style:italic"># constrast-stretch channel</span></span>
<span class="line"><span style="color:#abb2bf">        cs_ch </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> cv2.</span><span style="color:#61afef">LUT</span><span style="color:#abb2bf">(ch, lut)</span></span>
<span class="line"><span style="color:#abb2bf">        cs_img.</span><span style="color:#61afef">append</span><span style="color:#abb2bf">(cs_ch)</span></span>
<span class="line"><span style="color:#abb2bf">        </span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#c678dd;font-style:italic">return</span><span style="color:#abb2bf"> cv2.</span><span style="color:#61afef">merge</span><span style="color:#abb2bf">(cs_img)</span></span></code></pre></div></div><p>Enhance image by passing Gamma corrected image to <strong>color_balance()</strong> with parameters <strong>low_per = 2</strong> and <strong>high_per = 1</strong>.</p><div data-rehype-pretty-code-fragment=""><div class="relative"><pre><code data-language="python" data-theme="default"><span class="line"><span style="color:#abb2bf">color_balanced_img </span><span style="color:#56b6c2">=</span><span style="color:#abb2bf"> </span><span style="color:#61afef">color_balance</span><span style="color:#abb2bf">(gamma_img, </span><span style="color:#d19a66">2</span><span style="color:#abb2bf">, </span><span style="color:#d19a66">1</span><span style="color:#abb2bf">)</span></span></code></pre></div></div><p>The final enhanced whiteboard image is <img alt="Whiteboard image enhance:=:70:=:Whiteboard image enhanced" src="whiteboard-enhance/whiteboard-image-enhanced.jpg"/></p><p>You can find out full code at my Github repository file <a target="_blank" rel="noopener noreferrer" href="https://github.com/santhalakshminarayana/whiteboard-image-enhance/blob/main/whiteboard_image_enhance.py">whiteboard_image_enhance.py</a></p><hr/><h2 id="results"><a href="#results" class="anchor no-underline flex items-center before:-translate-x-[8px] before:-ml-[20px] before:bg-no-repeat before:bg-contain before:w-[20px] before:h-[20px] before:content-[&#x27;&#x27;] hover:before:bg-[url(&#x27;/link.svg&#x27;)]">Results</a></h2><p><img alt="img_2:=:100" src="whiteboard-enhance/img_2.jpg"/></p><p><img alt="img_3:=:100" src="whiteboard-enhance/img_3.jpg"/></p><p><img alt="img_4:=:100" src="whiteboard-enhance/img_4.jpg"/></p></div><!--/$--></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"toc":[{"value":"Whiteboard image enhancement using OpenCV","url":"#whiteboard-image-enhancement-using-opencv","depth":1},{"value":"Import packages and read image","url":"#import-packages-and-read-image","depth":3},{"value":"Difference of Gaussian (DoG)","url":"#difference-of-gaussian-dog","depth":3},{"value":"Negative Image","url":"#negative-image","depth":3},{"value":"Contrast Stretching","url":"#contrast-stretching","depth":3},{"value":"Gaussin Blur \u0026 Gamma Correction","url":"#gaussin-blur--gamma-correction","depth":3},{"value":"Color Balance","url":"#color-balance","depth":3},{"value":"Results","url":"#results","depth":2}],"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    img: \"img\",\n    h1: \"h1\",\n    a: \"a\",\n    div: \"div\",\n    pre: \"pre\",\n    code: \"code\",\n    span: \"span\",\n    ul: \"ul\",\n    li: \"li\",\n    strong: \"strong\",\n    hr: \"hr\",\n    h3: \"h3\",\n    math: \"math\",\n    semantics: \"semantics\",\n    mrow: \"mrow\",\n    msub: \"msub\",\n    mi: \"mi\",\n    annotation: \"annotation\",\n    mn: \"mn\",\n    em: \"em\",\n    h2: \"h2\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.p, {\n      children: _jsx(_components.img, {\n        alt: \"Whiteboard image enhancement in Python\",\n        src: \"whiteboard-enhance/whiteboard-image-enhancement.jpg\"\n      })\n    }), _jsx(_components.h1, {\n      id: \"whiteboard-image-enhancement-using-opencv\",\n      children: _jsx(_components.a, {\n        href: \"#whiteboard-image-enhancement-using-opencv\",\n        className: \"anchor no-underline flex items-center before:-translate-x-[8px] before:-ml-[20px] before:bg-no-repeat before:bg-contain before:w-[20px] before:h-[20px] before:content-[''] hover:before:bg-[url('/link.svg')]\",\n        children: \"Whiteboard image enhancement using OpenCV\"\n      })\n    }), _jsx(_components.p, {\n      children: \"Whiteboard images generally contain less contrast and low brightness as they would be captured in mobile under normal room light conditions. Enhancing whiteboard images makes text readable and gives an image with high contrast and brightness.\"\n    }), _jsxs(_components.p, {\n      children: [\"We will apply different image-processing techniques to enhance whiteboard images using OpenCV in Python. From this \", _jsx(_components.a, {\n        href: \"https://gist.github.com/lelandbatey/8677901\",\n        children: \"whiteboard-cleaner\"\n      }), \" gist that enhances whiteboard images using \", _jsx(_components.a, {\n        href: \"https://imagemagick.org/\",\n        children: \"ImageMagick\"\n      }), \", we will implement those ImageMagick methods in Python.\"]\n    }), _jsx(_components.p, {\n      children: \"In that script, the following ImageMagick functions were used to enhance whiteboard images\"\n    }), _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"shell\",\n        \"data-theme\": \"default\",\n        children: _jsx(_components.code, {\n          \"data-language\": \"shell\",\n          \"data-theme\": \"default\",\n          children: _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"-morphology \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98c379\"\n              },\n              children: \"Convolve\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98c379\"\n              },\n              children: \"DoG:\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"15\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98c379\"\n              },\n              children: \",\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"100\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98c379\"\n              },\n              children: \",\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"-negate\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"-normalize\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"-blur\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#e06c75\"\n              },\n              children: \"0x\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"-channel\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98c379\"\n              },\n              children: \"RBG\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"-level\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"60\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98c379\"\n              },\n              children: \"%,\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"91\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98c379\"\n              },\n              children: \"%,\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"0.1\"\n            })]\n          })\n        })\n      })\n    }), _jsx(_components.p, {\n      children: \"Above command applies image enhancing functions in order\"\n    }), _jsxs(_components.ul, {\n      children: [_jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"-morphology Convolve DoG:15, 100, 0\"\n        }), \": Difference of Gaussian (DoG) with kernel_radius=15, sigma1=100, and sigma2=0\"]\n      }), _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"-negate\"\n        }), \": Negative of image\"]\n      }), _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"-normalize\"\n        }), \": Contrast stretch image with black=0.15% and white=0.05%\"]\n      }), _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"-blur 0x1\"\n        }), \": Gaussian blur with sigma=1\"]\n      }), _jsx(_components.li, {\n        children: \"**-level 60%,91%,0.1: Stretch image with black=60% and white=91%, and Gamma correction by gamma=0.1\"\n      })]\n    }), _jsx(_components.p, {\n      children: \"As I found some difficulty for exactly converting the ImageMagick C code to Python, I have changed the order and parameters that would give close results.\"\n    }), _jsx(_components.hr, {}), _jsx(_components.p, {\n      children: \"We will apply series of image-processing methods and effects to enhance whiteboard images in the following order\"\n    }), _jsxs(_components.ul, {\n      children: [_jsx(_components.li, {\n        children: \"Difference of Gaussian (DoG)\"\n      }), _jsx(_components.li, {\n        children: \"Negative effect\"\n      }), _jsx(_components.li, {\n        children: \"Contrast Stretching\"\n      }), _jsx(_components.li, {\n        children: \"Gaussian blur\"\n      }), _jsx(_components.li, {\n        children: \"Gamma correction\"\n      }), _jsx(_components.li, {\n        children: \"Color balance\"\n      })]\n    }), _jsxs(_components.p, {\n      children: [\"You can find the full code in my Github repository \", _jsx(_components.a, {\n        href: \"https://github.com/santhalakshminarayana/whiteboard-image-enhance\",\n        children: \"whiteboard-image-enhance\"\n      })]\n    }), _jsx(_components.h3, {\n      id: \"import-packages-and-read-image\",\n      children: _jsx(_components.a, {\n        href: \"#import-packages-and-read-image\",\n        className: \"anchor no-underline flex items-center before:-translate-x-[8px] before:-ml-[20px] before:bg-no-repeat before:bg-contain before:w-[20px] before:h-[20px] before:content-[''] hover:before:bg-[url('/link.svg')]\",\n        children: \"Import packages and read image\"\n      })\n    }), _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"python\",\n        \"data-theme\": \"default\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"python\",\n          \"data-theme\": \"default\",\n          children: [_jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"import\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" cv2\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"import\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" numpy \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"as\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" np\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"img \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" cv2.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"imread\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98c379\"\n              },\n              children: \"'input.jpg'\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \")\"\n            })]\n          })]\n        })\n      })\n    }), _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        alt: \"Whiteboard image input:=:70:=:Input Whiteboard image\",\n        src: \"whiteboard-enhance/whiteboard-image.jpg\"\n      })\n    }), _jsx(_components.h3, {\n      id: \"difference-of-gaussian-dog\",\n      children: _jsx(_components.a, {\n        href: \"#difference-of-gaussian-dog\",\n        className: \"anchor no-underline flex items-center before:-translate-x-[8px] before:-ml-[20px] before:bg-no-repeat before:bg-contain before:w-[20px] before:h-[20px] before:content-[''] hover:before:bg-[url('/link.svg')]\",\n        children: \"Difference of Gaussian (DoG)\"\n      })\n    }), _jsxs(_components.p, {\n      children: [_jsx(_components.a, {\n        href: \"https://en.wikipedia.org/wiki/Difference_of_Gaussians\",\n        children: \"Difference of Gaussians (DoG)\"\n      }), \" is the difference of two Gaussian kernel convoluted images. DoG image is obtained by subtracting two Gaussian blurred images with different kernel radius and variance.\"]\n    }), _jsxs(_components.p, {\n      children: [\"Normally \", _jsx(_components.span, {\n        className: \"math math-inline\",\n        children: _jsxs(_components.span, {\n          className: \"katex\",\n          children: [_jsx(_components.span, {\n            className: \"katex-mathml\",\n            children: _jsx(_components.math, {\n              xmlns: \"http://www.w3.org/1998/Math/MathML\",\n              children: _jsxs(_components.semantics, {\n                children: [_jsx(_components.mrow, {\n                  children: _jsxs(_components.msub, {\n                    children: [_jsx(_components.mi, {\n                      children: \"I\"\n                    }), _jsxs(_components.mrow, {\n                      children: [_jsx(_components.mi, {\n                        children: \"d\"\n                      }), _jsx(_components.mi, {\n                        children: \"o\"\n                      }), _jsx(_components.mi, {\n                        children: \"g\"\n                      })]\n                    })]\n                  })\n                }), _jsx(_components.annotation, {\n                  encoding: \"application/x-tex\",\n                  children: \"I_{dog}\"\n                })]\n              })\n            })\n          }), _jsx(_components.span, {\n            className: \"katex-html\",\n            \"aria-hidden\": \"true\",\n            children: _jsxs(_components.span, {\n              className: \"base\",\n              children: [_jsx(_components.span, {\n                style: {\n                  height: \".9694em\",\n                  verticalAlign: \"-.2861em\"\n                },\n                className: \"strut\"\n              }), _jsxs(_components.span, {\n                className: \"mord\",\n                children: [_jsx(_components.span, {\n                  style: {\n                    marginRight: \".07847em\"\n                  },\n                  className: \"mord mathnormal\",\n                  children: \"I\"\n                }), _jsx(_components.span, {\n                  className: \"msupsub\",\n                  children: _jsxs(_components.span, {\n                    className: \"vlist-t vlist-t2\",\n                    children: [_jsxs(_components.span, {\n                      className: \"vlist-r\",\n                      children: [_jsx(_components.span, {\n                        style: {\n                          height: \".3361em\"\n                        },\n                        className: \"vlist\",\n                        children: _jsxs(_components.span, {\n                          style: {\n                            top: \"-2.55em\",\n                            marginLeft: \"-.0785em\",\n                            marginRight: \".05em\"\n                          },\n                          children: [_jsx(_components.span, {\n                            style: {\n                              height: \"2.7em\"\n                            },\n                            className: \"pstrut\"\n                          }), _jsx(_components.span, {\n                            className: \"mtight reset-size6 size3 sizing\",\n                            children: _jsxs(_components.span, {\n                              className: \"mord mtight\",\n                              children: [_jsx(_components.span, {\n                                className: \"mord mtight mathnormal\",\n                                children: \"d\"\n                              }), _jsx(_components.span, {\n                                className: \"mord mtight mathnormal\",\n                                children: \"o\"\n                              }), _jsx(_components.span, {\n                                style: {\n                                  marginRight: \".03588em\"\n                                },\n                                className: \"mord mtight mathnormal\",\n                                children: \"g\"\n                              })]\n                            })\n                          })]\n                        })\n                      }), _jsx(_components.span, {\n                        className: \"vlist-s\",\n                        children: \"‚Äã\"\n                      })]\n                    }), _jsx(_components.span, {\n                      className: \"vlist-r\",\n                      children: _jsx(_components.span, {\n                        style: {\n                          height: \".2861em\"\n                        },\n                        className: \"vlist\",\n                        children: _jsx(_components.span, {})\n                      })\n                    })]\n                  })\n                })]\n              })]\n            })\n          })]\n        })\n      }), \" (DoG of image) is calculated by subtracting \", _jsx(_components.span, {\n        className: \"math math-inline\",\n        children: _jsxs(_components.span, {\n          className: \"katex\",\n          children: [_jsx(_components.span, {\n            className: \"katex-mathml\",\n            children: _jsx(_components.math, {\n              xmlns: \"http://www.w3.org/1998/Math/MathML\",\n              children: _jsxs(_components.semantics, {\n                children: [_jsx(_components.mrow, {\n                  children: _jsxs(_components.msub, {\n                    children: [_jsx(_components.mi, {\n                      children: \"I\"\n                    }), _jsxs(_components.mrow, {\n                      children: [_jsx(_components.mi, {\n                        children: \"g\"\n                      }), _jsx(_components.mn, {\n                        children: \"1\"\n                      })]\n                    })]\n                  })\n                }), _jsx(_components.annotation, {\n                  encoding: \"application/x-tex\",\n                  children: \"I_{g1}\"\n                })]\n              })\n            })\n          }), _jsx(_components.span, {\n            className: \"katex-html\",\n            \"aria-hidden\": \"true\",\n            children: _jsxs(_components.span, {\n              className: \"base\",\n              children: [_jsx(_components.span, {\n                style: {\n                  height: \".9694em\",\n                  verticalAlign: \"-.2861em\"\n                },\n                className: \"strut\"\n              }), _jsxs(_components.span, {\n                className: \"mord\",\n                children: [_jsx(_components.span, {\n                  style: {\n                    marginRight: \".07847em\"\n                  },\n                  className: \"mord mathnormal\",\n                  children: \"I\"\n                }), _jsx(_components.span, {\n                  className: \"msupsub\",\n                  children: _jsxs(_components.span, {\n                    className: \"vlist-t vlist-t2\",\n                    children: [_jsxs(_components.span, {\n                      className: \"vlist-r\",\n                      children: [_jsx(_components.span, {\n                        style: {\n                          height: \".3011em\"\n                        },\n                        className: \"vlist\",\n                        children: _jsxs(_components.span, {\n                          style: {\n                            top: \"-2.55em\",\n                            marginLeft: \"-.0785em\",\n                            marginRight: \".05em\"\n                          },\n                          children: [_jsx(_components.span, {\n                            style: {\n                              height: \"2.7em\"\n                            },\n                            className: \"pstrut\"\n                          }), _jsx(_components.span, {\n                            className: \"mtight reset-size6 size3 sizing\",\n                            children: _jsxs(_components.span, {\n                              className: \"mord mtight\",\n                              children: [_jsx(_components.span, {\n                                style: {\n                                  marginRight: \".03588em\"\n                                },\n                                className: \"mord mtight mathnormal\",\n                                children: \"g\"\n                              }), _jsx(_components.span, {\n                                className: \"mord mtight\",\n                                children: \"1\"\n                              })]\n                            })\n                          })]\n                        })\n                      }), _jsx(_components.span, {\n                        className: \"vlist-s\",\n                        children: \"‚Äã\"\n                      })]\n                    }), _jsx(_components.span, {\n                      className: \"vlist-r\",\n                      children: _jsx(_components.span, {\n                        style: {\n                          height: \".2861em\"\n                        },\n                        className: \"vlist\",\n                        children: _jsx(_components.span, {})\n                      })\n                    })]\n                  })\n                })]\n              })]\n            })\n          })]\n        })\n      }), \" and \", _jsx(_components.span, {\n        className: \"math math-inline\",\n        children: _jsxs(_components.span, {\n          className: \"katex\",\n          children: [_jsx(_components.span, {\n            className: \"katex-mathml\",\n            children: _jsx(_components.math, {\n              xmlns: \"http://www.w3.org/1998/Math/MathML\",\n              children: _jsxs(_components.semantics, {\n                children: [_jsx(_components.mrow, {\n                  children: _jsxs(_components.msub, {\n                    children: [_jsx(_components.mi, {\n                      children: \"I\"\n                    }), _jsxs(_components.mrow, {\n                      children: [_jsx(_components.mi, {\n                        children: \"g\"\n                      }), _jsx(_components.mn, {\n                        children: \"2\"\n                      })]\n                    })]\n                  })\n                }), _jsx(_components.annotation, {\n                  encoding: \"application/x-tex\",\n                  children: \"I_{g2}\"\n                })]\n              })\n            })\n          }), _jsx(_components.span, {\n            className: \"katex-html\",\n            \"aria-hidden\": \"true\",\n            children: _jsxs(_components.span, {\n              className: \"base\",\n              children: [_jsx(_components.span, {\n                style: {\n                  height: \".9694em\",\n                  verticalAlign: \"-.2861em\"\n                },\n                className: \"strut\"\n              }), _jsxs(_components.span, {\n                className: \"mord\",\n                children: [_jsx(_components.span, {\n                  style: {\n                    marginRight: \".07847em\"\n                  },\n                  className: \"mord mathnormal\",\n                  children: \"I\"\n                }), _jsx(_components.span, {\n                  className: \"msupsub\",\n                  children: _jsxs(_components.span, {\n                    className: \"vlist-t vlist-t2\",\n                    children: [_jsxs(_components.span, {\n                      className: \"vlist-r\",\n                      children: [_jsx(_components.span, {\n                        style: {\n                          height: \".3011em\"\n                        },\n                        className: \"vlist\",\n                        children: _jsxs(_components.span, {\n                          style: {\n                            top: \"-2.55em\",\n                            marginLeft: \"-.0785em\",\n                            marginRight: \".05em\"\n                          },\n                          children: [_jsx(_components.span, {\n                            style: {\n                              height: \"2.7em\"\n                            },\n                            className: \"pstrut\"\n                          }), _jsx(_components.span, {\n                            className: \"mtight reset-size6 size3 sizing\",\n                            children: _jsxs(_components.span, {\n                              className: \"mord mtight\",\n                              children: [_jsx(_components.span, {\n                                style: {\n                                  marginRight: \".03588em\"\n                                },\n                                className: \"mord mtight mathnormal\",\n                                children: \"g\"\n                              }), _jsx(_components.span, {\n                                className: \"mord mtight\",\n                                children: \"2\"\n                              })]\n                            })\n                          })]\n                        })\n                      }), _jsx(_components.span, {\n                        className: \"vlist-s\",\n                        children: \"‚Äã\"\n                      })]\n                    }), _jsx(_components.span, {\n                      className: \"vlist-r\",\n                      children: _jsx(_components.span, {\n                        style: {\n                          height: \".2861em\"\n                        },\n                        className: \"vlist\",\n                        children: _jsx(_components.span, {})\n                      })\n                    })]\n                  })\n                })]\n              })]\n            })\n          })]\n        })\n      }), \" which are convoluted images with two different Gaussian kernels. But ImageMagick applies convolution after subtracting and scaling two gaussian kernels.\"]\n    }), _jsx(_components.p, {\n      children: \"So, we will first subtract two different Gaussian kernels, scale and normalize the dog-kernel to the zero-summing kernel (sum of all elements ~ 0.0) and then apply convolution.\"\n    }), _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"python\",\n        \"data-theme\": \"default\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"python\",\n          \"data-theme\": \"default\",\n          children: [_jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#c678dd\"\n              },\n              children: \"def\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"normalize_kernel\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\",\n                fontStyle: \"italic\"\n              },\n              children: \"kernel\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\",\n                fontStyle: \"italic\"\n              },\n              children: \"k_width\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\",\n                fontStyle: \"italic\"\n              },\n              children: \"k_height\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\",\n                fontStyle: \"italic\"\n              },\n              children: \"scaling_factor\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" = \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"1.0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98c379\"\n              },\n              children: \"'''Zero-summing normalize kernel'''\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"K_EPS\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"1.0e-12\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#7f848e\",\n                fontStyle: \"italic\"\n              },\n              children: \"# positive and negative sum of kernel values\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    pos_range, neg_range \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"0\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"for\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" i \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"in\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"range\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(k_width \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" k_height):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"abs\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(kernel[i]) \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"K_EPS\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \":\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"            kernel[i] \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"0.0\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" kernel[i] \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \":\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"            neg_range \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"+=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" kernel[i]\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"else\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \":\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"            pos_range \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"+=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" kernel[i]\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#7f848e\",\n                fontStyle: \"italic\"\n              },\n              children: \"# scaling factor for positive and negative range\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    pos_scale, neg_scale \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" pos_range, \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"neg_range\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"abs\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(pos_range) \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"\u003e=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"K_EPS\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \":\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        pos_scale \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" pos_range\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"else\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \":\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        pos_sacle \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"1.0\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"abs\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(neg_range) \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"\u003e=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"K_EPS\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \":\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        neg_scale \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"1.0\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"else\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \":\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        neg_scale \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"neg_range\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    pos_scale \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" scaling_factor \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"/\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" pos_scale\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    neg_scale \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" scaling_factor \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"/\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" neg_scale\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#7f848e\",\n                fontStyle: \"italic\"\n              },\n              children: \"# scale kernel values for zero-summing kernel\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"for\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" i \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"in\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"range\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(k_width \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" k_height):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" (\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"not\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" np.nan \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"==\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" kernel[i]):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"            kernel[i] \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"*=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" pos_scale \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" kernel[i] \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"\u003e=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"else\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" neg_scale\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"            \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"return\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" kernel\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#c678dd\"\n              },\n              children: \"def\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"dog\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\",\n                fontStyle: \"italic\"\n              },\n              children: \"img\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\",\n                fontStyle: \"italic\"\n              },\n              children: \"k_size\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\",\n                fontStyle: \"italic\"\n              },\n              children: \"sigma_1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\",\n                fontStyle: \"italic\"\n              },\n              children: \"sigma_2\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98c379\"\n              },\n              children: \"'''Difference of Gaussian by subtracting kernel 1 and kernel 2'''\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    k_width \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" k_height \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" k_size\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    x \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" y \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" (k_width \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \") \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"//\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"2\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    kernel \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" np.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"zeros\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(k_width \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" k_height)\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#7f848e\",\n                fontStyle: \"italic\"\n              },\n              children: \"# first gaussian kernal\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" sigma_1 \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \":\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        co_1 \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"/\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" (\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"2\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" sigma_1 \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" sigma_1)\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        co_2 \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"/\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" (\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"2\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" np.pi \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" sigma_1 \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" sigma_1)\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        i \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"0\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"for\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" v \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"in\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"range\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"y, y \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"+\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"            \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"for\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" u \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"in\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"range\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"x, x \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"+\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"                kernel[i] \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" np.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"exp\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(u\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"u \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"+\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" v\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"v) \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" co_1) \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" co_2\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"                i \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"+=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"1\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#7f848e\",\n                fontStyle: \"italic\"\n              },\n              children: \"# unity kernel\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"else\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \":\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        kernel[x \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"+\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" y \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" k_width] \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"1.0\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#7f848e\",\n                fontStyle: \"italic\"\n              },\n              children: \"# subtract second gaussian from kernel\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" sigma_2 \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \":\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        co_1 \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"/\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" (\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"2\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" sigma_2 \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" sigma_2)\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        co_2 \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"/\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" (\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"2\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" np.pi \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" sigma_2 \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" sigma_2)\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        i \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"0\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"for\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" v \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"in\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"range\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"y, y \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"+\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"            \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"for\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" u \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"in\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"range\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"x, x \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"+\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"                kernel[i] \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"-=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" np.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"exp\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(u\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"u \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"+\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" v\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"v) \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" co_1) \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" co_2\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"                i \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"+=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"1\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#7f848e\",\n                fontStyle: \"italic\"\n              },\n              children: \"# unity kernel\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"else\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \":\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        kernel[x \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"+\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" y \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" k_width] \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"-=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"1.0\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#7f848e\",\n                fontStyle: \"italic\"\n              },\n              children: \"# zero-normalize scling kernel with scaling factor 1.0\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    norm_kernel \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"normalize_kernel\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(kernel, k_width, k_height, \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#e06c75\",\n                fontStyle: \"italic\"\n              },\n              children: \"scaling_factor\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"1.0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \")\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#7f848e\",\n                fontStyle: \"italic\"\n              },\n              children: \"# apply filter with norm_kernel\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"return\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" cv2.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"filter2D\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(img, \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \", norm_kernel.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"reshape\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(k_width, k_height))\"\n            })]\n          })]\n        })\n      })\n    }), _jsxs(_components.p, {\n      children: [\"Get Difference of Gaussian (DoG) for image by calling \", _jsx(_components.em, {\n        children: \"dog()\"\n      }), \" function with \", _jsx(_components.strong, {\n        children: \"radius = 15, sigma_1 = 100, sigma_2 = 0\"\n      }), \". Here \", _jsx(_components.strong, {\n        children: \"radius = 15\"\n      }), \" for both kernels, for first kernel, \", _jsx(_components.strong, {\n        children: \"sigma = 100\"\n      }), \", and for second kernel, \", _jsx(_components.strong, {\n        children: \"sigma = 0\"\n      }), \". Kernel with \", _jsx(_components.strong, {\n        children: \"sigma = 0\"\n      }), \" creates unity kernel means convolution with this kernel gives same image.\"]\n    }), _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"python\",\n        \"data-theme\": \"default\",\n        children: _jsx(_components.code, {\n          \"data-language\": \"python\",\n          \"data-theme\": \"default\",\n          children: _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"dog_img \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"dog\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(img, \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"15\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"100\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \")\"\n            })]\n          })\n        })\n      })\n    }), _jsx(_components.p, {\n      children: \"After applying DoG, the resultant image looks like\"\n    }), _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        alt: \"Difference of Gaussian (DoG) Image:=:70:=:Difference of Gaussian (DoG) image\",\n        src: \"whiteboard-enhance/difference-of-gaussian.jpg\"\n      })\n    }), _jsx(_components.hr, {}), _jsx(_components.h3, {\n      id: \"negative-image\",\n      children: _jsx(_components.a, {\n        href: \"#negative-image\",\n        className: \"anchor no-underline flex items-center before:-translate-x-[8px] before:-ml-[20px] before:bg-no-repeat before:bg-contain before:w-[20px] before:h-[20px] before:content-[''] hover:before:bg-[url('/link.svg')]\",\n        children: \"Negative Image\"\n      })\n    }), _jsxs(_components.p, {\n      children: [\"For \", _jsx(_components.span, {\n        className: \"math math-inline\",\n        children: _jsxs(_components.span, {\n          className: \"katex\",\n          children: [_jsx(_components.span, {\n            className: \"katex-mathml\",\n            children: _jsx(_components.math, {\n              xmlns: \"http://www.w3.org/1998/Math/MathML\",\n              children: _jsxs(_components.semantics, {\n                children: [_jsx(_components.mrow, {\n                  children: _jsxs(_components.msub, {\n                    children: [_jsx(_components.mi, {\n                      children: \"I\"\n                    }), _jsxs(_components.mrow, {\n                      children: [_jsx(_components.mi, {\n                        children: \"d\"\n                      }), _jsx(_components.mi, {\n                        children: \"o\"\n                      }), _jsx(_components.mi, {\n                        children: \"g\"\n                      })]\n                    })]\n                  })\n                }), _jsx(_components.annotation, {\n                  encoding: \"application/x-tex\",\n                  children: \"I_{dog}\"\n                })]\n              })\n            })\n          }), _jsx(_components.span, {\n            className: \"katex-html\",\n            \"aria-hidden\": \"true\",\n            children: _jsxs(_components.span, {\n              className: \"base\",\n              children: [_jsx(_components.span, {\n                style: {\n                  height: \".9694em\",\n                  verticalAlign: \"-.2861em\"\n                },\n                className: \"strut\"\n              }), _jsxs(_components.span, {\n                className: \"mord\",\n                children: [_jsx(_components.span, {\n                  style: {\n                    marginRight: \".07847em\"\n                  },\n                  className: \"mord mathnormal\",\n                  children: \"I\"\n                }), _jsx(_components.span, {\n                  className: \"msupsub\",\n                  children: _jsxs(_components.span, {\n                    className: \"vlist-t vlist-t2\",\n                    children: [_jsxs(_components.span, {\n                      className: \"vlist-r\",\n                      children: [_jsx(_components.span, {\n                        style: {\n                          height: \".3361em\"\n                        },\n                        className: \"vlist\",\n                        children: _jsxs(_components.span, {\n                          style: {\n                            top: \"-2.55em\",\n                            marginLeft: \"-.0785em\",\n                            marginRight: \".05em\"\n                          },\n                          children: [_jsx(_components.span, {\n                            style: {\n                              height: \"2.7em\"\n                            },\n                            className: \"pstrut\"\n                          }), _jsx(_components.span, {\n                            className: \"mtight reset-size6 size3 sizing\",\n                            children: _jsxs(_components.span, {\n                              className: \"mord mtight\",\n                              children: [_jsx(_components.span, {\n                                className: \"mord mtight mathnormal\",\n                                children: \"d\"\n                              }), _jsx(_components.span, {\n                                className: \"mord mtight mathnormal\",\n                                children: \"o\"\n                              }), _jsx(_components.span, {\n                                style: {\n                                  marginRight: \".03588em\"\n                                },\n                                className: \"mord mtight mathnormal\",\n                                children: \"g\"\n                              })]\n                            })\n                          })]\n                        })\n                      }), _jsx(_components.span, {\n                        className: \"vlist-s\",\n                        children: \"‚Äã\"\n                      })]\n                    }), _jsx(_components.span, {\n                      className: \"vlist-r\",\n                      children: _jsx(_components.span, {\n                        style: {\n                          height: \".2861em\"\n                        },\n                        className: \"vlist\",\n                        children: _jsx(_components.span, {})\n                      })\n                    })]\n                  })\n                })]\n              })]\n            })\n          })]\n        })\n      }), \", get a negative image which is just an inversion of colors (255 - image).\"]\n    }), _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"python\",\n        \"data-theme\": \"default\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"python\",\n          \"data-theme\": \"default\",\n          children: [_jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#c678dd\"\n              },\n              children: \"def\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"negate\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\",\n                fontStyle: \"italic\"\n              },\n              children: \"img\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98c379\"\n              },\n              children: \"'''Negative of image'''\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"return\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" cv2.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"bitwise_not\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(img)\"\n            })]\n          })]\n        })\n      })\n    }), _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"python\",\n        \"data-theme\": \"default\",\n        children: _jsx(_components.code, {\n          \"data-language\": \"python\",\n          \"data-theme\": \"default\",\n          children: _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"negative_img \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"negate\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(dog_img)\"\n            })]\n          })\n        })\n      })\n    }), _jsxs(_components.p, {\n      children: [\"The result of the inversion image is \", _jsx(_components.img, {\n        alt: \"Negative image:=:70:=:Negative image\",\n        src: \"whiteboard-enhance/negative.jpg\"\n      })]\n    }), _jsx(_components.p, {\n      children: \"Image content is not much visible as we inverted an image whose most of the pixels are black. So, to improve the contrast, we apply contrast-stretch enhancement for the negative image.\"\n    }), _jsx(_components.hr, {}), _jsx(_components.h3, {\n      id: \"contrast-stretching\",\n      children: _jsx(_components.a, {\n        href: \"#contrast-stretching\",\n        className: \"anchor no-underline flex items-center before:-translate-x-[8px] before:-ml-[20px] before:bg-no-repeat before:bg-contain before:w-[20px] before:h-[20px] before:content-[''] hover:before:bg-[url('/link.svg')]\",\n        children: \"Contrast Stretching\"\n      })\n    }), _jsx(_components.p, {\n      children: \"Contrast stretching of an image is the same as histogram equalization but we cap some percentage of pixel values to black (0) and white (255).\"\n    }), _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"python\",\n        \"data-theme\": \"default\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"python\",\n          \"data-theme\": \"default\",\n          children: [_jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#c678dd\"\n              },\n              children: \"def\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"get_black_white_indices\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\",\n                fontStyle: \"italic\"\n              },\n              children: \"hist\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\",\n                fontStyle: \"italic\"\n              },\n              children: \"tot_count\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\",\n                fontStyle: \"italic\"\n              },\n              children: \"black_count\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\",\n                fontStyle: \"italic\"\n              },\n              children: \"white_count\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98c379\"\n              },\n              children: \"'''Blacking and Whiting out indices same as color balance'''\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    black_ind \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"0\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    white_ind \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"255\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    co \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"0\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"for\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" i \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"in\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"range\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"len\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(hist)):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        co \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"+=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" hist[i]\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" co \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" black_count:\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"            black_ind \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" i\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"            \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"break\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"            \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    co \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"0\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"for\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" i \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"in\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"range\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"len\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(hist) \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        co \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"+=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" hist[i]\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" co \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" (tot_count \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" white_count):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"            white_ind \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" i\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"            \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"break\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"return\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" [black_ind, white_ind]\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#c678dd\"\n              },\n              children: \"def\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"contrast_stretch\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\",\n                fontStyle: \"italic\"\n              },\n              children: \"img\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\",\n                fontStyle: \"italic\"\n              },\n              children: \"black_point\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\",\n                fontStyle: \"italic\"\n              },\n              children: \"white_point\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98c379\"\n              },\n              children: \"'''Contrast stretch image with black and white cap'''\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    tot_count \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" img.shape[\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"] \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" img.shape[\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"]\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    black_count \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" tot_count \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" black_point \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"/\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"100\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    white_count\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" tot_count \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" white_point \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"/\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"100\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    ch_hists \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" []\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#7f848e\",\n                fontStyle: \"italic\"\n              },\n              children: \"# calculate histogram for each channel\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"for\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" ch \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"in\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" cv2.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"split\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(img):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        ch_hists.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"append\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(cv2.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"calcHist\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"([ch], [\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"], \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"None\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \", [\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"256\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"], (\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"256\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \")).\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"flatten\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"().\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"tolist\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"())\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#7f848e\",\n                fontStyle: \"italic\"\n              },\n              children: \"# get black and white percentage indices\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    black_white_indices \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" []\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"for\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" hist \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"in\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" ch_hists:\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        black_white_indices.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"append\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"get_black_white_indices\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(hist, tot_count, black_count, white_count))\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    stretch_map \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" np.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"zeros\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"((\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"3\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"256\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"), \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#e06c75\",\n                fontStyle: \"italic\"\n              },\n              children: \"dtype\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98c379\"\n              },\n              children: \"'uint8'\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \")\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#7f848e\",\n                fontStyle: \"italic\"\n              },\n              children: \"# stretch histogram \"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"for\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" curr_ch \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"in\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"range\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"len\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(black_white_indices)):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        black_ind, white_ind \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" black_white_indices[curr_ch]\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"for\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" i \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"in\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"range\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(stretch_map.shape[\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"]):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"            \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" i \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" black_ind:\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"                stretch_map[curr_ch][i] \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"0\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"            \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"else\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \":\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"                \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" i \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" white_ind:\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"                    stretch_map[curr_ch][i] \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"255\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"                \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"else\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \":\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"                    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" (white_ind \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" black_ind) \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \":\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"                        stretch_map[curr_ch][i] \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"round\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"((i \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" black_ind) \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"/\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" (white_ind \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" black_ind)) \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"255\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"                    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"else\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \":\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"                        stretch_map[curr_ch][i] \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"0\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#7f848e\",\n                fontStyle: \"italic\"\n              },\n              children: \"# stretch image\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    ch_stretch \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" []\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"for\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" i, ch \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"in\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"enumerate\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(cv2.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"split\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(img)):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        ch_stretch.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"append\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(cv2.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"LUT\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(ch, stretch_map[i]))\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"return\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" cv2.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"merge\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(ch_stretch)\"\n            })]\n          })]\n        })\n      })\n    }), _jsxs(_components.p, {\n      children: [\"For each image channel, calculate cummulative histogram sum, and then cap pixels based on \", _jsx(_components.strong, {\n        children: \"black_point = 2\"\n      }), \" and \", _jsx(_components.strong, {\n        children: \"white_point = 99.5\"\n      }), \" percentage.\"]\n    }), _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"python\",\n        \"data-theme\": \"default\",\n        children: _jsx(_components.code, {\n          \"data-language\": \"python\",\n          \"data-theme\": \"default\",\n          children: _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"contrast_stretch_img \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"contrast_stretch\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(negative_img, \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"2\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"99.5\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \")\"\n            })]\n          })\n        })\n      })\n    }), _jsx(_components.p, {\n      children: \"Negative image after contrast stretching is\"\n    }), _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        alt: \"Contrast stretch image:=:70:=:Contrast strech image\",\n        src: \"whiteboard-enhance/contrast-stretch.jpg\"\n      })\n    }), _jsx(_components.hr, {}), _jsx(_components.h3, {\n      id: \"gaussin-blur--gamma-correction\",\n      children: _jsx(_components.a, {\n        href: \"#gaussin-blur--gamma-correction\",\n        className: \"anchor no-underline flex items-center before:-translate-x-[8px] before:-ml-[20px] before:bg-no-repeat before:bg-contain before:w-[20px] before:h-[20px] before:content-[''] hover:before:bg-[url('/link.svg')]\",\n        children: \"Gaussin Blur \u0026 Gamma Correction\"\n      })\n    }), _jsx(_components.p, {\n      children: \"Contrast stretching image contains noise, so blur the image with Gaussian kernel. As Gaussian distribution kernel can be linearly separable, we apply convolution with the same 1D-kernel along the x-axis and y-axis for performance (negligible for small kernels and low-res images).\"\n    }), _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"python\",\n        \"data-theme\": \"default\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"python\",\n          \"data-theme\": \"default\",\n          children: [_jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#c678dd\"\n              },\n              children: \"def\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"fast_gaussian_blur\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\",\n                fontStyle: \"italic\"\n              },\n              children: \"img\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\",\n                fontStyle: \"italic\"\n              },\n              children: \"ksize\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\",\n                fontStyle: \"italic\"\n              },\n              children: \"sigma\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98c379\"\n              },\n              children: \"'''Gussian blur using linear separable property of Gaussian distribution'''\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    kernel_1d \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" cv2.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"getGaussianKernel\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(ksize, sigma)\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"return\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" cv2.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"sepFilter2D\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(img, \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \", kernel_1d, kernel_1d)\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#c678dd\"\n              },\n              children: \"def\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"gamma\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\",\n                fontStyle: \"italic\"\n              },\n              children: \"img\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\",\n                fontStyle: \"italic\"\n              },\n              children: \"gamma_value\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98c379\"\n              },\n              children: \"'''Gamma correction of image'''\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    i_gamma \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"/\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" gamma_value\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    lut \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" np.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"array\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"([((i \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"/\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"255\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \") \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"**\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" i_gamma) \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"255\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"for\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" i \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"in\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" np.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"arange\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"256\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \")], \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#e06c75\",\n                fontStyle: \"italic\"\n              },\n              children: \"dtype\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98c379\"\n              },\n              children: \"'uint8'\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \")\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"return\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" cv2.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"LUT\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(img, lut)\"\n            })]\n          })]\n        })\n      })\n    }), _jsxs(_components.p, {\n      children: [\"Apply Gaussian blur with \", _jsx(_components.strong, {\n        children: \"kernel_size = 3\"\n      }), \" and \", _jsx(_components.strong, {\n        children: \"sigma = 1\"\n      }), \".\"]\n    }), _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"python\",\n        \"data-theme\": \"default\",\n        children: _jsx(_components.code, {\n          \"data-language\": \"python\",\n          \"data-theme\": \"default\",\n          children: _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"blur_img \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"fast_gaussian_blur\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(contrast_stretch_img, \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"3\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \")\"\n            })]\n          })\n        })\n      })\n    }), _jsx(_components.p, {\n      children: \"Blurred image after noise suppression is\"\n    }), _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        alt: \"Gaussian blur image:=:70:=:Blurred image\",\n        src: \"whiteboard-enhance/gaussian-blur.jpg\"\n      })\n    }), _jsxs(_components.p, {\n      children: [\"Now apply Gamma correction to enhance the blurred image with \", _jsx(_components.strong, {\n        children: \"gamma_value = 1.1\"\n      }), \".\"]\n    }), _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"python\",\n        \"data-theme\": \"default\",\n        children: _jsx(_components.code, {\n          \"data-language\": \"python\",\n          \"data-theme\": \"default\",\n          children: _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"gamma_img \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"gamma\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(blur_img, \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"1.1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \")\"\n            })]\n          })\n        })\n      })\n    }), _jsx(_components.p, {\n      children: \"Blurred image Gamma corrected looks like\"\n    }), _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        alt: \"Gamma correction:=:70:=:Gamma corrected image\",\n        src: \"whiteboard-enhance/gamma-correction.jpg\"\n      })\n    }), _jsx(_components.hr, {}), _jsx(_components.h3, {\n      id: \"color-balance\",\n      children: _jsx(_components.a, {\n        href: \"#color-balance\",\n        className: \"anchor no-underline flex items-center before:-translate-x-[8px] before:-ml-[20px] before:bg-no-repeat before:bg-contain before:w-[20px] before:h-[20px] before:content-[''] hover:before:bg-[url('/link.svg')]\",\n        children: \"Color Balance\"\n      })\n    }), _jsxs(_components.p, {\n      children: [\"Color balance of an image is same as contrast-stretching method above but they are different in implementation. Above contrast-stretching is an implementation based on \", _jsx(_components.a, {\n        href: \"https://imagemagick.org/api/MagickCore/enhance_8c.html\",\n        children: \"ImageMagick-ContrastStretchImage()\"\n      }), \", and \", _jsx(_components.a, {\n        href: \"https://gist.github.com/DavidYKay/9dad6c4ab0d8d7dbf3dc\",\n        children: \"color balance\"\n      }), \" is based on \", _jsx(_components.a, {\n        href: \"https://www.ipol.im/pub/art/2011/llmps-scb/article.pdf\",\n        children: \"Simplest Color Balance\"\n      }), \".\"]\n    }), _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"python\",\n        \"data-theme\": \"default\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"python\",\n          \"data-theme\": \"default\",\n          children: [_jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#c678dd\"\n              },\n              children: \"def\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"color_balance\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\",\n                fontStyle: \"italic\"\n              },\n              children: \"img\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\",\n                fontStyle: \"italic\"\n              },\n              children: \"low_per\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\",\n                fontStyle: \"italic\"\n              },\n              children: \"high_per\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98c379\"\n              },\n              children: \"'''Contrast stretch image by histogram equilization with black and white cap'''\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    tot_pix \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" img.shape[\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"] \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" img.shape[\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"]\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#7f848e\",\n                fontStyle: \"italic\"\n              },\n              children: \"# no.of pixels to black-out and white-out\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    low_count \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" tot_pix \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" low_per \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"/\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"100\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    high_count \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" tot_pix \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" (\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"100\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" high_per) \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"/\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"100\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    cs_img \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" []\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#7f848e\",\n                fontStyle: \"italic\"\n              },\n              children: \"# for each channel, apply contrast-stretch\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"for\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" ch \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"in\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" cv2.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"split\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(img):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#7f848e\",\n                fontStyle: \"italic\"\n              },\n              children: \"# cummulative histogram sum of channel\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        cum_hist_sum \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" np.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"cumsum\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(cv2.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"calcHist\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"([ch], [\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"], \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"None\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \", [\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"256\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"], (\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"256\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \")))\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#7f848e\",\n                fontStyle: \"italic\"\n              },\n              children: \"# find indices for blacking and whiting out pixels\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        li, hi \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" np.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"searchsorted\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(cum_hist_sum, (low_count, high_count))\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" (li \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"==\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" hi):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"            cs_img.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"append\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(ch)\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"            \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"continue\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#7f848e\",\n                fontStyle: \"italic\"\n              },\n              children: \"# lut with min-max normalization for [0-255] bins\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        lut \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" np.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"array\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"([\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" i \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" li \"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"                        \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"else\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" (\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"255\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" i \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" hi \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"else\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"round\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"((i \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" li) \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"/\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" (hi \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"-\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" li) \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"*\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"255\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \")) \"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"                        \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"for\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" i \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"in\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" np.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"arange\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"256\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \")], \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#e06c75\",\n                fontStyle: \"italic\"\n              },\n              children: \"dtype\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98c379\"\n              },\n              children: \"'uint8'\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \")\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#7f848e\",\n                fontStyle: \"italic\"\n              },\n              children: \"# constrast-stretch channel\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        cs_ch \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" cv2.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"LUT\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(ch, lut)\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        cs_img.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"append\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(cs_ch)\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"        \"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#c678dd\",\n                fontStyle: \"italic\"\n              },\n              children: \"return\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" cv2.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"merge\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(cs_img)\"\n            })]\n          })]\n        })\n      })\n    }), _jsxs(_components.p, {\n      children: [\"Enhance image by passing Gamma corrected image to \", _jsx(_components.strong, {\n        children: \"color_balance()\"\n      }), \" with parameters \", _jsx(_components.strong, {\n        children: \"low_per = 2\"\n      }), \" and \", _jsx(_components.strong, {\n        children: \"high_per = 1\"\n      }), \".\"]\n    }), _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"python\",\n        \"data-theme\": \"default\",\n        children: _jsx(_components.code, {\n          \"data-language\": \"python\",\n          \"data-theme\": \"default\",\n          children: _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"color_balanced_img \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56b6c2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61afef\"\n              },\n              children: \"color_balance\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"(gamma_img, \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"2\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#d19a66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \")\"\n            })]\n          })\n        })\n      })\n    }), _jsxs(_components.p, {\n      children: [\"The final enhanced whiteboard image is \", _jsx(_components.img, {\n        alt: \"Whiteboard image enhance:=:70:=:Whiteboard image enhanced\",\n        src: \"whiteboard-enhance/whiteboard-image-enhanced.jpg\"\n      })]\n    }), _jsxs(_components.p, {\n      children: [\"You can find out full code at my Github repository file \", _jsx(_components.a, {\n        href: \"https://github.com/santhalakshminarayana/whiteboard-image-enhance/blob/main/whiteboard_image_enhance.py\",\n        children: \"whiteboard_image_enhance.py\"\n      })]\n    }), _jsx(_components.hr, {}), _jsx(_components.h2, {\n      id: \"results\",\n      children: _jsx(_components.a, {\n        href: \"#results\",\n        className: \"anchor no-underline flex items-center before:-translate-x-[8px] before:-ml-[20px] before:bg-no-repeat before:bg-contain before:w-[20px] before:h-[20px] before:content-[''] hover:before:bg-[url('/link.svg')]\",\n        children: \"Results\"\n      })\n    }), _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        alt: \"img_2:=:100\",\n        src: \"whiteboard-enhance/img_2.jpg\"\n      })\n    }), _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        alt: \"img_3:=:100\",\n        src: \"whiteboard-enhance/img_3.jpg\"\n      })\n    }), _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        alt: \"img_4:=:100\",\n        src: \"whiteboard-enhance/img_4.jpg\"\n      })\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{"title":"Whiteboard Image Enhancement using OpenCV","description":"Enhance whiteboard images taken from mobile using OpenCV.","imgName":"whiteboard-enhance/whiteboard-image-enhancement.jpg","date":"Oct 19, 2021","tags":["image-processing","opencv"],"keywords":["whiteboard","whiteboard-enhance","image-enhance","image-processing","opencv","python","difference-of-guassian","dog","contrast-stretch","color-balance"]},"scope":{}},"metadata":{"title":"Whiteboard Image Enhancement using OpenCV","description":"Enhance whiteboard images taken from mobile using OpenCV.","imgName":"whiteboard-enhance/whiteboard-image-enhancement.jpg","date":"Oct 19, 2021","tags":["image-processing","opencv"],"keywords":["whiteboard","whiteboard-enhance","image-enhance","image-processing","opencv","python","difference-of-guassian","dog","contrast-stretch","color-balance"],"slug":"test/whiteboard-image-enhancement-opencv-python","fileName":"test/whiteboard-image-enhancement-opencv-python.mdx"}},"__N_SSG":true},"page":"/posts/[...id]","query":{"id":["test","whiteboard-image-enhancement-opencv-python"]},"buildId":"wLbKHDjsTq4ptH3Qik8ah","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>