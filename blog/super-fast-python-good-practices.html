<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/d1badd60176fde42.css" as="style"/><link rel="stylesheet" href="/_next/static/css/d1badd60176fde42.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee7e63bc15b31913.js" defer=""></script><script src="/_next/static/chunks/framework-2c79e2a64abdb08b.js" defer=""></script><script src="/_next/static/chunks/main-83cebdb887f48834.js" defer=""></script><script src="/_next/static/chunks/pages/_app-345b94f8f1e5ff8a.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bid%5D-ccc782783812f80b.js" defer=""></script><script src="/_next/static/xoNIx0NwSZAFbSAX6tcfK/_buildManifest.js" defer=""></script><script src="/_next/static/xoNIx0NwSZAFbSAX6tcfK/_ssgManifest.js" defer=""></script></head><body><div id="__next"><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><div class="transition-colors duration-300 min-h-screen select-none"><nav class="sticky inset-0 z-20 bg-white dark:bg-gray-900 py-4 shadow border-solid border-t-2 border-blue-700"><div class="w-full lg:container lg:mx-auto lg:flex lg:px-8 items-center justify-between"><div class="container mx-auto flex justify-between w-full px-8 pb-5 lg:pb-0 lg:px-0 lg:w-auto"><div class="pl-1 lg:pl-0 flex items-center flex-shrink-0 text-gray-800 dark:text-gray-100"><img src="/logo.svg" height="30" width="150"/></div><div class="block lg:hidden"><button id="nav" class="flex items-center px-3 py-2 border-2 rounded text-blue-700 border-blue-700 hover:text-blue-700 hover:border-blue-700"><svg class="fill-current h-3 w-3" viewBox="0 0 20 20" xmlns="https://www.w3.org/2000/svg"><title>Menu</title><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"></path></svg></button></div></div><div class="w-full border-solid border-b-2 border-gray-300 lg:border-b-0 lg:hidden"></div><div class="hidden menu w-full lg:block flex-grow lg:flex lg:items-center lg:w-auto lg:pl-3 lg:pr-0 px-8"><div class="text-md font-bold text-gray-700 dark:text-blue-300 lg:flex-grow"><a href="/"><p class="block mt-4 lg:inline-block lg:mt-0 px-3 py-2 rounded mr-1 hover:text-blue-700 cursor-pointer">Home</p></a><a href="/about"><p class="block mt-4 lg:inline-block lg:mt-0 px-3 py-2 rounded mr-1 hover:text-blue-700 cursor-pointer">About</p></a><a href="/contact"><p class="block mt-4 lg:inline-block lg:mt-0 px-3 py-2 rounded mr-1 hover:text-blue-700 cursor-pointer"><span>Contact</span></p></a><div class="relative inline"><a href="#responsive-header"><p class="text-blue-700 block mt-4 lg:inline-block lg:mt-0 px-3 py-2 rounded hover:text-blue-700 cursor-pointer"><span>Blog</span><span class="ml-2 font-size inline-block"> <svg xmlns="https://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></span></p></a><div class="hidden bg-white shadow-md rounded border border-gray-300 text-sm absolute top-auto left-0 min-w-full w-56 z-30 mt-1"><span class="absolute top-0 left-0 w-3 h-3 bg-white border transform rotate-45 -mt-1 ml-6"></span><div class="bg-white rounded w-full relative z-10 py-1"><ul class="list-reset"><li class="relative"><a class="px-4 py-2 flex w-full items-start hover:bg-gray-100 no-underline hover:no-underline transition-colors duration-100 cursor-pointer" href="/blogs/blog-1"><div class="px-4 py-2 inline flex w-full items-start hover:bg-gray-100 no-underline hover:no-underline transition-colors duration-100 cursor-pointer"><span class="flex-1">Blog 1</span></div></a></li><li class="relative"><a href="/blogs/blog-2"><div class="px-4 py-2 inline flex w-full items-start hover:bg-gray-100 no-underline hover:no-underline transition-colors duration-100 cursor-pointer"><span class="flex-1">Blog 2</span></div></a></li><li class="relative"><a class="px-4 py-2 flex w-full items-start hover:bg-gray-100 no-underline hover:no-underline transition-colors duration-100 cursor-pointer" href="/blogs/blog-3"><div class="px-4 py-2 inline flex w-full items-start hover:bg-gray-100 no-underline hover:no-underline transition-colors duration-100 cursor-pointer"><span class="flex-1">Blog 3</span></div></a></li></ul></div></div></div></div><div class="mt-4 lg:mt-0 lg:mr-2"></div><div class="text-center lg:flex"><a href="/sign-in"><p class="block text-md px-3 py-2 dark:text-blue-300 font-bold mt-4 hover:text-blue-700 dark:hover:text-blue-700 lg:mt-0 cursor-pointer">Sign in</p></a></div></div></div></nav><main class="pt-10"><div class="p-4 flex justify-center"><div class="w-11/12 md:w-7/12 prose prose-table"><article><p><img src="super-fast-python-good-practices/super-fast-python-good-practices.jpg" alt="Super fast Python: Good Practices"/></p>
<h1>Super fast Python (Part-2): Good practices</h1>
<p>In the earlier post on <a href="https://santhalakshminarayana.github.io/blog/super-fast-python-why-python-slow">why Python is slow?</a>, we discussed slowness is in Python due to its internal design of some essential components like GIL, dynamic typing, and interpretation.</p>
<p>In this blog, we discuss some good practices to speed up Python incredibly faster.</p>
<p>This is the second post in the series on Python performance and Optimization. The series points out the utilization of inbuilt libraries, low-level code conversions, and other Python implementations to speed-up Python. The other posts included in this series are</p>
<ul>
<li>(Part-1): <a href="https://santhalakshminarayana.github.io/blog/super-fast-python-why-python-slow">Why Python is slow?</a></li>
<li>(Part-2): Good practices to write fast Python code (this post)</li>
<li>(Part-3): <a href="https://santhalakshminarayana.github.io/blog/super-fast-python-multi-processing">Multi-processing in Python</a></li>
<li>(Part-4): <a href="https://santhalakshminarayana.github.io/blog/super-fast-python-cython">Use Cython to get speed as fast as C</a></li>
<li>(Part-5): <a href="https://santhalakshminarayana.github.io/blog/super-fast-python-numba">Use Numba to speed up Python Functions and Numeric calculations</a></li>
</ul>
<p>The following section describes the various good practices one can use to make Python super speed (up to 30% or more) without any external support like PyPy, Cython, Numpy, etc.</p>
<h2>Python good practices for super fast code</h2>
<h3>Use built-in data structures and libraries</h3>
<p>As Python data types are implemented directly in <strong>C</strong>, using the built-in types like list, map, and trees, compared to custom types we define, really helps the program to run faster.</p>
<p>Also, use built-in libraries for common algorithms like counting the duplicates, summing all list elements, finding the maximum element, etc, because these are all already written in <strong>C</strong> and compiled which makes these functions run faster than custom functions we write.</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="python" data-theme="default"><code data-language="python" data-theme="default"><span class="line"><span style="color:#C678DD;font-style:italic">from</span><span style="color:#ABB2BF"> random </span><span style="color:#C678DD;font-style:italic">import</span><span style="color:#ABB2BF"> randint</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#ABB2BF">rand_nums </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> [</span><span style="color:#61AFEF">randint</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">1</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">100</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD;font-style:italic">for</span><span style="color:#ABB2BF"> _ </span><span style="color:#C678DD;font-style:italic">in</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">range</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">100000</span><span style="color:#ABB2BF">)]</span></span></code></pre></div>
<p>Create 100000 random numbers between 1 and 100.</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="python" data-theme="default"><code data-language="python" data-theme="default"><span class="line"><span style="color:#56B6C2">%%</span><span style="color:#ABB2BF">timeit</span></span>
<span class="line"><span style="color:#ABB2BF">cc </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">0</span></span>
<span class="line"><span style="color:#C678DD;font-style:italic">for</span><span style="color:#ABB2BF"> i </span><span style="color:#C678DD;font-style:italic">in</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">range</span><span style="color:#ABB2BF">(</span><span style="color:#56B6C2">len</span><span style="color:#ABB2BF">(rand_nums)):</span></span>
<span class="line"><span style="color:#ABB2BF">    cc </span><span style="color:#56B6C2">+=</span><span style="color:#ABB2BF"> rand_nums[i]</span></span></code></pre></div>
<div data-rehype-pretty-code-fragment=""><pre data-language="python:output" data-theme="default"><code data-language="python:output" data-theme="default"><span class="line"><span style="color:#abb2bf">6.02 ms ± 94 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)</span></span></code></pre></div>
<p>Manually summing up the all numbers over running a loop takes approximately 6ms.</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="python" data-theme="default"><code data-language="python" data-theme="default"><span class="line"><span style="color:#56B6C2">%%</span><span style="color:#ABB2BF">timeit</span></span>
<span class="line"><span style="color:#ABB2BF">cc </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">sum</span><span style="color:#ABB2BF">(rand_nums)</span></span></code></pre></div>
<div data-rehype-pretty-code-fragment=""><pre data-language="python:output" data-theme="default"><code data-language="python:output" data-theme="default"><span class="line"><span style="color:#abb2bf">332 µs ± 15 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)</span></span></code></pre></div>
<p>Using built-in <em>sum()</em> takes only 0.3ms approximately.</p>
<h3>Local Variables vs Global Variables</h3>
<p>When we call a function (a routine), the system pauses the code execution at the call site in the current routine (say <strong>main()</strong>) where the call has been made and places the called function at the top of the call stack. Imagine if we have defined numerous global variables and made multiple function calls. The system has to make sure that all these global variables should be available for any routine placed in the call stack at all times. The system has to provide a lookup mechanism for both local and global variables for each routine. And with global variables, this lookup mechanism may take some time than local variables.</p>
<h3>Import the sub-modules and functions directly</h3>
<p>When importing any module to use its sub-modules, classes, or functions, import them directly instead of importing just the module. When accessing objects using <em>.</em>, it triggers dictionary lookup using <em>__getattribute__</em>. If we call the object multiple times using <em>.</em>, that may increase the program time.</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="python" data-theme="default"><code data-language="python" data-theme="default"><span class="line"><span style="color:#7F848E;font-style:italic"># instead of this</span></span>
<span class="line"><span style="color:#C678DD;font-style:italic">import</span><span style="color:#ABB2BF"> abc</span></span>
<span class="line"><span style="color:#ABB2BF">def_obj </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> abc.</span><span style="color:#61AFEF">Def</span><span style="color:#ABB2BF">()</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#7F848E;font-style:italic"># do this</span></span>
<span class="line"><span style="color:#C678DD;font-style:italic">from</span><span style="color:#ABB2BF"> abc </span><span style="color:#C678DD;font-style:italic">import</span><span style="color:#ABB2BF"> Def</span></span>
<span class="line"><span style="color:#ABB2BF">def_obj </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">Def</span><span style="color:#ABB2BF">()</span></span></code></pre></div>
<h3>Limit the usage of &#x27;.&#x27;</h3>
<p>Speaking of the lookup time with the module&#x27;s object references, the same can be applied to the referencing of properties and functions of an object(both custom and in-built).</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="python" data-theme="default"><code data-language="python" data-theme="default"><span class="line"><span style="color:#56B6C2">%%</span><span style="color:#ABB2BF">timeit</span></span>
<span class="line"><span style="color:#ABB2BF">ll </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> []</span></span>
<span class="line"><span style="color:#C678DD;font-style:italic">for</span><span style="color:#ABB2BF"> i </span><span style="color:#C678DD;font-style:italic">in</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">range</span><span style="color:#ABB2BF">(</span><span style="color:#56B6C2">len</span><span style="color:#ABB2BF">(rand_nums)):</span></span>
<span class="line"><span style="color:#ABB2BF">    ll.</span><span style="color:#61AFEF">append</span><span style="color:#ABB2BF">(rand_nums[i])</span></span></code></pre></div>
<div data-rehype-pretty-code-fragment=""><pre data-language="python:output" data-theme="default"><code data-language="python:output" data-theme="default"><span class="line"><span style="color:#abb2bf">6.67 ms ± 84.7 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)</span></span></code></pre></div>
<p>Adding the list elements by appending with <em>list.append()</em> takes more time than following code because the function is assigned to a variable (functions are first-class citizens in Python) and used inside the loop. This simple practice avoids referencing the functions with <strong>&#x27;.&#x27;</strong> too often and finally limits the need for dictionary lookup.</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="python" data-theme="default"><code data-language="python" data-theme="default"><span class="line"><span style="color:#56B6C2">%%</span><span style="color:#ABB2BF">timeit</span></span>
<span class="line"><span style="color:#ABB2BF">ll </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> []</span></span>
<span class="line"><span style="color:#ABB2BF">ll_append </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> ll.append</span></span>
<span class="line"><span style="color:#C678DD;font-style:italic">for</span><span style="color:#ABB2BF"> i </span><span style="color:#C678DD;font-style:italic">in</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">range</span><span style="color:#ABB2BF">(</span><span style="color:#56B6C2">len</span><span style="color:#ABB2BF">(rand_nums)):</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#61AFEF">ll_append</span><span style="color:#ABB2BF">(rand_nums[i])</span></span></code></pre></div>
<div data-rehype-pretty-code-fragment=""><pre data-language="python:output" data-theme="default"><code data-language="python:output" data-theme="default"><span class="line"><span style="color:#abb2bf">5.45 ms ± 116 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)</span></span></code></pre></div>
<h3>Avoid writing functions unnecessary</h3>
<p>It&#x27;s good to have code separability by using functions for each independent task. But, as functions in Python are relatively more expensive than C/C++ due to boxing and unboxing dynamic variables and other factors, limit writing functions for unnecessary cases like one-liners.</p>
<h3>Don&#x27;t wrap lambdas around functions</h3>
<p>Overuse or misuse of lambdas is not a good practice. It&#x27;s common to wrap functions inside lambdas which do the same thing without wrapping.</p>
<p>Consider the following two functions for sorting a list based on absolute values.</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="python" data-theme="default"><code data-language="python" data-theme="default"><span class="line"><span style="color:#C678DD">def</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">fun_sort_with_lambda</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66;font-style:italic">l</span><span style="color:#ABB2BF">):</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#C678DD;font-style:italic">return</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">sorted</span><span style="color:#ABB2BF">(l, </span><span style="color:#E06C75;font-style:italic">key</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">lambda</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66;font-style:italic">x</span><span style="color:#ABB2BF">: </span><span style="color:#56B6C2">abs</span><span style="color:#ABB2BF">(x))</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#C678DD">def</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">fun_sort_without_lambda</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66;font-style:italic">l</span><span style="color:#ABB2BF">):</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#C678DD;font-style:italic">return</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">sorted</span><span style="color:#ABB2BF">(l, </span><span style="color:#E06C75;font-style:italic">key</span><span style="color:#56B6C2">=abs</span><span style="color:#ABB2BF">)</span></span></code></pre></div>
<p>If we look at the CPython bytecode for the above functions with lambda expression passed as a key and with <em>abs</em> function object as a key,</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="python" data-theme="default"><code data-language="python" data-theme="default"><span class="line"><span style="color:#56B6C2">&gt;&gt;&gt;</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD;font-style:italic">from</span><span style="color:#ABB2BF"> dis </span><span style="color:#C678DD;font-style:italic">import</span><span style="color:#ABB2BF"> dis</span></span>
<span class="line"><span style="color:#56B6C2">&gt;&gt;&gt;</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">dis</span><span style="color:#ABB2BF">(fun_sort_with_lambda)</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#D19A66">2</span><span style="color:#ABB2BF">           </span><span style="color:#D19A66">0</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">LOAD_GLOBAL</span><span style="color:#ABB2BF">              </span><span style="color:#D19A66">0</span><span style="color:#ABB2BF"> (</span><span style="color:#56B6C2">sorted</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">              </span><span style="color:#D19A66">2</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">LOAD_FAST</span><span style="color:#ABB2BF">                </span><span style="color:#D19A66">0</span><span style="color:#ABB2BF"> (l)</span></span>
<span class="line"><span style="color:#ABB2BF">              </span><span style="color:#D19A66">4</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">LOAD_CONST</span><span style="color:#ABB2BF">               </span><span style="color:#D19A66">1</span><span style="color:#ABB2BF"> (</span><span style="color:#56B6C2">&lt;</span><span style="color:#ABB2BF">code </span><span style="color:#56B6C2">object</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">&lt;</span><span style="color:#C678DD">lambda</span><span style="color:#ABB2BF">&gt; at 0</span><span style="color:#D19A66;font-style:italic">x7fc51b3a19d0</span><span style="color:#ABB2BF">, file &quot;&lt;ipython-input-62-c4147c242c71&gt;&quot;, line 2&gt;)</span></span>
<span class="line"><span style="color:#ABB2BF">              </span><span style="color:#D19A66">6</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">LOAD_CONST</span><span style="color:#ABB2BF">               </span><span style="color:#D19A66">2</span><span style="color:#ABB2BF"> (</span><span style="color:#98C379">&#x27;fun_sort_with_lambda.&lt;locals&gt;.&lt;lambda&gt;&#x27;</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">              </span><span style="color:#D19A66">8</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">MAKE_FUNCTION</span><span style="color:#ABB2BF">            </span><span style="color:#D19A66">0</span></span>
<span class="line"><span style="color:#ABB2BF">             </span><span style="color:#D19A66">10</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">LOAD_CONST</span><span style="color:#ABB2BF">               </span><span style="color:#D19A66">3</span><span style="color:#ABB2BF"> ((</span><span style="color:#98C379">&#x27;key&#x27;</span><span style="color:#ABB2BF">,))</span></span>
<span class="line"><span style="color:#ABB2BF">             </span><span style="color:#D19A66">12</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">CALL_FUNCTION_KW</span><span style="color:#ABB2BF">         </span><span style="color:#D19A66">2</span></span>
<span class="line"><span style="color:#ABB2BF">             </span><span style="color:#D19A66">14</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">RETURN_VALUE</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#ABB2BF">Disassembly of </span><span style="color:#56B6C2">&lt;</span><span style="color:#ABB2BF">code </span><span style="color:#56B6C2">object</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">&lt;</span><span style="color:#C678DD">lambda</span><span style="color:#ABB2BF">&gt; at 0</span><span style="color:#D19A66;font-style:italic">x7fc51b3a19d0</span><span style="color:#ABB2BF">, file &quot;&lt;ipython-input-62-c4147c242c71&gt;&quot;, line 2&gt;:</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#D19A66">2</span><span style="color:#ABB2BF">           </span><span style="color:#D19A66">0</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">LOAD_GLOBAL</span><span style="color:#ABB2BF">              </span><span style="color:#D19A66">0</span><span style="color:#ABB2BF"> (</span><span style="color:#56B6C2">abs</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">              </span><span style="color:#D19A66">2</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">LOAD_FAST</span><span style="color:#ABB2BF">                </span><span style="color:#D19A66">0</span><span style="color:#ABB2BF"> (x)</span></span>
<span class="line"><span style="color:#ABB2BF">              </span><span style="color:#D19A66">4</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">CALL_FUNCTION</span><span style="color:#ABB2BF">            </span><span style="color:#D19A66">1</span></span>
<span class="line"><span style="color:#ABB2BF">              </span><span style="color:#D19A66">6</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">RETURN_VALUE</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#56B6C2">&gt;&gt;&gt;</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">dis</span><span style="color:#ABB2BF">(fun_sort_without_lambda)</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#D19A66">2</span><span style="color:#ABB2BF">           </span><span style="color:#D19A66">0</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">LOAD_GLOBAL</span><span style="color:#ABB2BF">              </span><span style="color:#D19A66">0</span><span style="color:#ABB2BF"> (</span><span style="color:#56B6C2">sorted</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">              </span><span style="color:#D19A66">2</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">LOAD_FAST</span><span style="color:#ABB2BF">                </span><span style="color:#D19A66">0</span><span style="color:#ABB2BF"> (l)</span></span>
<span class="line"><span style="color:#ABB2BF">              </span><span style="color:#D19A66">4</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">LOAD_GLOBAL</span><span style="color:#ABB2BF">              </span><span style="color:#D19A66">1</span><span style="color:#ABB2BF"> (</span><span style="color:#56B6C2">abs</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">              </span><span style="color:#D19A66">6</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">LOAD_CONST</span><span style="color:#ABB2BF">               </span><span style="color:#D19A66">1</span><span style="color:#ABB2BF"> ((</span><span style="color:#98C379">&#x27;key&#x27;</span><span style="color:#ABB2BF">,))</span></span>
<span class="line"><span style="color:#ABB2BF">              </span><span style="color:#D19A66">8</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">CALL_FUNCTION_KW</span><span style="color:#ABB2BF">         </span><span style="color:#D19A66">2</span></span>
<span class="line"><span style="color:#ABB2BF">             </span><span style="color:#D19A66">10</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">RETURN_VALUE</span></span></code></pre></div>
<p>for the function <em>fun_sort_with_lambda</em>, there is an additional function has been generated for lambda. We can avoid this function generation without using lambda as we can see in function <em>fun_sort_without_lambda</em>.</p>
<h3>List comprehension is fast</h3>
<p>When operating over lists like data structures, list comprehension is faster than traditional methods like looping, functional programming, etc.</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="python" data-theme="default"><code data-language="python" data-theme="default"><span class="line"><span style="color:#56B6C2">%%</span><span style="color:#ABB2BF">timeit</span></span>
<span class="line"><span style="color:#ABB2BF">rand_nums </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> []</span></span>
<span class="line"><span style="color:#C678DD;font-style:italic">for</span><span style="color:#ABB2BF"> _ </span><span style="color:#C678DD;font-style:italic">in</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">range</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">1000</span><span style="color:#ABB2BF">):</span></span>
<span class="line"><span style="color:#ABB2BF">    rand_nums.</span><span style="color:#61AFEF">append</span><span style="color:#ABB2BF">(</span><span style="color:#61AFEF">randint</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">1</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">100</span><span style="color:#ABB2BF">))</span></span></code></pre></div>
<div data-rehype-pretty-code-fragment=""><pre data-language="output" data-theme="default"><code data-language="output" data-theme="default"><span class="line"><span style="color:#abb2bf">603 µs ± 15.3 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)</span></span></code></pre></div>
<p>The list comprehension version of the above code snippet runs faster.</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="python:output" data-theme="default"><code data-language="python:output" data-theme="default"><span class="line"><span style="color:#abb2bf">%%timeit</span></span>
<span class="line"><span style="color:#abb2bf">rand_nums = [randint(1, 100) for _ in range(1000)]</span></span></code></pre></div>
<div data-rehype-pretty-code-fragment=""><pre data-language="python:output" data-theme="default"><code data-language="python:output" data-theme="default"><span class="line"><span style="color:#abb2bf">565 µs ± 11 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)</span></span></code></pre></div>
<hr/>
<p>The optimization practices are not limited to the above approaches. We can check how much time it is taking for each line by using libraries like <a href="https://docs.python.org/3/library/profile.html">CProfile</a> and making changes to run faster. In the next blog, we discuss how to improve Python computing efficiency using multiprocessing.</p>
<hr/>
<h3>References</h3>
<ul>
<li><a href="https://wiki.python.org/moin/PythonSpeed">Python Speed</a></li>
<li><a href="https://aglowiditsolutions.com/blog/python-optimization/">Python Optimization</a></li>
<li><a href="https://martinheinz.dev/blog/13">Making Python Programs Blazingly Fast</a></li>
</ul></article></div></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postMetadata":{"title":"Super fast Python (Part-2): Good Practices","description":"Write Python programs by following good practices to run code incredibly faster.","imgName":"super-fast-python-good-practices/super-fast-python-good-practices.jpg","date":"Nov 9, 2022","tags":["python-performance"],"keywords":["python-performance","python-optimize","python","fast-python","speed","python"],"id":"super-fast-python-good-practices"},"postContent":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    img: \"img\",\n    h1: \"h1\",\n    a: \"a\",\n    ul: \"ul\",\n    li: \"li\",\n    h2: \"h2\",\n    h3: \"h3\",\n    strong: \"strong\",\n    div: \"div\",\n    pre: \"pre\",\n    code: \"code\",\n    span: \"span\",\n    em: \"em\",\n    hr: \"hr\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"super-fast-python-good-practices/super-fast-python-good-practices.jpg\",\n        alt: \"Super fast Python: Good Practices\"\n      })\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"Super fast Python (Part-2): Good practices\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"In the earlier post on \", _jsx(_components.a, {\n        href: \"https://santhalakshminarayana.github.io/blog/super-fast-python-why-python-slow\",\n        children: \"why Python is slow?\"\n      }), \", we discussed slowness is in Python due to its internal design of some essential components like GIL, dynamic typing, and interpretation.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"In this blog, we discuss some good practices to speed up Python incredibly faster.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"This is the second post in the series on Python performance and Optimization. The series points out the utilization of inbuilt libraries, low-level code conversions, and other Python implementations to speed-up Python. The other posts included in this series are\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"(Part-1): \", _jsx(_components.a, {\n          href: \"https://santhalakshminarayana.github.io/blog/super-fast-python-why-python-slow\",\n          children: \"Why Python is slow?\"\n        })]\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"(Part-2): Good practices to write fast Python code (this post)\"\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"(Part-3): \", _jsx(_components.a, {\n          href: \"https://santhalakshminarayana.github.io/blog/super-fast-python-multi-processing\",\n          children: \"Multi-processing in Python\"\n        })]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"(Part-4): \", _jsx(_components.a, {\n          href: \"https://santhalakshminarayana.github.io/blog/super-fast-python-cython\",\n          children: \"Use Cython to get speed as fast as C\"\n        })]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"(Part-5): \", _jsx(_components.a, {\n          href: \"https://santhalakshminarayana.github.io/blog/super-fast-python-numba\",\n          children: \"Use Numba to speed up Python Functions and Numeric calculations\"\n        })]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"The following section describes the various good practices one can use to make Python super speed (up to 30% or more) without any external support like PyPy, Cython, Numpy, etc.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Python good practices for super fast code\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Use built-in data structures and libraries\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"As Python data types are implemented directly in \", _jsx(_components.strong, {\n        children: \"C\"\n      }), \", using the built-in types like list, map, and trees, compared to custom types we define, really helps the program to run faster.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Also, use built-in libraries for common algorithms like counting the duplicates, summing all list elements, finding the maximum element, etc, because these are all already written in \", _jsx(_components.strong, {\n        children: \"C\"\n      }), \" and compiled which makes these functions run faster than custom functions we write.\"]\n    }), \"\\n\", _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"python\",\n        \"data-theme\": \"default\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"python\",\n          \"data-theme\": \"default\",\n          children: [_jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"from\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" random \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"import\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" randint\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"rand_nums \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" [\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"randint\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"100\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \") \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"for\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" _ \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"in\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"range\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"100000\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \")]\"\n            })]\n          })]\n        })\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Create 100000 random numbers between 1 and 100.\"\n    }), \"\\n\", _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"python\",\n        \"data-theme\": \"default\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"python\",\n          \"data-theme\": \"default\",\n          children: [_jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"%%\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"timeit\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"cc \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"0\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"for\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" i \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"in\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"range\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"len\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(rand_nums)):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    cc \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"+=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" rand_nums[i]\"\n            })]\n          })]\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"python:output\",\n        \"data-theme\": \"default\",\n        children: _jsx(_components.code, {\n          \"data-language\": \"python:output\",\n          \"data-theme\": \"default\",\n          children: _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"6.02 ms ± 94 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)\"\n            })\n          })\n        })\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Manually summing up the all numbers over running a loop takes approximately 6ms.\"\n    }), \"\\n\", _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"python\",\n        \"data-theme\": \"default\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"python\",\n          \"data-theme\": \"default\",\n          children: [_jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"%%\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"timeit\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"cc \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"sum\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(rand_nums)\"\n            })]\n          })]\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"python:output\",\n        \"data-theme\": \"default\",\n        children: _jsx(_components.code, {\n          \"data-language\": \"python:output\",\n          \"data-theme\": \"default\",\n          children: _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"332 µs ± 15 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)\"\n            })\n          })\n        })\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Using built-in \", _jsx(_components.em, {\n        children: \"sum()\"\n      }), \" takes only 0.3ms approximately.\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Local Variables vs Global Variables\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"When we call a function (a routine), the system pauses the code execution at the call site in the current routine (say \", _jsx(_components.strong, {\n        children: \"main()\"\n      }), \") where the call has been made and places the called function at the top of the call stack. Imagine if we have defined numerous global variables and made multiple function calls. The system has to make sure that all these global variables should be available for any routine placed in the call stack at all times. The system has to provide a lookup mechanism for both local and global variables for each routine. And with global variables, this lookup mechanism may take some time than local variables.\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Import the sub-modules and functions directly\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"When importing any module to use its sub-modules, classes, or functions, import them directly instead of importing just the module. When accessing objects using \", _jsx(_components.em, {\n        children: \".\"\n      }), \", it triggers dictionary lookup using \", _jsx(_components.em, {\n        children: \"__getattribute__\"\n      }), \". If we call the object multiple times using \", _jsx(_components.em, {\n        children: \".\"\n      }), \", that may increase the program time.\"]\n    }), \"\\n\", _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"python\",\n        \"data-theme\": \"default\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"python\",\n          \"data-theme\": \"default\",\n          children: [_jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#7F848E\",\n                fontStyle: \"italic\"\n              },\n              children: \"# instead of this\"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"import\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" abc\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"def_obj \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" abc.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"Def\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"()\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: \" \"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#7F848E\",\n                fontStyle: \"italic\"\n              },\n              children: \"# do this\"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"from\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" abc \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"import\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" Def\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"def_obj \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"Def\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"()\"\n            })]\n          })]\n        })\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Limit the usage of '.'\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Speaking of the lookup time with the module's object references, the same can be applied to the referencing of properties and functions of an object(both custom and in-built).\"\n    }), \"\\n\", _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"python\",\n        \"data-theme\": \"default\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"python\",\n          \"data-theme\": \"default\",\n          children: [_jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"%%\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"timeit\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"ll \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" []\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"for\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" i \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"in\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"range\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"len\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(rand_nums)):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    ll.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"append\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(rand_nums[i])\"\n            })]\n          })]\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"python:output\",\n        \"data-theme\": \"default\",\n        children: _jsx(_components.code, {\n          \"data-language\": \"python:output\",\n          \"data-theme\": \"default\",\n          children: _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"6.67 ms ± 84.7 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)\"\n            })\n          })\n        })\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Adding the list elements by appending with \", _jsx(_components.em, {\n        children: \"list.append()\"\n      }), \" takes more time than following code because the function is assigned to a variable (functions are first-class citizens in Python) and used inside the loop. This simple practice avoids referencing the functions with \", _jsx(_components.strong, {\n        children: \"'.'\"\n      }), \" too often and finally limits the need for dictionary lookup.\"]\n    }), \"\\n\", _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"python\",\n        \"data-theme\": \"default\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"python\",\n          \"data-theme\": \"default\",\n          children: [_jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"%%\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"timeit\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"ll \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" []\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"ll_append \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" ll.append\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"for\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" i \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"in\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"range\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"len\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(rand_nums)):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"ll_append\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(rand_nums[i])\"\n            })]\n          })]\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"python:output\",\n        \"data-theme\": \"default\",\n        children: _jsx(_components.code, {\n          \"data-language\": \"python:output\",\n          \"data-theme\": \"default\",\n          children: _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"5.45 ms ± 116 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)\"\n            })\n          })\n        })\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Avoid writing functions unnecessary\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"It's good to have code separability by using functions for each independent task. But, as functions in Python are relatively more expensive than C/C++ due to boxing and unboxing dynamic variables and other factors, limit writing functions for unnecessary cases like one-liners.\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Don't wrap lambdas around functions\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Overuse or misuse of lambdas is not a good practice. It's common to wrap functions inside lambdas which do the same thing without wrapping.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Consider the following two functions for sorting a list based on absolute values.\"\n    }), \"\\n\", _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"python\",\n        \"data-theme\": \"default\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"python\",\n          \"data-theme\": \"default\",\n          children: [_jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"def\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"fun_sort_with_lambda\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\",\n                fontStyle: \"italic\"\n              },\n              children: \"l\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"return\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"sorted\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(l, \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\",\n                fontStyle: \"italic\"\n              },\n              children: \"key\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"lambda\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\",\n                fontStyle: \"italic\"\n              },\n              children: \"x\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \": \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"abs\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(x))\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"def\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"fun_sort_without_lambda\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\",\n                fontStyle: \"italic\"\n              },\n              children: \"l\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"return\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"sorted\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(l, \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\",\n                fontStyle: \"italic\"\n              },\n              children: \"key\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=abs\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \")\"\n            })]\n          })]\n        })\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"If we look at the CPython bytecode for the above functions with lambda expression passed as a key and with \", _jsx(_components.em, {\n        children: \"abs\"\n      }), \" function object as a key,\"]\n    }), \"\\n\", _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"python\",\n        \"data-theme\": \"default\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"python\",\n          \"data-theme\": \"default\",\n          children: [_jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"\u003e\u003e\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"from\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" dis \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"import\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" dis\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"\u003e\u003e\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"dis\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(fun_sort_with_lambda)\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"2\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"           \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"LOAD_GLOBAL\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"              \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" (\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"sorted\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \")\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"              \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"2\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"LOAD_FAST\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"                \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" (l)\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"              \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"4\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"LOAD_CONST\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"               \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" (\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"code \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"object\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"lambda\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"\u003e at 0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\",\n                fontStyle: \"italic\"\n              },\n              children: \"x7fc51b3a19d0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", file \\\"\u003cipython-input-62-c4147c242c71\u003e\\\", line 2\u003e)\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"              \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"6\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"LOAD_CONST\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"               \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"2\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" (\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98C379\"\n              },\n              children: \"'fun_sort_with_lambda.\u003clocals\u003e.\u003clambda\u003e'\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \")\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"              \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"8\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"MAKE_FUNCTION\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"            \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"0\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"             \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"10\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"LOAD_CONST\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"               \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"3\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" ((\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98C379\"\n              },\n              children: \"'key'\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \",))\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"             \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"12\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"CALL_FUNCTION_KW\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"         \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"2\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"             \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"14\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"RETURN_VALUE\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"Disassembly of \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"code \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"object\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"lambda\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"\u003e at 0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\",\n                fontStyle: \"italic\"\n              },\n              children: \"x7fc51b3a19d0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", file \\\"\u003cipython-input-62-c4147c242c71\u003e\\\", line 2\u003e:\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"2\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"           \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"LOAD_GLOBAL\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"              \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" (\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"abs\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \")\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"              \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"2\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"LOAD_FAST\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"                \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" (x)\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"              \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"4\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"CALL_FUNCTION\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"            \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"              \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"6\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"RETURN_VALUE\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"\u003e\u003e\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"dis\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(fun_sort_without_lambda)\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"2\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"           \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"LOAD_GLOBAL\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"              \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" (\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"sorted\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \")\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"              \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"2\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"LOAD_FAST\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"                \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" (l)\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"              \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"4\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"LOAD_GLOBAL\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"              \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" (\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"abs\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \")\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"              \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"6\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"LOAD_CONST\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"               \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" ((\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#98C379\"\n              },\n              children: \"'key'\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \",))\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"              \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"8\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"CALL_FUNCTION_KW\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"         \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"2\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"             \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"10\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"RETURN_VALUE\"\n            })]\n          })]\n        })\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"for the function \", _jsx(_components.em, {\n        children: \"fun_sort_with_lambda\"\n      }), \", there is an additional function has been generated for lambda. We can avoid this function generation without using lambda as we can see in function \", _jsx(_components.em, {\n        children: \"fun_sort_without_lambda\"\n      }), \".\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"List comprehension is fast\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"When operating over lists like data structures, list comprehension is faster than traditional methods like looping, functional programming, etc.\"\n    }), \"\\n\", _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"python\",\n        \"data-theme\": \"default\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"python\",\n          \"data-theme\": \"default\",\n          children: [_jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"%%\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"timeit\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"rand_nums \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" []\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"for\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" _ \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\",\n                fontStyle: \"italic\"\n              },\n              children: \"in\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"range\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1000\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"):\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"line\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    rand_nums.\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"append\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"randint\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"100\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"))\"\n            })]\n          })]\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"output\",\n        \"data-theme\": \"default\",\n        children: _jsx(_components.code, {\n          \"data-language\": \"output\",\n          \"data-theme\": \"default\",\n          children: _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"603 µs ± 15.3 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)\"\n            })\n          })\n        })\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"The list comprehension version of the above code snippet runs faster.\"\n    }), \"\\n\", _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"python:output\",\n        \"data-theme\": \"default\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"python:output\",\n          \"data-theme\": \"default\",\n          children: [_jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"%%timeit\"\n            })\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"rand_nums = [randint(1, 100) for _ in range(1000)]\"\n            })\n          })]\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: _jsx(_components.pre, {\n        \"data-language\": \"python:output\",\n        \"data-theme\": \"default\",\n        children: _jsx(_components.code, {\n          \"data-language\": \"python:output\",\n          \"data-theme\": \"default\",\n          children: _jsx(_components.span, {\n            className: \"line\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#abb2bf\"\n              },\n              children: \"565 µs ± 11 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)\"\n            })\n          })\n        })\n      })\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsxs(_components.p, {\n      children: [\"The optimization practices are not limited to the above approaches. We can check how much time it is taking for each line by using libraries like \", _jsx(_components.a, {\n        href: \"https://docs.python.org/3/library/profile.html\",\n        children: \"CProfile\"\n      }), \" and making changes to run faster. In the next blog, we discuss how to improve Python computing efficiency using multiprocessing.\"]\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h3, {\n      children: \"References\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://wiki.python.org/moin/PythonSpeed\",\n          children: \"Python Speed\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://aglowiditsolutions.com/blog/python-optimization/\",\n          children: \"Python Optimization\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://martinheinz.dev/blog/13\",\n          children: \"Making Python Programs Blazingly Fast\"\n        })\n      }), \"\\n\"]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}},"id":"super-fast-python-good-practices"},"__N_SSG":true},"page":"/blog/[id]","query":{"id":"super-fast-python-good-practices"},"buildId":"xoNIx0NwSZAFbSAX6tcfK","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>